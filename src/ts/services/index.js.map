{
  "version": 3,
  "sources": ["index.ts"],
  "sourcesContent": ["/**\r\n * Companion Service\r\n *\r\n * Provides access to static companion data from companion-data.ts\r\n * This service does NOT handle user configuration (unlocked status, levels, presets)\r\n * - that data lives in the loadout store (loadout-data companions)\r\n *\r\n * Usage:\r\n * - Import this service for static data: getCompanionEffects(), getCompanionClasses(), etc.\r\n * - Import loadoutStore for user config: getCompanion(), getPresets(), etc.\r\n */\r\n\r\nimport { COMPANION_DATA } from '../data/companion-data.js';\r\nimport type { CompanionLevelData, CompanionClassData, CompanionDataRoot, CompanionRarityData } from '../data/companion-data.js';\r\nimport type { CompanionKey, CompanionClass, CompanionEffects } from '@ts/types/page/companions/companions.types';\r\n\r\n// ============================================================================\r\n// STATIC DATA ACCESS (from companion-data.ts)\r\n// ============================================================================\r\n\r\n/**\r\n * Get companion effects for a given class, rarity, and level\r\n * @param className - The companion class (e.g., 'Hero', 'BowMaster', 'NightLord')\r\n * @param rarity - The rarity ('Normal', 'Rare', 'Epic', 'Unique', 'Legendary')\r\n * @param level - The companion level (1-300)\r\n * @returns Object containing inventoryEffect and equipEffect, or null if not found\r\n */\r\nexport function getCompanionEffects(\r\n    className: string,\r\n    rarity: string,\r\n    level: number\r\n): CompanionEffects | null {\r\n    // Validate inputs\r\n    if (!COMPANION_DATA.classes.includes(className)) {\r\n        console.warn(`Invalid class: ${className}. Available classes:`, COMPANION_DATA.classes);\r\n        return null;\r\n    }\r\n\r\n    if (!COMPANION_DATA.rarities.includes(rarity)) {\r\n        console.warn(`Invalid rarity: ${rarity}. Available rarities:`, COMPANION_DATA.rarities);\r\n        return null;\r\n    }\r\n\r\n    if (level < 1 || level > COMPANION_DATA.maxLevel) {\r\n        console.warn(`Invalid level: ${level}. Must be between 1 and ${COMPANION_DATA.maxLevel}`);\r\n        return null;\r\n    }\r\n\r\n    // Get the companion data\r\n    const classData = COMPANION_DATA.data[className];\r\n    if (!classData || !classData[rarity]) {\r\n        return null;\r\n    }\r\n\r\n    const rarityData = classData[rarity];\r\n    const levelData = rarityData.levels[level];\r\n\r\n    if (!levelData) {\r\n        console.warn(`No data found for level ${level}`);\r\n        return null;\r\n    }\r\n\r\n    return {\r\n        inventoryEffect: levelData.inventoryEffect,\r\n        equipEffect: levelData.equipEffect,\r\n        supporterCode: parseInt(rarityData.supporterCode, 10),\r\n        supporterIndex: parseInt(rarityData.supporterIndex, 10)\r\n    };\r\n}\r\n\r\n/**\r\n * Get all available companion classes\r\n * @returns Array of class names\r\n */\r\nexport function getCompanionClasses(): CompanionClass[] {\r\n    return [...COMPANION_DATA.classes] as CompanionClass[];\r\n}\r\n\r\n/**\r\n * Get all available rarities\r\n * @returns Array of rarity names\r\n */\r\nexport function getCompanionRarities(): string[] {\r\n    return [...COMPANION_DATA.rarities];\r\n}\r\n\r\n/**\r\n * Get maximum companion level\r\n * @returns Maximum level\r\n */\r\nexport function getMaxCompanionLevel(): number {\r\n    return COMPANION_DATA.maxLevel;\r\n}\r\n\r\n/**\r\n * Get all data for a specific companion class\r\n * @param className - The companion class\r\n * @returns All rarity data for the class, or null if not found\r\n */\r\nexport function getCompanionClassData(className: string): CompanionClassData | null {\r\n    if (!COMPANION_DATA.classes.includes(className)) {\r\n        console.warn(`Invalid class: ${className}`);\r\n        return null;\r\n    }\r\n    return COMPANION_DATA.data[className] || null;\r\n}\r\n\r\n/**\r\n * Get all available companion keys (class-rarity combinations)\r\n * @returns Array of all possible companion keys\r\n */\r\nexport function getAllCompanionKeys(): CompanionKey[] {\r\n    const keys: CompanionKey[] = [];\r\n    COMPANION_DATA.classes.forEach(className => {\r\n        COMPANION_DATA.rarities.forEach(rarity => {\r\n            keys.push(`${className}-${rarity}` as CompanionKey);\r\n        });\r\n    });\r\n    return keys;\r\n}\r\n\r\n// ============================================================================\r\n// DATA HELPERS\r\n// ============================================================================\r\n\r\n/**\r\n * Check if a companion key is valid\r\n * @param companionKey - Companion key to validate\r\n * @returns True if the key is valid\r\n */\r\nexport function isValidCompanionKey(companionKey: string): companionKey is CompanionKey {\r\n    const [className, rarity] = companionKey.split('-');\r\n    return COMPANION_DATA.classes.includes(className) && COMPANION_DATA.rarities.includes(rarity);\r\n}\r\n\r\n/**\r\n * Parse a companion key into class and rarity\r\n * @param companionKey - Companion key (e.g., 'Hero-Legendary')\r\n * @returns Object with className and rarity, or null if invalid\r\n */\r\nexport function parseCompanionKey(companionKey: CompanionKey): { className: CompanionClass; rarity: string } | null {\r\n    const [className, rarity] = companionKey.split('-');\r\n    if (!className || !rarity) return null;\r\n    if (!COMPANION_DATA.classes.includes(className) || !COMPANION_DATA.rarities.includes(rarity)) {\r\n        return null;\r\n    }\r\n    return { className: className as CompanionClass, rarity };\r\n}\r\n\r\n// ============================================================================\r\n// EXPORTS\r\n// ============================================================================\r\n\r\n// Export the raw data for advanced usage\r\nexport { COMPANION_DATA };\r\n\r\n// Export types from companion-data\r\nexport type { CompanionLevelData, CompanionRarityData, CompanionClassData, CompanionDataRoot } from '../data/companion-data.js';\r\n\r\n// Expose getCompanionEffects globally after module loads (for legacy compatibility)\r\n(window as any).getCompanionEffects = getCompanionEffects;\r\n"],
  "mappings": "AAYA,SAAS,sBAAsB;AAexB,SAAS,oBACZ,WACA,QACA,OACuB;AAEvB,MAAI,CAAC,eAAe,QAAQ,SAAS,SAAS,GAAG;AAC7C,YAAQ,KAAK,kBAAkB,SAAS,wBAAwB,eAAe,OAAO;AACtF,WAAO;AAAA,EACX;AAEA,MAAI,CAAC,eAAe,SAAS,SAAS,MAAM,GAAG;AAC3C,YAAQ,KAAK,mBAAmB,MAAM,yBAAyB,eAAe,QAAQ;AACtF,WAAO;AAAA,EACX;AAEA,MAAI,QAAQ,KAAK,QAAQ,eAAe,UAAU;AAC9C,YAAQ,KAAK,kBAAkB,KAAK,2BAA2B,eAAe,QAAQ,EAAE;AACxF,WAAO;AAAA,EACX;AAGA,QAAM,YAAY,eAAe,KAAK,SAAS;AAC/C,MAAI,CAAC,aAAa,CAAC,UAAU,MAAM,GAAG;AAClC,WAAO;AAAA,EACX;AAEA,QAAM,aAAa,UAAU,MAAM;AACnC,QAAM,YAAY,WAAW,OAAO,KAAK;AAEzC,MAAI,CAAC,WAAW;AACZ,YAAQ,KAAK,2BAA2B,KAAK,EAAE;AAC/C,WAAO;AAAA,EACX;AAEA,SAAO;AAAA,IACH,iBAAiB,UAAU;AAAA,IAC3B,aAAa,UAAU;AAAA,IACvB,eAAe,SAAS,WAAW,eAAe,EAAE;AAAA,IACpD,gBAAgB,SAAS,WAAW,gBAAgB,EAAE;AAAA,EAC1D;AACJ;AAMO,SAAS,sBAAwC;AACpD,SAAO,CAAC,GAAG,eAAe,OAAO;AACrC;AAMO,SAAS,uBAAiC;AAC7C,SAAO,CAAC,GAAG,eAAe,QAAQ;AACtC;AAMO,SAAS,uBAA+B;AAC3C,SAAO,eAAe;AAC1B;AAOO,SAAS,sBAAsB,WAA8C;AAChF,MAAI,CAAC,eAAe,QAAQ,SAAS,SAAS,GAAG;AAC7C,YAAQ,KAAK,kBAAkB,SAAS,EAAE;AAC1C,WAAO;AAAA,EACX;AACA,SAAO,eAAe,KAAK,SAAS,KAAK;AAC7C;AAMO,SAAS,sBAAsC;AAClD,QAAM,OAAuB,CAAC;AAC9B,iBAAe,QAAQ,QAAQ,eAAa;AACxC,mBAAe,SAAS,QAAQ,YAAU;AACtC,WAAK,KAAK,GAAG,SAAS,IAAI,MAAM,EAAkB;AAAA,IACtD,CAAC;AAAA,EACL,CAAC;AACD,SAAO;AACX;AAWO,SAAS,oBAAoB,cAAoD;AACpF,QAAM,CAAC,WAAW,MAAM,IAAI,aAAa,MAAM,GAAG;AAClD,SAAO,eAAe,QAAQ,SAAS,SAAS,KAAK,eAAe,SAAS,SAAS,MAAM;AAChG;AAOO,SAAS,kBAAkB,cAAkF;AAChH,QAAM,CAAC,WAAW,MAAM,IAAI,aAAa,MAAM,GAAG;AAClD,MAAI,CAAC,aAAa,CAAC,OAAQ,QAAO;AAClC,MAAI,CAAC,eAAe,QAAQ,SAAS,SAAS,KAAK,CAAC,eAAe,SAAS,SAAS,MAAM,GAAG;AAC1F,WAAO;AAAA,EACX;AACA,SAAO,EAAE,WAAwC,OAAO;AAC5D;AAaC,OAAe,sBAAsB;",
  "names": []
}
