{
  "version": 3,
  "sources": ["skill-coefficient.service.ts"],
  "sourcesContent": ["// Skill Coefficient Calculator\n// Calculates skill damage % based on character level for 3rd and 4th job skills\n\n// Import all class skill data\nimport { SKILL_LEVEL_FACTOR_TABLE } from '@ts/data/factor-table-data.js';\nimport {\n    HERO_SKILLS,\n    DARK_KNIGHT_SKILLS as DK_GENERATED_SKILLS,\n    ARCH_MAGE_IL_SKILLS,\n    ARCH_MAGE_FP_SKILLS,\n    BOWMASTER_SKILLS,\n    MARKSMAN_SKILLS,\n    NIGHT_LORD_SKILLS,\n    SHADOWER_SKILLS\n} from '@ts/data/all-class-skills.js';\nimport { BaseStats, STAT } from '@ts/types';\nimport { StatCalculationService } from '@ts/services/stat-calculation-service';\n\n// ============================================================================\n// TYPE DEFINITIONS\n// ============================================================================\n\n/**\n * Factor table type - maps level (as string key) to array of factors\n */\ntype FactorTable = Record<string, number[]>;\n\n/**\n * Job tier values\n */\ntype JobTier = 1 | 2 | 3 | 4;\n\n/**\n * Job tier string names\n */\ntype JobTierString = 'firstJob' | 'secondJob' | 'thirdJob' | 'fourthJob';\n\n/**\n * Skill effect configuration\n */\ninterface SkillEffect {\n    stat: string;\n    baseValue: number;\n    factorIndex: number;\n    type: 'flat' | 'percent' | string;\n}\n\n/**\n * Base skill data structure\n */\ninterface BaseSkillData {\n    name: string;\n    jobStep?: number;\n    skillIndex?: number;\n    effects?: SkillEffect[];\n    isComplex?: boolean;\n    note?: string;\n}\n\n/**\n * Skill data from generated class skills (all-class-skills.ts)\n */\ninterface GeneratedSkillData extends BaseSkillData {\n    jobStep: number;\n    skillIndex: number;\n    effects: SkillEffect[];\n    isComplex?: boolean;\n    note?: string;\n}\n\n/**\n * Class skills collection type\n */\ninterface ClassSkills {\n    [key: string]: GeneratedSkillData;\n}\n\n/**\n * Skill configuration with base damage and factor index\n */\ninterface SkillConfig {\n    baseDamage: number;\n    factorIndex: number;\n    scalesWithLevel: boolean;\n}\n\n/**\n * Skill configuration for stat bonuses\n */\ninterface SkillBonusConfig {\n    base: number;\n    factorIndex: number;\n    scalesWithLevel: boolean;\n    isFlat?: boolean;\n}\n\n/**\n * Dark Knight skill structure\n */\ninterface DarkKnightSkill {\n    key: string;\n    name: string;\n    icon: string;\n    description: string;\n    effects: string[];\n    isPassive: boolean;\n    jobTier: JobTierString;\n    baseDamage?: number;\n    factorIndex?: number;\n    scalesWithLevel?: boolean;\n    attackBonus?: SkillBonusConfig;\n    defenseBonus?: SkillBonusConfig;\n    damageTakenIncrease?: SkillBonusConfig;\n    attackSpeed?: SkillBonusConfig;\n    strFromDefense?: SkillBonusConfig;\n    minDamageRatio?: SkillBonusConfig;\n    toughnessBonus?: SkillBonusConfig;\n    hpRecovery?: SkillBonusConfig;\n    criticalRate?: SkillBonusConfig;\n    criticalDamage?: SkillBonusConfig;\n    debuffTolerance?: SkillBonusConfig;\n    triggerChance?: number;\n}\n\n/**\n * Dark Knight skills collection\n */\ninterface DarkKnightSkills {\n    [key: string]: DarkKnightSkill;\n}\n\n/**\n * Skill coefficient breakdown\n */\ninterface SkillCoefficientBreakdown {\n    level: number;\n    jobTier: string;\n    baseDamage: number;\n    baseDamagePercent: number;\n    factorIndex: number;\n    factor: number;\n    multiplier: number;\n    finalDamagePercent: number;\n    formula: string;\n}\n\n/**\n * Hyper Body calculation result\n */\ninterface HyperBodyResult {\n    attackBonus: number;\n    defenseBonus: number;\n}\n\n/**\n * Lord of Darkness calculation result\n */\ninterface LordOfDarknessResult {\n    hpRecovery: number;\n    criticalRate: number;\n    criticalDamage: number;\n}\n\n/**\n * All Dark Knight skills result\n */\ninterface AllDarkKnightSkills {\n    level: number;\n    secondJobSkills: {\n        spearSweep: { name: string; damage: string };\n        evilEye: { name: string; damageTakenIncrease: string };\n        evilEyeShock: { name: string; damage: string };\n        hyperBody: { name: string; attackBonus: string; defenseBonus: string };\n        weaponAcceleration: { name: string; attackSpeed: string };\n        ironWall: { name: string; strFromDefense: string };\n        weaponMastery: { name: string; minDamageRatio: string };\n        finalAttack: { name: string; damage: string; triggerChance: string };\n    };\n    thirdJobSkills: {\n        laManchaSpear: { name: string; damage: string };\n        evilEyeOfDominant: { name: string; damage: string };\n        rush: { name: string; damage: string };\n        crossOverChains: { name: string; attackBonus: string; toughnessBonus: string };\n        evilEyeShockEnhancement: { name: string; damage: string };\n        hexOfTheEvilEye: { name: string; attackBonus: string };\n        lordOfDarkness: { name: string; hpRecovery: string; criticalRate: string; criticalDamage: string };\n        endure: { name: string; debuffTolerance: string };\n    };\n}\n\n/**\n * Passive skill entry for breakdown\n */\ninterface PassiveBreakdown {\n    passive: string;\n    stat: string;\n    statDisplay?: string;\n    baseValue: number;\n    bonusValue: number;\n    gain: number;\n    isPercent: boolean;\n    note?: string;\n}\n\n/**\n * Complex passive entry\n */\ninterface ComplexPassive {\n    passive: string;\n    stat?: string;\n    baseValue?: number;\n    bonusValue?: number;\n    gain?: number;\n    isPercent?: boolean;\n    note?: string;\n}\n\n/**\n * Result from calculateJobSkillPassiveGains\n */\ninterface JobSkillPassiveGainsResult {\n    statChanges: Record<string, number>;\n    breakdown: PassiveBreakdown[];\n    complexPassives: ComplexPassive[];\n    complexStatChanges: Record<string, number>;\n}\n\n/**\n * Skill level bonuses object\n */\ninterface SkillLevelBonuses {\n    firstJob?: number;\n    secondJob?: number;\n    thirdJob?: number;\n    fourthJob?: number;\n    allSkills?: number;\n}\n\n// Map class names to their skill data\nconst CLASS_TO_SKILLS_MAP: Record<string, ClassSkills> = {\n    'hero': HERO_SKILLS,\n    'dark-knight': DK_GENERATED_SKILLS,\n    'arch-mage-il': ARCH_MAGE_IL_SKILLS,\n    'arch-mage-fp': ARCH_MAGE_FP_SKILLS,\n    'bowmaster': BOWMASTER_SKILLS,\n    'marksman': MARKSMAN_SKILLS,\n    'night-lord': NIGHT_LORD_SKILLS,\n    'shadower': SHADOWER_SKILLS\n};\n\n// 3rd Job Skills Configuration\n// All main 3rd job attacking skills share these parameters:\n// - Base damage: 800 (represents 80%)\n// - Factor index: 21 (index into the Factor array for level scaling)\nconst THIRD_JOB_SKILLS: SkillConfig = {\n    baseDamage: 800,      // Base damage value (divide by 10 to get %)\n    factorIndex: 21,      // Index in the Factor array for level scaling\n    scalesWithLevel: true\n};\n\n// 4th Job Skills Configuration\n// All main 4th job attacking skills share these parameters:\n// - Base damage: 2900 (represents 290%)\n// - Factor index: 22 (index into the Factor array for level scaling)\nconst FOURTH_JOB_SKILLS: SkillConfig = {\n    baseDamage: 2900,     // Base damage value (divide by 10 to get %)\n    factorIndex: 21,      // Index in the Factor array for level scaling\n    scalesWithLevel: true\n};\n\n/**\n * Gets the factor value for a given level\n * Interpolates between known level values if exact level is not in table\n * @param level - Character level\n * @param factorIndex - Index in the factor array to use\n * @returns Factor value (1000 = 1.0x multiplier)\n */\nfunction getFactorForLevel(level: number, factorIndex: number): number {\n    // If exact level exists in table, return it\n    if (SKILL_LEVEL_FACTOR_TABLE[level]) {\n        return SKILL_LEVEL_FACTOR_TABLE[level][factorIndex];\n    }\n\n    // Find the two nearest levels to interpolate between\n    const levels = Object.keys(SKILL_LEVEL_FACTOR_TABLE).map(Number).sort((a, b) => a - b);\n\n    // Find lower and upper bounds\n    let lowerLevel = levels[0];\n    let upperLevel = levels[levels.length - 1];\n\n    for (let i = 0; i < levels.length - 1; i++) {\n        if (level >= levels[i] && level <= levels[i + 1]) {\n            lowerLevel = levels[i];\n            upperLevel = levels[i + 1];\n            break;\n        }\n    }\n\n    // If level is below minimum or above maximum, clamp to bounds\n    if (level < levels[0]) {\n        return SKILL_LEVEL_FACTOR_TABLE[levels[0]][factorIndex];\n    }\n    if (level > levels[levels.length - 1]) {\n        return SKILL_LEVEL_FACTOR_TABLE[levels[levels.length - 1]][factorIndex];\n    }\n\n    // Linear interpolation\n    const lowerFactor = SKILL_LEVEL_FACTOR_TABLE[lowerLevel][factorIndex];\n    const upperFactor = SKILL_LEVEL_FACTOR_TABLE[upperLevel][factorIndex];\n    const ratio = (level - lowerLevel) / (upperLevel - lowerLevel);\n\n    return Math.round(lowerFactor + (upperFactor - lowerFactor) * ratio);\n}\n\n/**\n * Calculate the input level for skills based on character level and job tier\n * This is used to look up the appropriate factor in the skill level factor table\n * @param characterLevel - Current character level\n * @param jobTier - Job tier (1, 2, 3, or 4)\n * @param skillLevelBonus - Bonus to skill level from items (default 0)\n * @returns Input level for factor table lookup\n */\nfunction calculateSkillInputLevel(characterLevel: number, jobTier: JobTier, skillLevelBonus: number = 0): number {\n    let baseInputLevel = 0;\n\n    switch (jobTier) {\n        case 1:\n            // 1st job skills scale directly with character level (assumption - needs verification)\n            baseInputLevel = characterLevel;\n            break;\n        case 2:\n            // 2nd job skills: Similar pattern, starts at level 30\n            // Using same formula pattern until exact formula is confirmed\n            baseInputLevel = Math.max(0, Math.min((characterLevel - 30) * 3, 120));\n            break;\n        case 3:\n            // 3rd job skills: (characterLevel - 60) * 3, capped at 120\n            baseInputLevel = Math.max(0, Math.min((characterLevel - 60) * 3, 120));\n            break;\n        case 4:\n            // 4th job skills: (characterLevel - 100) * 3, no cap\n            baseInputLevel = Math.max(0, (characterLevel - 100) * 3);\n            break;\n        default:\n            baseInputLevel = characterLevel;\n    }\n\n    return baseInputLevel + skillLevelBonus;\n}\n\n/**\n * Calculates the skill coefficient (damage %) for 3rd job skills\n * All main 3rd job attacking skills use the same scaling:\n * - Intrepid Slash (Hero)\n * - Ice Strike (I/L Mage)\n * - Explosion (F/P Mage)\n * - Midnight Carnival (Night Lord)\n * - Wind Arrow II (Bowmaster)\n * - Piercing Arrow II (Marksman)\n * - La Mancha Spear (Dark Knight)\n *\n * Formula:\n * - Input level = min((characterLevel - 60) * 3, 120) + skillLevel\n * - Coefficient = Base damage (80%) * (factor at input level / 1000)\n *\n * @param characterLevel - Character level (1-200)\n * @param skillLevel - Skill level bonus (default 0)\n * @returns Skill damage percentage (e.g., 110.08 for 110.08%)\n */\nexport function calculate3rdJobSkillCoefficient(characterLevel: number, skillLevel: number = 0): number {\n    const baseDamagePercent = THIRD_JOB_SKILLS.baseDamage / 10;\n\n    // Calculate input level for factor table using shared helper\n    const inputLevel = calculateSkillInputLevel(characterLevel, 3, skillLevel);\n\n    // Get factor from table using the input level\n    const factor = getFactorForLevel(inputLevel, THIRD_JOB_SKILLS.factorIndex);\n    const multiplier = factor / 1000;\n\n    return baseDamagePercent * multiplier;\n}\n\n/**\n * Calculates the skill coefficient (damage %) for 4th job skills\n * All main 4th job attacking skills use the same scaling\n *\n * Formula:\n * - Input level = (characterLevel - 100) * 3 + skillLevel\n * - Coefficient = Base damage (290%) * (factor at input level / 1000)\n *\n * @param characterLevel - Character level (1-200)\n * @param skillLevel - Skill level bonus (default 0)\n * @returns Skill damage percentage\n */\nexport function calculate4thJobSkillCoefficient(characterLevel: number, skillLevel: number = 0): number {\n    const baseDamagePercent = FOURTH_JOB_SKILLS.baseDamage / 10;\n\n    // Calculate input level for factor table using shared helper\n    const inputLevel = calculateSkillInputLevel(characterLevel, 4, skillLevel);\n\n    // Get factor from table using the input level\n    const factor = getFactorForLevel(inputLevel, FOURTH_JOB_SKILLS.factorIndex);\n    const multiplier = factor / 1000;\n\n    return baseDamagePercent * multiplier;\n}\n\n/**\n * Gets detailed calculation breakdown for debugging\n * @param level - Character level\n * @param jobTier - '3rd' or '4th'\n * @returns Breakdown of calculation steps\n */\nexport function getSkillCoefficientBreakdown(level: number, jobTier: '3rd' | '4th'): SkillCoefficientBreakdown {\n    const config = jobTier === '4th' ? FOURTH_JOB_SKILLS : THIRD_JOB_SKILLS;\n    const factor = getFactorForLevel(level, config.factorIndex);\n    const baseDamagePercent = config.baseDamage / 10;\n    const multiplier = factor / 1000;\n    const finalDamage = baseDamagePercent * multiplier;\n\n    return {\n        level,\n        jobTier,\n        baseDamage: config.baseDamage,\n        baseDamagePercent,\n        factorIndex: config.factorIndex,\n        factor,\n        multiplier,\n        finalDamagePercent: finalDamage,\n        formula: `${baseDamagePercent}% \u00D7 (${factor} / 1000) = ${finalDamage.toFixed(2)}%`\n    };\n}\n\n// ============================================================================\n// DARK KNIGHT SPECIFIC SKILLS\n// ============================================================================\n\n/**\n * Dark Knight skill configurations with UI data\n * Factor indices: 12, 21, 22\n */\nexport const DARK_KNIGHT_SKILLS: DarkKnightSkills = {\n    // 2nd Job Active Skills\n    SPEAR_SWEEP: {\n        key: 'spearSweep',\n        name: \"Spear Sweep\",\n        icon: 'media/skills/dark knight/Skill_Spear_Sweep.png',\n        description: 'Performs a sweeping attack with your spear.',\n        effects: ['Damage: {damage}'],\n        isPassive: false,\n        jobTier: 'secondJob',\n        baseDamage: 400,\n        factorIndex: 21,\n        scalesWithLevel: true\n    },\n\n    EVIL_EYE: {\n        key: 'evilEye',\n        name: \"Evil Eye\",\n        icon: 'media/skills/dark knight/Skill_Evil_Eye.png',\n        description: 'Summons an Evil Eye that increases damage taken by enemies.',\n        effects: ['Damage Taken Increase: {damageTakenIncrease}'],\n        isPassive: false,\n        jobTier: 'secondJob',\n        damageTakenIncrease: { base: 150, factorIndex: 21, scalesWithLevel: true  }\n    },\n\n    EVIL_EYE_SHOCK: {\n        key: 'evilEyeShock',\n        name: \"Evil Eye Shock\",\n        icon: 'media/skills/dark knight/Skill_Evil_Eye_Shock.png',\n        description: 'The Evil Eye releases a shock attack.',\n        effects: ['Damage: {damage}'],\n        isPassive: false,\n        jobTier: 'secondJob',\n        baseDamage: 700,\n        factorIndex: 12,\n        scalesWithLevel: true\n    },\n\n    HYPER_BODY: {\n        key: 'hyperBody',\n        name: \"Hyper Body\",\n        icon: 'media/skills/dark knight/Skill_Hyper_Body.png',\n        description: 'Increases your attack and defense temporarily.',\n        effects: ['Attack Bonus: {attackBonus}', 'Defense Bonus: {defenseBonus}'],\n        isPassive: false,\n        jobTier: 'secondJob',\n        attackBonus: { base: 120, factorIndex: 21, scalesWithLevel: true },\n        defenseBonus: { base: 150, factorIndex: 21, scalesWithLevel: true  }\n    },\n\n    // 2nd Job Passive Skills\n    WEAPON_ACCELERATION: {\n        key: 'weaponAcceleration',\n        name: \"Weapon Acceleration\",\n        icon: 'media/skills/dark knight/Skill_Weapon_Acceleration_(Dark_Knight).png',\n        description: 'Increases your attack speed.',\n        effects: ['Attack Speed: {attackSpeed}'],\n        isPassive: true,\n        jobTier: 'secondJob',\n        attackSpeed: { base: 50, factorIndex: 22 , scalesWithLevel: true }\n    },\n\n    IRON_WALL: {\n        key: 'ironWall',\n        name: \"Iron Wall\",\n        icon: 'media/skills/dark knight/Skill_Iron_Wall.png',\n        description: 'Converts a portion of your Defense into STR.',\n        effects: ['STR from Defense: {strFromDefense}'],\n        isPassive: true,\n        jobTier: 'secondJob',\n        strFromDefense: { base: 100, factorIndex: 22, scalesWithLevel: true  }\n    },\n\n    WEAPON_MASTERY: {\n        key: 'weaponMastery',\n        name: \"Weapon Mastery\",\n        icon: 'media/skills/dark knight/Skill_Weapon_Mastery_(Dark_Knight).png',\n        description: 'Increases your minimum damage ratio.',\n        effects: ['Min Damage Ratio: {minDamageRatio}'],\n        isPassive: true,\n        jobTier: 'secondJob',\n        minDamageRatio: { base: 150, factorIndex: 22, scalesWithLevel: true  }\n    },\n\n    FINAL_ATTACK: {\n        key: 'finalAttack',\n        name: \"Final Attack\",\n        icon: 'media/skills/dark knight/Skill_Final_Attack.png',\n        description: 'Has a chance to trigger an additional attack.',\n        effects: ['Damage: {damage}', 'Trigger Chance: 25%'],\n        isPassive: true,\n        jobTier: 'secondJob',\n        baseDamage: 350,\n        factorIndex: 21,\n        scalesWithLevel: true,\n        triggerChance: 25\n    },\n\n    // 3rd Job Skills\n    LA_MANCHA_SPEAR: {\n        key: 'laManchaSpear',\n        name: \"La Mancha Spear\",\n        icon: 'media/skills/dark knight/Skill_La_Mancha_Spear.png',\n        description: 'Your primary 3rd job attack skill.',\n        effects: ['Damage: {damage}'],\n        isPassive: false,\n        jobTier: 'thirdJob',\n        baseDamage: 800,\n        factorIndex: 21,\n        scalesWithLevel: true\n    },\n\n    EVIL_EYE_OF_DOMINANT: {\n        key: 'evilEyeOfDominant',\n        name: \"Evil Eye of Dominant\",\n        icon: 'media/skills/dark knight/Skill_Evil_Eye_of_Dominant.png',\n        description: 'Enhanced Evil Eye attack.',\n        effects: ['Damage: {damage}'],\n        isPassive: false,\n        jobTier: 'thirdJob',\n        baseDamage: 600,\n        factorIndex: 21,\n        scalesWithLevel: true\n    },\n\n    RUSH: {\n        key: 'rush',\n        name: \"Rush\",\n        icon: 'media/skills/dark knight/Skill_Rush_(Dark_Knight).png',\n        description: 'Rush forward and attack enemies.',\n        effects: ['Damage: {damage}'],\n        isPassive: false,\n        jobTier: 'thirdJob',\n        baseDamage: 6000,\n        factorIndex: 12,\n        scalesWithLevel: true\n    },\n\n    CROSS_OVER_CHAINS: {\n        key: 'crossOverChains',\n        name: \"Cross Over Chains\",\n        icon: 'media/skills/dark knight/Skill_Cross_Over_Chains.png',\n        description: 'Increases attack and toughness.',\n        effects: ['Attack Bonus: {attackBonus}', 'Toughness Bonus: {toughnessBonus}'],\n        isPassive: false,\n        jobTier: 'thirdJob',\n        attackBonus: { base: 150, factorIndex: 21, scalesWithLevel: true },\n        toughnessBonus: { base: 100, factorIndex: 21, scalesWithLevel: true  }\n    },\n\n    EVIL_EYE_SHOCK_ENHANCEMENT: {\n        key: 'evilEyeShockEnhancement',\n        name: \"Evil Eye Shock Enhancement\",\n        icon: 'media/skills/dark knight/Skill_Evil_Eye_Shock_Enhancement.png',\n        description: 'Significantly enhances Evil Eye Shock damage.',\n        effects: ['Damage: {damage}'],\n        isPassive: false,\n        jobTier: 'thirdJob',\n        baseDamage: 1075,\n        factorIndex: 22,\n        scalesWithLevel: true\n    },\n\n    HEX_OF_THE_EVIL_EYE: {\n        key: 'hexOfTheEvilEye',\n        name: \"Hex of the Evil Eye\",\n        icon: 'media/skills/dark knight/Skill_Hex_of_the_Evil_Eye.png',\n        description: 'Evil Eye places a hex that increases attack.',\n        effects: ['Attack Bonus: {attackBonus}'],\n        isPassive: false,\n        jobTier: 'thirdJob',\n        attackBonus: { base: 150, factorIndex: 22, scalesWithLevel: true }\n    },\n\n    LORD_OF_DARKNESS: {\n        key: 'lordOfDarkness',\n        name: \"Lord of Darkness\",\n        icon: 'media/skills/dark knight/Skill_Lord_of_Darkness.png',\n        description: 'Passive skill that enhances HP recovery and critical stats.',\n        effects: ['HP Recovery: {hpRecovery}', 'Critical Rate: {criticalRate}', 'Critical Damage: {criticalDamage}'],\n        isPassive: true,\n        jobTier: 'thirdJob',\n        hpRecovery: { base: 15, factorIndex: 22, scalesWithLevel: false },\n        criticalRate: { base: 80, factorIndex: 22, scalesWithLevel: true },\n        criticalDamage: { base: 300, factorIndex: 22, scalesWithLevel: true }\n    },\n\n    ENDURE: {\n        key: 'endure',\n        name: \"Endure\",\n        icon: 'media/skills/dark knight/Skill_Endure.png',\n        description: 'Increases Debuff Tolerance.',\n        effects: ['Debuff Tolerance: {debuffTolerance}'],\n        isPassive: true,\n        jobTier: 'thirdJob',\n        debuffTolerance: { base: 15, factorIndex: 22, scalesWithLevel: true, isFlat: true }\n    }\n};\n\n/**\n * Calculate skill effect value based on level\n * @param baseValue - Base value from skill data\n * @param factorIndex - Factor table index (12, 21, or 22)\n * @param level - Character level\n * @param scalesWithLevel - Whether the skill scales with level (default: true)\n * @param isFlat - Whether the value is a flat number (not a percentage) (default: false)\n * @returns Calculated value\n */\nfunction calculateSkillValue(baseValue: number, factorIndex: number, level: number, scalesWithLevel: boolean = true, isFlat: boolean = false): number {\n    if (!scalesWithLevel) {\n        return isFlat ? baseValue : baseValue / 10; // Convert to percentage unless it's a flat value\n    }\n\n    const factor = getFactorForLevel(level, factorIndex);\n    const base = isFlat ? baseValue : baseValue / 10;\n    const multiplier = factor / 1000;\n\n    return base * multiplier;\n}\n\n// ============================================================================\n// 2ND JOB DARK KNIGHT SKILLS\n// ============================================================================\n\n/**\n * Calculate Spear Sweep damage\n * @param level - Character level\n * @returns Damage percentage\n */\nexport function calculateSpearSweep(level: number): number {\n    const config = DARK_KNIGHT_SKILLS.SPEAR_SWEEP;\n    return calculateSkillValue(config.baseDamage, config.factorIndex, level);\n}\n\n/**\n * Calculate Evil Eye damage taken increase\n * @param level - Character level\n * @returns Damage taken increase percentage\n */\nexport function calculateEvilEye(level: number): number {\n    const config = DARK_KNIGHT_SKILLS.EVIL_EYE.damageTakenIncrease;\n    return calculateSkillValue(config.base, config.factorIndex, level);\n}\n\n/**\n * Calculate Evil Eye Shock damage\n * @param level - Character level\n * @returns Damage percentage\n */\nexport function calculateEvilEyeShock(level: number): number {\n    const config = DARK_KNIGHT_SKILLS.EVIL_EYE_SHOCK;\n    return calculateSkillValue(config.baseDamage!, config.factorIndex!, level);\n}\n\n/**\n * Calculate Hyper Body bonuses\n * @param level - Character level\n * @returns Attack and Defense bonuses\n */\nexport function calculateHyperBody(level: number): HyperBodyResult {\n    const config = DARK_KNIGHT_SKILLS.HYPER_BODY;\n    return {\n        attackBonus: calculateSkillValue(config.attackBonus!.base, config.attackBonus!.factorIndex, level),\n        defenseBonus: calculateSkillValue(config.defenseBonus!.base, config.defenseBonus!.factorIndex, level)\n    };\n}\n\n/**\n * Calculate Weapon Acceleration attack speed bonus\n * @param level - Character level\n * @returns Attack speed percentage\n */\nexport function calculateWeaponAcceleration(level: number): number {\n    const config = DARK_KNIGHT_SKILLS.WEAPON_ACCELERATION.attackSpeed!;\n    return calculateSkillValue(config.base, config.factorIndex, level);\n}\n\n/**\n * Calculate Iron Wall STR bonus from Defense\n * @param level - Character level\n * @returns Percentage of Defense converted to STR\n */\nexport function calculateIronWall(level: number): number {\n    const config = DARK_KNIGHT_SKILLS.IRON_WALL.strFromDefense!;\n    return calculateSkillValue(config.base, config.factorIndex, level);\n}\n\n/**\n * Calculate Weapon Mastery min damage ratio bonus\n * @param level - Character level\n * @returns Min damage ratio percentage\n */\nexport function calculateWeaponMastery(level: number): number {\n    const config = DARK_KNIGHT_SKILLS.WEAPON_MASTERY.minDamageRatio!;\n    return calculateSkillValue(config.base, config.factorIndex, level);\n}\n\n/**\n * Calculate Final Attack damage\n * @param level - Character level\n * @returns Damage percentage\n */\nexport function calculateFinalAttack(level: number): number {\n    const config = DARK_KNIGHT_SKILLS.FINAL_ATTACK;\n    return calculateSkillValue(config.baseDamage!, config.factorIndex!, level, config.scalesWithLevel!);\n}\n\n// ============================================================================\n// 3RD JOB DARK KNIGHT SKILLS\n// ============================================================================\n\n/**\n * Calculate Dark Knight La Mancha Spear damage\n * @param level - Character level\n * @returns Damage percentage\n */\nexport function calculateLaManchaSpear(level: number): number {\n    const config = DARK_KNIGHT_SKILLS.LA_MANCHA_SPEAR;\n    return calculateSkillValue(config.baseDamage!, config.factorIndex!, level, config.scalesWithLevel!);\n}\n\n/**\n * Calculate Evil Eye of Dominant damage\n * @param level - Character level\n * @returns Damage percentage\n */\nexport function calculateEvilEyeOfDominant(level: number): number {\n    const config = DARK_KNIGHT_SKILLS.EVIL_EYE_OF_DOMINANT;\n    return calculateSkillValue(config.baseDamage!, config.factorIndex!, level, config.scalesWithLevel!);\n}\n\n/**\n * Calculate Dark Knight Rush damage\n * @param level - Character level\n * @returns Damage percentage\n */\nexport function calculateRush(level: number): number {\n    const config = DARK_KNIGHT_SKILLS.RUSH;\n    return calculateSkillValue(config.baseDamage!, config.factorIndex!, level, config.scalesWithLevel!);\n}\n\n/**\n * Calculate Cross Over Chains attack bonus\n * @param level - Character level\n * @returns Attack bonus percentage\n */\nexport function calculateCrossOverChainsAttack(level: number): number {\n    const config = DARK_KNIGHT_SKILLS.CROSS_OVER_CHAINS.attackBonus!;\n    return calculateSkillValue(config.base, config.factorIndex, level);\n}\n\n/**\n * Calculate Cross Over Chains toughness bonus\n * @param level - Character level\n * @returns Toughness bonus percentage\n */\nexport function calculateCrossOverChainsToughness(level: number): number {\n    const config = DARK_KNIGHT_SKILLS.CROSS_OVER_CHAINS.toughnessBonus!;\n    return calculateSkillValue(config.base, config.factorIndex, level);\n}\n\n/**\n * Calculate Evil Eye Shock Enhancement damage\n * @param level - Character level\n * @returns Damage percentage\n */\nexport function calculateEvilEyeShockEnhancement(level: number): number {\n    const config = DARK_KNIGHT_SKILLS.EVIL_EYE_SHOCK_ENHANCEMENT;\n    return calculateSkillValue(config.baseDamage!, config.factorIndex!, level, config.scalesWithLevel!);\n}\n\n/**\n * Calculate Hex of the Evil Eye attack bonus\n * @param level - Character level\n * @returns Attack bonus percentage\n */\nexport function calculateHexOfTheEvilEye(level: number): number {\n    const config = DARK_KNIGHT_SKILLS.HEX_OF_THE_EVIL_EYE.attackBonus!;\n    return calculateSkillValue(config.base, config.factorIndex, level);\n}\n\n/**\n * Calculate Lord of Darkness effects\n * @param level - Character level\n * @returns Object with HP recovery, crit rate, and crit damage\n */\nexport function calculateLordOfDarkness(level: number): LordOfDarknessResult {\n    const config = DARK_KNIGHT_SKILLS.LORD_OF_DARKNESS;\n\n    return {\n        hpRecovery: calculateSkillValue(\n            config.hpRecovery!.base,\n            config.hpRecovery!.factorIndex,\n            level,\n            config.hpRecovery!.scalesWithLevel\n        ),\n        criticalRate: calculateSkillValue(\n            config.criticalRate!.base,\n            config.criticalRate!.factorIndex,\n            level\n        ),\n        criticalDamage: calculateSkillValue(\n            config.criticalDamage!.base,\n            config.criticalDamage!.factorIndex,\n            level\n        )\n    };\n}\n\n/**\n * Calculate Endure debuff tolerance\n * @param level - Character level\n * @returns Debuff tolerance\n */\nexport function calculateEndure(level: number): number {\n    const config = DARK_KNIGHT_SKILLS.ENDURE.debuffTolerance!;\n    return calculateSkillValue(config.base, config.factorIndex, level, config.scalesWithLevel, config.isFlat!);\n}\n\n/**\n * Get all Dark Knight skill values at a specific level\n * @param level - Character level\n * @returns All Dark Knight skill values\n */\nexport function getAllDarkKnightSkills(level: number): AllDarkKnightSkills {\n    const lordOfDarkness = calculateLordOfDarkness(level);\n    const hyperBody = calculateHyperBody(level);\n\n    return {\n        level,\n        secondJobSkills: {\n            spearSweep: {\n                name: \"Spear Sweep\",\n                damage: calculateSpearSweep(level).toFixed(2) + \"%\"\n            },\n            evilEye: {\n                name: \"Evil Eye\",\n                damageTakenIncrease: calculateEvilEye(level).toFixed(2) + \"%\"\n            },\n            evilEyeShock: {\n                name: \"Evil Eye Shock\",\n                damage: calculateEvilEyeShock(level).toFixed(2) + \"%\"\n            },\n            hyperBody: {\n                name: \"Hyper Body\",\n                attackBonus: hyperBody.attackBonus.toFixed(2) + \"%\",\n                defenseBonus: hyperBody.defenseBonus.toFixed(2) + \"%\"\n            },\n            weaponAcceleration: {\n                name: \"Weapon Acceleration\",\n                attackSpeed: calculateWeaponAcceleration(level).toFixed(2) + \"%\"\n            },\n            ironWall: {\n                name: \"Iron Wall\",\n                strFromDefense: calculateIronWall(level).toFixed(2) + \"%\"\n            },\n            weaponMastery: {\n                name: \"Weapon Mastery\",\n                minDamageRatio: calculateWeaponMastery(level).toFixed(2) + \"%\"\n            },\n            finalAttack: {\n                name: \"Final Attack\",\n                damage: calculateFinalAttack(level).toFixed(2) + \"%\",\n                triggerChance: \"25%\"\n            }\n        },\n        thirdJobSkills: {\n            laManchaSpear: {\n                name: \"La Mancha Spear\",\n                damage: calculateLaManchaSpear(level).toFixed(2) + \"%\"\n            },\n            evilEyeOfDominant: {\n                name: \"Evil Eye of Dominant\",\n                damage: calculateEvilEyeOfDominant(level).toFixed(2) + \"%\"\n            },\n            rush: {\n                name: \"Rush\",\n                damage: calculateRush(level).toFixed(2) + \"%\"\n            },\n            crossOverChains: {\n                name: \"Cross Over Chains\",\n                attackBonus: calculateCrossOverChainsAttack(level).toFixed(2) + \"%\",\n                toughnessBonus: calculateCrossOverChainsToughness(level).toFixed(2) + \"%\"\n            },\n            evilEyeShockEnhancement: {\n                name: \"Evil Eye Shock Enhancement\",\n                damage: calculateEvilEyeShockEnhancement(level).toFixed(2) + \"%\"\n            },\n            hexOfTheEvilEye: {\n                name: \"Hex of the Evil Eye\",\n                attackBonus: calculateHexOfTheEvilEye(level).toFixed(2) + \"%\"\n            },\n            lordOfDarkness: {\n                name: \"Lord of Darkness\",\n                hpRecovery: lordOfDarkness.hpRecovery.toFixed(2) + \"%\",\n                criticalRate: lordOfDarkness.criticalRate.toFixed(2) + \"%\",\n                criticalDamage: lordOfDarkness.criticalDamage.toFixed(2) + \"%\"\n            },\n            endure: {\n                name: \"Endure\",\n                debuffTolerance: calculateEndure(level).toFixed(0)\n            }\n        }\n    };\n}\n\n// ============================================================================\n// JOB SKILL PASSIVE GAINS FOR DPS CALCULATION\n// ============================================================================\n\n/**\n * Get DPS-relevant passives from generated class skills by job tier\n * Works with the new format from all-class-skills.js\n * @param classSkills - The skill data object for a class (e.g., HERO_SKILLS)\n * @param jobTier - Numeric job tier (1, 2, 3, or 4)\n * @returns Array of passive skill objects with DPS-relevant effects\n */\nfunction getPassivesByTier(classSkills: ClassSkills, jobTier: JobTier): Array<{ skillKey: string; name: string; skillData: GeneratedSkillData }> {\n    const passives: Array<{ skillKey: string; name: string; skillData: GeneratedSkillData }> = [];\n\n    for (const [skillKey, skillData] of Object.entries(classSkills)) {\n        // Only include skills from the specified job tier that are DPS relevant\n        if (skillData.jobStep === jobTier && !skillData.isComplex) {\n            passives.push({\n                skillKey,\n                name: skillData.name,\n                skillData\n            });\n        }\n    }\n\n    return passives;\n}\n\n/**\n * Get DPS-relevant complex passives from generated class skills by job tier\n * @param classSkills - The skill data object for a class (e.g., HERO_SKILLS)\n * @param jobTier - Numeric job tier (1, 2, 3, or 4)\n * @returns Array of complex passive skill objects\n */\nfunction getComplexPassivesByTier(classSkills: ClassSkills, jobTier: JobTier): Array<{ skillKey: string; name: string; skillData: GeneratedSkillData }> {\n    const passives: Array<{ skillKey: string; name: string; skillData: GeneratedSkillData }> = [];\n\n    for (const [skillKey, skillData] of Object.entries(classSkills)) {\n        // Only include complex skills from the specified job tier\n        if (skillData.jobStep === jobTier && skillData.isComplex) {\n            passives.push({\n                skillKey,\n                name: skillData.name,\n                skillData\n            });\n        }\n    }\n\n    return passives;\n}\n\n/**\n * Calculate passive stat gains from job skill level bonuses\n * @param className - Class name (e.g., 'dark-knight')\n * @param characterLevel - Current character level\n * @param skillLevelBonuses - Object with jobTier keys and skill level bonus values\n *   Example: { firstJob: 0, secondJob: 1, thirdJob: 2, fourthJob: 0, allSkills: 1 }\n * @param currentStats - Current character stats (needed for Iron Wall defense \u2192 STR conversion)\n * @returns Object with stat changes and breakdown\n *   Example: {\n *     statChanges: { attackSpeed: 6.5, minDamage: 19.5, critRate: 10.4, critDamage: 39 },\n *     breakdown: [{ passive: \"Weapon Acceleration\", stat: \"attackSpeed\", gain: 6.5 }],\n *     complexPassives: [{ passive: \"Final Attack\", note: \"25% chance to proc 45.5% damage\" }]\n *   }\n */\nexport function calculateJobSkillPassiveGains(\n    className: string,\n    characterLevel: number,\n    skillLevelBonuses: SkillLevelBonuses,\n    baseStats: BaseStats\n): JobSkillPassiveGainsResult {\n    // Get the class skills data\n    const classSkills = CLASS_TO_SKILLS_MAP[className];\n\n    if (!classSkills) {\n        return {\n            statChanges: {},\n            breakdown: [],\n            complexPassives: [],\n            complexStatChanges: {}\n        };\n    }\n\n    const statChanges: Record<string, number> = {};\n    const breakdown: PassiveBreakdown[] = [];\n    const complexPassives: ComplexPassive[] = [];\n    const complexStatChanges: Record<string, number> = {};\n    complexStatChanges['finalAttack'] = 0;\n\n    const jobTiers: JobTier[] = [1, 2, 3, 4];\n    const jobTierNames: JobTierString[] = ['firstJob', 'secondJob', 'thirdJob', 'fourthJob'];\n    const allSkillsBonus = skillLevelBonuses.allSkills || 0;\n\n    for (let i = 0; i < jobTiers.length; i++) {\n        const tierNumber = jobTiers[i];\n        const tierName = jobTierNames[i];\n        const tierBonus = (skillLevelBonuses[tierName] || 0) + allSkillsBonus;\n\n        // Get regular passives for this tier\n        const passives = getPassivesByTier(classSkills, tierNumber as JobTier);\n\n        for (const { name, skillData } of passives) {\n            // Calculate input levels for factor table lookup using shared helper\n            const baseInputLevel = calculateSkillInputLevel(characterLevel, tierNumber as JobTier, 0);\n            const bonusInputLevel = calculateSkillInputLevel(characterLevel, tierNumber as JobTier, tierBonus);\n\n            // Process each effect in the skill's effects array\n            for (const effect of skillData.effects) {\n                // The 'type' field is \"flat\" or \"percent\"\n                const isFlat = effect.type === 'flat';\n\n                // Calculate the stat value at base input level\n                const baseValue = calculateSkillValue(\n                    effect.baseValue,\n                    effect.factorIndex,\n                    baseInputLevel,\n                    true,  // scalesWithLevel - always true for passives\n                    isFlat\n                );\n\n                // Calculate the stat value at bonus input level\n                const bonusValue = calculateSkillValue(\n                    effect.baseValue,\n                    effect.factorIndex,\n                    bonusInputLevel,\n                    true,  // scalesWithLevel - always true for passives\n                    isFlat\n                );\n\n                const statGain = bonusValue - baseValue;\n                const calculatorStat = effect.stat;\n\n                // Special handling for defense stat (converts to mainStat for Dark Knight)\n                if (calculatorStat === 'defense') {\n                    // Calculate the actual defense increase (as a flat number)\n                    const defenseValue = statGain; // This is the defense % value from the skill\n                    const mainStatIncrease = (baseStats.DEFENSE || 0) * (defenseValue / 100);\n\n                    // Use StatCalculationService to apply defense core\n                    // The circular dependency is avoided by using calculateFinalAttackBonusFromJobSkills\n                    // which doesn't create a StatCalculationService\n                    // Pass 0 for weaponAttackBonus to avoid double-application (bonus will be applied later)\n                    const statService = new StatCalculationService(baseStats, 0);\n                    const beforeStats = statService.getStats();\n\n                    // Add the defense - for Dark Knight this will convert to main stat, attack, and stat damage\n                    statService.add(STAT.PRIMARY_MAIN_STAT.id, mainStatIncrease);\n                    const afterStats = statService.getStats();\n\n                    // Calculate the gains by comparing before and after\n                    const mainStatGain = afterStats.PRIMARY_MAIN_STAT - beforeStats.PRIMARY_MAIN_STAT;\n                    const statDamageGain = afterStats.STAT_DAMAGE - beforeStats.STAT_DAMAGE;\n                    const attackGain = afterStats.ATTACK - beforeStats.ATTACK;\n\n                    // Add gains to statChanges\n                    if (!statChanges['mainStat']) statChanges['mainStat'] = 0;\n                    statChanges['mainStat'] += mainStatGain;\n                    if (!statChanges['statDamage']) statChanges['statDamage'] = 0;\n                    statChanges['statDamage'] += statDamageGain;\n                    if (!statChanges['attack']) statChanges['attack'] = 0;\n                    statChanges['attack'] += attackGain;\n\n                    breakdown.push({\n                        passive: name,\n                        stat: 'defense',\n                        statDisplay: 'Defense',\n                        baseValue: baseValue,\n                        bonusValue: bonusValue,\n                        gain: statGain,\n                        isPercent: true,\n                        note: `+${statGain.toFixed(2)} DEF% \u2192 +${mainStatGain.toFixed(0)} Main Stat, +${statDamageGain.toFixed(2)}% Stat Damage, +${attackGain.toFixed(0)} ATK`\n                    });\n                } else {\n                    // Standard stat gain\n                    if (!statChanges[calculatorStat]) statChanges[calculatorStat] = 0;\n                    statChanges[calculatorStat] += statGain;\n\n                    // Determine if this stat should display with % sign\n                    const isPercent = ['attackSpeed', 'minDamage', 'maxDamage', 'critRate', 'critDamage', 'statDamage', 'finalDamage', 'damage', 'bossDamage', 'normalDamage', 'skillDamage', 'damageAmp', 'basicAttackDamage'].includes(calculatorStat);\n\n                    breakdown.push({\n                        passive: name,\n                        stat: calculatorStat,\n                        baseValue: baseValue,\n                        bonusValue: bonusValue,\n                        gain: statGain,\n                        isPercent: isPercent\n                    });\n                }\n            }\n        }\n\n        // Get complex passives for this tier (these have notes/conditions and are shown separately)\n        const complexPassivesForTier = getComplexPassivesByTier(classSkills, tierNumber as JobTier);\n\n        for (const { name, skillData } of complexPassivesForTier) {\n            const baseInputLevel = calculateSkillInputLevel(characterLevel, tierNumber as JobTier, 0);\n            const bonusInputLevel = calculateSkillInputLevel(characterLevel, tierNumber as JobTier, tierBonus);\n\n            // Complex passives are just shown with their note\n            // If they have effects, we calculate the difference to show the gain\n            if (skillData.effects && skillData.effects.length > 0) {\n                for (const effect of skillData.effects) {\n                    const isFlat = effect.type === 'flat';\n\n                    const baseValue = calculateSkillValue(\n                        effect.baseValue,\n                        effect.factorIndex,\n                        baseInputLevel,\n                        true,\n                        isFlat\n                    );\n\n                    const bonusValue = calculateSkillValue(\n                        effect.baseValue,\n                        effect.factorIndex,\n                        bonusInputLevel,\n                        true,\n                        isFlat\n                    );\n\n                    const gain = bonusValue - baseValue;\n                    const calculatorStat = effect.stat;\n\n                    if (calculatorStat.toLowerCase() === 'finalattack')\n                    {\n                        complexStatChanges['finalAttack'] += bonusValue;\n                    }\n\n                    complexPassives.push({\n                        passive: name,\n                        stat: calculatorStat,\n                        baseValue: baseValue,\n                        bonusValue: bonusValue,\n                        gain: gain,\n                        isPercent: !isFlat,\n                        note: skillData.note || ''\n                    });\n                }\n            } else {\n                // Just show the note for complex passives with no effects\n                complexPassives.push({\n                    passive: name,\n                    note: skillData.note || 'Complex passive'\n                });\n            }\n        }\n    }\n\n    return {\n        statChanges,\n        breakdown,\n        complexPassives,\n        complexStatChanges\n    };\n}\n\n/**\n * Calculate final attack bonus from job skills without creating a StatCalculationService\n * This directly calculates the Final Attack skill value to avoid circular dependencies\n * @param className - Class name\n * @param characterLevel - Character level\n * @param skillLevels - Skill level bonuses\n * @returns Final attack bonus multiplier (e.g., 1.45 for 45% bonus)\n */\nexport function calculateFinalAttackBonusFromJobSkills(\n    className: string | null,\n    characterLevel: number,\n    skillLevels: {\n        firstJob?: number;\n        secondJob?: number;\n        thirdJob?: number;\n        fourthJob?: number;\n        allSkills?: number;\n    }\n): number {\n    if (!className) return 1;\n\n    const classSkills = CLASS_TO_SKILLS_MAP[className];\n    if (!classSkills) return 1;\n\n    let finalAttackBonus = 0;\n\n    // Check all job tiers for Final Attack skills\n    const jobTiers: JobTier[] = [1, 2, 3, 4];\n    const jobTierNames: JobTierString[] = ['firstJob', 'secondJob', 'thirdJob', 'fourthJob'];\n    const allSkillsBonus = skillLevels.allSkills || 0;\n\n    for (let i = 0; i < jobTiers.length; i++) {\n        const tierNumber = jobTiers[i];\n        const tierName = jobTierNames[i];\n        const tierBonus = (skillLevels[tierName] || 0) + allSkillsBonus;\n\n        // Get complex passives for this tier (Final Attack is a complex passive)\n        for (const [skillKey, skillData] of Object.entries(classSkills)) {\n            if (skillData.jobStep === tierNumber && skillData.isComplex) {\n                // Check if this is a Final Attack skill (by checking effect stat)\n                const hasFinalAttack = skillData.effects?.some(\n                    effect => effect.stat.toLowerCase() === 'finalattack'\n                );\n\n                if (hasFinalAttack && skillData.effects) {\n                    const effect = skillData.effects[0]; // Final Attack skills have one effect\n                    const bonusInputLevel = calculateSkillInputLevel(characterLevel, tierNumber, tierBonus);\n\n                    const bonusValue = calculateSkillValue(\n                        effect.baseValue,\n                        effect.factorIndex,\n                        bonusInputLevel,\n                        true,\n                        effect.type === 'flat'\n                    );\n\n                    finalAttackBonus += bonusValue;\n                }\n            }\n        }\n    }\n\n    if (finalAttackBonus !== 0) {\n        return (1 + finalAttackBonus / 100);\n    }\n\n    return 1;\n}\n"],
  "mappings": "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",
  "names": []
}
