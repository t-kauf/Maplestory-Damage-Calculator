{
  "version": 3,
  "sources": ["artifact-potential-ui.ts"],
  "sourcesContent": ["/**\r\n * Artifact Potential UI - HTML Generation and Rendering\r\n * This file handles all HTML generation and rendering for the artifact potential tab\r\n */\r\n\r\nimport { calculateArtifactPotentialRankings, getArtifactSortAsc, getArtifactSortColumn } from './artifact-potential.js';\r\nimport { formatNumber } from '@ts/utils/formatters.js';\r\nimport type { ArtifactRankingResult } from '@ts/types/page/artifact-potential/artifact-potential.types.js';\r\nimport { loadoutStore } from '@ts/store/loadout.store.js';\r\nimport { debounce } from '@ts/utils/event-emitter.js';\r\n\r\n// ============================================================================\r\n// HTML GENERATION\r\n// ============================================================================\r\n\r\n/**\r\n * Generate HTML for a single ranking row\r\n */\r\nfunction generateRankingRowHTML(result: ArtifactRankingResult, index: number): string {\r\n    const rarityLetter = result.rarity.charAt(0).toUpperCase();\r\n    const rarityClass = `rarity-${result.rarity.toLowerCase()}`;\r\n    const badge = `<span class=\"badge badge--rarity ${rarityClass}\">${rarityLetter}</span>`;\r\n\r\n    // Rank badge with special styling for top 3\r\n    let rankBadge: string;\r\n    if (index < 3) {\r\n        rankBadge = `<span class=\"badge badge--rank-${index + 1}\">${index + 1}</span>`;\r\n    } else {\r\n        rankBadge = `<span class=\"badge\">${index + 1}</span>`;\r\n    }\r\n\r\n    const bossPercentHTML = result.bossDPSPercentChange !== 0\r\n        ? ` <span style=\"color:#10b981; font-weight:600;\">(+${result.bossDPSPercentChange.toFixed(2)}%)</span>`\r\n        : '';\r\n\r\n    const normalPercentHTML = result.normalDPSPercentChange !== 0\r\n        ? ` <span style=\"color:#10b981; font-weight:600;\">(+${result.normalDPSPercentChange.toFixed(2)}%)</span>`\r\n        : '';\r\n\r\n    const avgPercentHTML = result.avgDPSPercentChange !== 0\r\n        ? ` <span style=\"color:#10b981; font-weight:600;\">(+${result.avgDPSPercentChange.toFixed(2)}%)</span>`\r\n        : '';\r\n\r\n    return `\r\n        <tr>\r\n            <td>${rankBadge}</td>\r\n            <td>${badge}${result.stat}</td>\r\n            <td>${result.value}</td>\r\n            <td>+${formatNumber(result.bossDPSGain)}${bossPercentHTML}</td>\r\n            <td>+${formatNumber(result.normalDPSGain)}${normalPercentHTML}</td>\r\n            <td><strong>+${formatNumber(result.avgDPSGain)}</strong>${avgPercentHTML}</td>\r\n        </tr>\r\n    `;\r\n}\r\n\r\n/**\r\n * Generate HTML for the artifact potential rankings table\r\n */\r\nfunction generateRankingsTableHTML(results: ArtifactRankingResult[]): string {\r\n    let html = '<h3 class=\"title\">All Possible Rolls Ranked</h3>';\r\n    html += '<div class=\"table-scrollable\"><div class=\"artifact-table-container\">';\r\n    html += '<table class=\"table\"><thead><tr>';\r\n    html += '<th>Rank</th>';\r\n    html += '<th>Rarity & Stat</th>';\r\n    html += '<th>Value</th>';\r\n    html += '<th class=\"sortable\" onclick=\"sortArtifactTable(3)\">Boss DPS Gain</th>';\r\n    html += '<th class=\"sortable\" onclick=\"sortArtifactTable(4)\">Normal DPS Gain</th>';\r\n    html += '<th class=\"sortable\" onclick=\"sortArtifactTable(5)\">Avg DPS Gain</th>';\r\n    html += '</tr></thead><tbody>';\r\n\r\n    results.forEach((result, index) => {\r\n        html += generateRankingRowHTML(result, index);\r\n    });\r\n\r\n    html += '</tbody></table></div></div>';\r\n    return html;\r\n}\r\n\r\n/**\r\n * Sort results array based on current sort column and direction\r\n */\r\nfunction sortResults(results: ArtifactRankingResult[]): ArtifactRankingResult[] {\r\n    const column = getArtifactSortColumn();\r\n    const ascending = getArtifactSortAsc();\r\n\r\n    const sorted = [...results];\r\n    sorted.sort((a, b) => {\r\n        let valA: number;\r\n        let valB: number;\r\n        switch (column) {\r\n            case 3: // Boss DPS Gain\r\n                valA = a.bossDPSGain;\r\n                valB = b.bossDPSGain;\r\n                break;\r\n            case 4: // Normal DPS Gain\r\n                valA = a.normalDPSGain;\r\n                valB = b.normalDPSGain;\r\n                break;\r\n            case 5: // Avg DPS Gain\r\n                valA = a.avgDPSGain;\r\n                valB = b.avgDPSGain;\r\n                break;\r\n            default:\r\n                return 0;\r\n        }\r\n        return ascending ? valA - valB : valB - valA;\r\n    });\r\n\r\n    return sorted;\r\n}\r\n\r\n/**\r\n * Render the Artifact Potential rankings table\r\n */\r\nexport function renderArtifactPotential(): void {\r\n    const container = document.getElementById('artifact-potential-container');\r\n    if (!container) return;\r\n\r\n    const results = calculateArtifactPotentialRankings();\r\n\r\n    // Apply sorting based on current column and direction\r\n    const sortedResults = sortResults(results);\r\n\r\n    container.innerHTML = generateRankingsTableHTML(sortedResults);\r\n}\r\n\r\n/**\r\n * Initialize Artifact Potential Analysis\r\n */\r\nexport function initializeArtifactPotential(): void {\r\n    renderArtifactPotential();\r\n\r\n    loadoutStore.on('stat:changed', debounce((_) => {\r\n        renderArtifactPotential();\r\n    }, 3500));\r\n}\r\n"],
  "mappings": "AAKA,SAAS,oCAAoC,oBAAoB,6BAA6B;AAC9F,SAAS,oBAAoB;AAE7B,SAAS,oBAAoB;AAC7B,SAAS,gBAAgB;AASzB,SAAS,uBAAuB,QAA+B,OAAuB;AAClF,QAAM,eAAe,OAAO,OAAO,OAAO,CAAC,EAAE,YAAY;AACzD,QAAM,cAAc,UAAU,OAAO,OAAO,YAAY,CAAC;AACzD,QAAM,QAAQ,oCAAoC,WAAW,KAAK,YAAY;AAG9E,MAAI;AACJ,MAAI,QAAQ,GAAG;AACX,gBAAY,kCAAkC,QAAQ,CAAC,KAAK,QAAQ,CAAC;AAAA,EACzE,OAAO;AACH,gBAAY,uBAAuB,QAAQ,CAAC;AAAA,EAChD;AAEA,QAAM,kBAAkB,OAAO,yBAAyB,IAClD,oDAAoD,OAAO,qBAAqB,QAAQ,CAAC,CAAC,cAC1F;AAEN,QAAM,oBAAoB,OAAO,2BAA2B,IACtD,oDAAoD,OAAO,uBAAuB,QAAQ,CAAC,CAAC,cAC5F;AAEN,QAAM,iBAAiB,OAAO,wBAAwB,IAChD,oDAAoD,OAAO,oBAAoB,QAAQ,CAAC,CAAC,cACzF;AAEN,SAAO;AAAA;AAAA,kBAEO,SAAS;AAAA,kBACT,KAAK,GAAG,OAAO,IAAI;AAAA,kBACnB,OAAO,KAAK;AAAA,mBACX,aAAa,OAAO,WAAW,CAAC,GAAG,eAAe;AAAA,mBAClD,aAAa,OAAO,aAAa,CAAC,GAAG,iBAAiB;AAAA,2BAC9C,aAAa,OAAO,UAAU,CAAC,YAAY,cAAc;AAAA;AAAA;AAGpF;AAKA,SAAS,0BAA0B,SAA0C;AACzE,MAAI,OAAO;AACX,UAAQ;AACR,UAAQ;AACR,UAAQ;AACR,UAAQ;AACR,UAAQ;AACR,UAAQ;AACR,UAAQ;AACR,UAAQ;AACR,UAAQ;AAER,UAAQ,QAAQ,CAAC,QAAQ,UAAU;AAC/B,YAAQ,uBAAuB,QAAQ,KAAK;AAAA,EAChD,CAAC;AAED,UAAQ;AACR,SAAO;AACX;AAKA,SAAS,YAAY,SAA2D;AAC5E,QAAM,SAAS,sBAAsB;AACrC,QAAM,YAAY,mBAAmB;AAErC,QAAM,SAAS,CAAC,GAAG,OAAO;AAC1B,SAAO,KAAK,CAAC,GAAG,MAAM;AAClB,QAAI;AACJ,QAAI;AACJ,YAAQ,QAAQ;AAAA,MACZ,KAAK;AACD,eAAO,EAAE;AACT,eAAO,EAAE;AACT;AAAA,MACJ,KAAK;AACD,eAAO,EAAE;AACT,eAAO,EAAE;AACT;AAAA,MACJ,KAAK;AACD,eAAO,EAAE;AACT,eAAO,EAAE;AACT;AAAA,MACJ;AACI,eAAO;AAAA,IACf;AACA,WAAO,YAAY,OAAO,OAAO,OAAO;AAAA,EAC5C,CAAC;AAED,SAAO;AACX;AAKO,SAAS,0BAAgC;AAC5C,QAAM,YAAY,SAAS,eAAe,8BAA8B;AACxE,MAAI,CAAC,UAAW;AAEhB,QAAM,UAAU,mCAAmC;AAGnD,QAAM,gBAAgB,YAAY,OAAO;AAEzC,YAAU,YAAY,0BAA0B,aAAa;AACjE;AAKO,SAAS,8BAAoC;AAChD,0BAAwB;AAExB,eAAa,GAAG,gBAAgB,SAAS,CAAC,MAAM;AAC5C,4BAAwB;AAAA,EAC5B,GAAG,IAAI,CAAC;AACZ;",
  "names": []
}
