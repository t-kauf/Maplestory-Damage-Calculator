{
  "version": 3,
  "sources": ["artifact-potential-ui.ts"],
  "sourcesContent": ["/**\n * Artifact Potential UI - HTML Generation and Rendering\n * This file handles all HTML generation and rendering for the artifact potential tab\n */\n\nimport {\n    calculateArtifactPotentialRankings,\n    getArtifactSortAsc,\n    getArtifactSortColumn,\n    setArtifactSortColumn,\n    toggleArtifactSortAsc\n} from './artifact-potential.js';\nimport { formatNumber } from '@ts/utils/formatters.js';\nimport type { ArtifactRankingResult } from '@ts/types/page/artifact-potential/artifact-potential.types.js';\nimport { loadoutStore } from '@ts/store/loadout.store.js';\nimport { debounce } from '@ts/utils/event-emitter.js';\n\n// ============================================================================\n// HTML GENERATION\n// ============================================================================\n\n/**\n * Generate HTML for a single ranking row\n */\nfunction generateRankingRowHTML(result: ArtifactRankingResult, index: number): string {\n    const rarityLetter = result.rarity.charAt(0).toUpperCase();\n    const rarityClass = `rarity-${result.rarity.toLowerCase()}`;\n    const badge = `<span class=\"badge badge--rarity ${rarityClass}\">${rarityLetter}</span>`;\n\n    // Rank badge with special styling for top 3\n    let rankBadge: string;\n    if (index < 3) {\n        rankBadge = `<span class=\"badge badge--rank-${index + 1}\">${index + 1}</span>`;\n    } else {\n        rankBadge = `<span class=\"badge\">${index + 1}</span>`;\n    }\n\n    const bossPercentHTML = result.bossDPSPercentChange !== 0\n        ? ` <span style=\"color:#10b981; font-weight:600;\">(+${result.bossDPSPercentChange.toFixed(2)}%)</span>`\n        : '';\n\n    const normalPercentHTML = result.normalDPSPercentChange !== 0\n        ? ` <span style=\"color:#10b981; font-weight:600;\">(+${result.normalDPSPercentChange.toFixed(2)}%)</span>`\n        : '';\n\n    const avgPercentHTML = result.avgDPSPercentChange !== 0\n        ? ` <span style=\"color:#10b981; font-weight:600;\">(+${result.avgDPSPercentChange.toFixed(2)}%)</span>`\n        : '';\n\n    return `\n        <tr>\n            <td>${rankBadge}</td>\n            <td>${badge}${result.stat}</td>\n            <td>${result.value}</td>\n            <td>+${formatNumber(result.bossDPSGain)}${bossPercentHTML}</td>\n            <td>+${formatNumber(result.normalDPSGain)}${normalPercentHTML}</td>\n            <td><strong>+${formatNumber(result.avgDPSGain)}</strong>${avgPercentHTML}</td>\n        </tr>\n    `;\n}\n\n/**\n * Generate HTML for the artifact potential rankings table\n */\nfunction generateRankingsTableHTML(results: ArtifactRankingResult[]): string {\n    let html = '<h3 class=\"title\">All Possible Rolls Ranked</h3>';\n    html += '<div class=\"table-wrapper table-scrollable\"><div class=\"artifact-table-container\">';\n    html += '<table class=\"table\"><thead><tr>';\n    html += '<th>Rank</th>';\n    html += '<th>Rarity & Stat</th>';\n    html += '<th>Value</th>';\n    html += '<th class=\"sortable\" onclick=\"sortArtifactTable(3)\">Boss DPS Gain</th>';\n    html += '<th class=\"sortable\" onclick=\"sortArtifactTable(4)\">Normal DPS Gain</th>';\n    html += '<th class=\"sortable\" onclick=\"sortArtifactTable(5)\">Avg DPS Gain</th>';\n    html += '</tr></thead><tbody>';\n\n    results.forEach((result, index) => {\n        html += generateRankingRowHTML(result, index);\n    });\n\n    html += '</tbody></table></div></div>';\n    return html;\n}\n\n/**\n * Sort results array based on current sort column and direction\n */\nfunction sortResults(results: ArtifactRankingResult[]): ArtifactRankingResult[] {\n    const column = getArtifactSortColumn();\n    const ascending = getArtifactSortAsc();\n\n    const sorted = [...results];\n    sorted.sort((a, b) => {\n        let valA: number;\n        let valB: number;\n        switch (column) {\n            case 3: // Boss DPS Gain\n                valA = a.bossDPSGain;\n                valB = b.bossDPSGain;\n                break;\n            case 4: // Normal DPS Gain\n                valA = a.normalDPSGain;\n                valB = b.normalDPSGain;\n                break;\n            case 5: // Avg DPS Gain\n                valA = a.avgDPSGain;\n                valB = b.avgDPSGain;\n                break;\n            default:\n                return 0;\n        }\n        return ascending ? valA - valB : valB - valA;\n    });\n\n    return sorted;\n}\n\n/**\n * Render the Artifact Potential rankings table\n */\nexport function renderArtifactPotential(): void {\n    const container = document.getElementById('artifact-potential-container');\n    if (!container) return;\n\n    const results = calculateArtifactPotentialRankings();\n\n    // Apply sorting based on current column and direction\n    const sortedResults = sortResults(results);\n\n    container.innerHTML = generateRankingsTableHTML(sortedResults);\n}\n\n/**\n * Initialize Artifact Potential Analysis\n */\nexport function initializeArtifactPotential(): void {\n    renderArtifactPotential();\n\n    loadoutStore.on('stat:changed', debounce((_) => {\n        renderArtifactPotential();\n    }, 3500));\n}\n\n/**\n * Sort artifact potential table by column and re-render\n * @param column - Column index to sort by\n */\nexport function sortArtifactTable(column: number): void {\n    const currentColumn = getArtifactSortColumn();\n    if (currentColumn === column) {\n        toggleArtifactSortAsc();\n    } else {\n        setArtifactSortColumn(column);\n    }\n    renderArtifactPotential();\n}\n\n// ============================================================================\n// WINDOW EXPORTS\n// ============================================================================\n\n// Export sort function to window for HTML onclick attributes\nif (typeof window !== 'undefined') {\n    (window as any).sortArtifactTable = sortArtifactTable;\n}\n"],
  "mappings": "AAKA;AAAA,EACI;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACG;AACP,SAAS,oBAAoB;AAE7B,SAAS,oBAAoB;AAC7B,SAAS,gBAAgB;AASzB,SAAS,uBAAuB,QAA+B,OAAuB;AAClF,QAAM,eAAe,OAAO,OAAO,OAAO,CAAC,EAAE,YAAY;AACzD,QAAM,cAAc,UAAU,OAAO,OAAO,YAAY,CAAC;AACzD,QAAM,QAAQ,oCAAoC,WAAW,KAAK,YAAY;AAG9E,MAAI;AACJ,MAAI,QAAQ,GAAG;AACX,gBAAY,kCAAkC,QAAQ,CAAC,KAAK,QAAQ,CAAC;AAAA,EACzE,OAAO;AACH,gBAAY,uBAAuB,QAAQ,CAAC;AAAA,EAChD;AAEA,QAAM,kBAAkB,OAAO,yBAAyB,IAClD,oDAAoD,OAAO,qBAAqB,QAAQ,CAAC,CAAC,cAC1F;AAEN,QAAM,oBAAoB,OAAO,2BAA2B,IACtD,oDAAoD,OAAO,uBAAuB,QAAQ,CAAC,CAAC,cAC5F;AAEN,QAAM,iBAAiB,OAAO,wBAAwB,IAChD,oDAAoD,OAAO,oBAAoB,QAAQ,CAAC,CAAC,cACzF;AAEN,SAAO;AAAA;AAAA,kBAEO,SAAS;AAAA,kBACT,KAAK,GAAG,OAAO,IAAI;AAAA,kBACnB,OAAO,KAAK;AAAA,mBACX,aAAa,OAAO,WAAW,CAAC,GAAG,eAAe;AAAA,mBAClD,aAAa,OAAO,aAAa,CAAC,GAAG,iBAAiB;AAAA,2BAC9C,aAAa,OAAO,UAAU,CAAC,YAAY,cAAc;AAAA;AAAA;AAGpF;AAKA,SAAS,0BAA0B,SAA0C;AACzE,MAAI,OAAO;AACX,UAAQ;AACR,UAAQ;AACR,UAAQ;AACR,UAAQ;AACR,UAAQ;AACR,UAAQ;AACR,UAAQ;AACR,UAAQ;AACR,UAAQ;AAER,UAAQ,QAAQ,CAAC,QAAQ,UAAU;AAC/B,YAAQ,uBAAuB,QAAQ,KAAK;AAAA,EAChD,CAAC;AAED,UAAQ;AACR,SAAO;AACX;AAKA,SAAS,YAAY,SAA2D;AAC5E,QAAM,SAAS,sBAAsB;AACrC,QAAM,YAAY,mBAAmB;AAErC,QAAM,SAAS,CAAC,GAAG,OAAO;AAC1B,SAAO,KAAK,CAAC,GAAG,MAAM;AAClB,QAAI;AACJ,QAAI;AACJ,YAAQ,QAAQ;AAAA,MACZ,KAAK;AACD,eAAO,EAAE;AACT,eAAO,EAAE;AACT;AAAA,MACJ,KAAK;AACD,eAAO,EAAE;AACT,eAAO,EAAE;AACT;AAAA,MACJ,KAAK;AACD,eAAO,EAAE;AACT,eAAO,EAAE;AACT;AAAA,MACJ;AACI,eAAO;AAAA,IACf;AACA,WAAO,YAAY,OAAO,OAAO,OAAO;AAAA,EAC5C,CAAC;AAED,SAAO;AACX;AAKO,SAAS,0BAAgC;AAC5C,QAAM,YAAY,SAAS,eAAe,8BAA8B;AACxE,MAAI,CAAC,UAAW;AAEhB,QAAM,UAAU,mCAAmC;AAGnD,QAAM,gBAAgB,YAAY,OAAO;AAEzC,YAAU,YAAY,0BAA0B,aAAa;AACjE;AAKO,SAAS,8BAAoC;AAChD,0BAAwB;AAExB,eAAa,GAAG,gBAAgB,SAAS,CAAC,MAAM;AAC5C,4BAAwB;AAAA,EAC5B,GAAG,IAAI,CAAC;AACZ;AAMO,SAAS,kBAAkB,QAAsB;AACpD,QAAM,gBAAgB,sBAAsB;AAC5C,MAAI,kBAAkB,QAAQ;AAC1B,0BAAsB;AAAA,EAC1B,OAAO;AACH,0BAAsB,MAAM;AAAA,EAChC;AACA,0BAAwB;AAC5B;AAOA,IAAI,OAAO,WAAW,aAAa;AAC/B,EAAC,OAAe,oBAAoB;AACxC;",
  "names": []
}
