{
  "version": 3,
  "sources": ["loadout-page.ts"],
  "sourcesContent": ["import { BasePage } from \"./base-page\";\nimport {\n    initializeBaseStatsUI,\n    loadBaseStatsUI,\n    attachBaseStatsEventListeners\n} from \"./base-stats/base-stats-ui\";\nimport {\n    loadClassSelectUI,\n    attachClassSelectEventListeners\n} from \"./base-stats/class-select-ui\";\nimport {\n    loadTargetSelectUI,\n    attachTargetSelectEventListeners\n} from \"./base-stats/target-select-ui\";\nimport {\n    loadMasteryBonusesUI,\n    attachMasteryEventListeners\n} from \"./base-stats/mastery-bonus-ui\";\nimport {\n    initializeWeaponsUI,\n    loadWeaponsUI,\n    attachWeaponEventListeners\n} from \"./weapon-levels/weapon-ui\";\nimport {\n    initializeWeaponPriorityUI\n} from \"./weapon-levels/weapon-priority-ui\";\nimport { loadoutStore } from \"@ts/store/loadout.store\";\nimport { skillCoefficientManager } from \"@ts/services/skill-coefficient-manager\";\nimport { attachCompanionsEventListeners, initializeCompanionsUI, loadCompanionsUI } from \"./companions/companions-ui\";\nimport { attachEquipmentEventListeners, initializeEquipmentUI, loadEquipmentUI } from \"./equipment/equipment-ui\";\n\n/**\n * LoadoutPage - Manages the Loadout/Setup page\n * Extends BasePage to get consistent lifecycle and tab management\n */\nclass LoadoutPage extends BasePage {\n    private initialized: boolean = false;\n\n    constructor() {\n        super('setup', 'base-stats');\n    }\n\n    /**\n     * Lifecycle: Called after page is visible\n     * Initialize the page on first visit, switch tabs on subsequent visits\n     */\n    onPageVisible(tabName: string | null): void {\n        // Call parent to handle tab switching\n        super.onPageVisible(tabName);\n\n        // Initialize page components on first visit\n        if (!this.initialized) {\n            this.initializeComponents();\n            this.initialized = true;\n        }\n    }\n\n    /**\n     * Initialize all page components (HTML, state, event listeners)\n     * Called once on first page visit\n     */\n    private async initializeComponents(): Promise<void> {\n        // Step 0: Initialize the loadout store (migrates data from legacy format if needed)\n        await loadoutStore.initialize();\n\n        // Step 0.5: Initialize the skill coefficient manager\n        skillCoefficientManager.initialize();\n\n        // Step 1: Initialize all UI elements (HTML generation)\n        initializeBaseStatsUI();\n        initializeWeaponsUI(); // Handles tab HTML and weapon grid\n        initializeWeaponPriorityUI(); // Initialize priority UI\n        initializeCompanionsUI();\n        initializeEquipmentUI();\n\n        // Step 2: Load UI from saved state\n        loadBaseStatsUI();\n        loadClassSelectUI();\n        loadTargetSelectUI();\n        loadMasteryBonusesUI();\n        loadWeaponsUI();\n        loadCompanionsUI();\n        loadEquipmentUI();\n        \n        // Step 3: Attach all event listeners (must be last to avoid triggering during load)\n        attachBaseStatsEventListeners();\n        attachWeaponEventListeners();\n        attachClassSelectEventListeners();\n        attachTargetSelectEventListeners();\n        attachMasteryEventListeners();\n        attachCompanionsEventListeners();\n        attachEquipmentEventListeners();\n    }\n}\n\n// Export singleton instance for use by router and window\nexport const loadoutPage = new LoadoutPage();\n\n// Expose switchToTab method to window for HTML onclick handlers\nwindow.loadoutSwitchToTab = (tabName: string) => loadoutPage.switchToTab(tabName);\n\n// Declare the window function for TypeScript\ndeclare global {\n    interface Window {\n        loadoutSwitchToTab: (tabName: string) => void;\n    }\n}"],
  "mappings": "AAAA,SAAS,gBAAgB;AACzB;AAAA,EACI;AAAA,EACA;AAAA,EACA;AAAA,OACG;AACP;AAAA,EACI;AAAA,EACA;AAAA,OACG;AACP;AAAA,EACI;AAAA,EACA;AAAA,OACG;AACP;AAAA,EACI;AAAA,EACA;AAAA,OACG;AACP;AAAA,EACI;AAAA,EACA;AAAA,EACA;AAAA,OACG;AACP;AAAA,EACI;AAAA,OACG;AACP,SAAS,oBAAoB;AAC7B,SAAS,+BAA+B;AACxC,SAAS,gCAAgC,wBAAwB,wBAAwB;AACzF,SAAS,+BAA+B,uBAAuB,uBAAuB;AAMtF,MAAM,oBAAoB,SAAS;AAAA,EAG/B,cAAc;AACV,UAAM,SAAS,YAAY;AAH/B,SAAQ,cAAuB;AAAA,EAI/B;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,cAAc,SAA8B;AAExC,UAAM,cAAc,OAAO;AAG3B,QAAI,CAAC,KAAK,aAAa;AACnB,WAAK,qBAAqB;AAC1B,WAAK,cAAc;AAAA,IACvB;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAc,uBAAsC;AAEhD,UAAM,aAAa,WAAW;AAG9B,4BAAwB,WAAW;AAGnC,0BAAsB;AACtB,wBAAoB;AACpB,+BAA2B;AAC3B,2BAAuB;AACvB,0BAAsB;AAGtB,oBAAgB;AAChB,sBAAkB;AAClB,uBAAmB;AACnB,yBAAqB;AACrB,kBAAc;AACd,qBAAiB;AACjB,oBAAgB;AAGhB,kCAA8B;AAC9B,+BAA2B;AAC3B,oCAAgC;AAChC,qCAAiC;AACjC,gCAA4B;AAC5B,mCAA+B;AAC/B,kCAA8B;AAAA,EAClC;AACJ;AAGO,MAAM,cAAc,IAAI,YAAY;AAG3C,OAAO,qBAAqB,CAAC,YAAoB,YAAY,YAAY,OAAO;",
  "names": []
}
