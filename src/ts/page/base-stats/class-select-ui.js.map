{
  "version": 3,
  "sources": ["class-select-ui.ts"],
  "sourcesContent": ["/**\n * DOM manipulation layer for Class Selection\n * All functions handle only DOM operations and delegate logic to class-select.ts\n */\n\nimport { updateSkillCoefficient } from './base-stats';\nimport { updateMasteryBonuses } from './mastery-bonus';\nimport type { JobTier, ClassName } from '@ts/types';\nimport { CLASS, JOB_TIER } from '@ts/types/constants';\nimport {\n    isStrMainStatClass,\n    isDexMainStatClass,\n    isIntMainStatClass,\n    isLukMainStatClass\n} from './class-select';\nimport { syncMainStatsToHidden } from './base-stats-ui';\nimport type { ClassConfig } from '@ts/types/page/base-stats/base-stats.types';\nimport { loadoutStore } from '@ts/store/loadout.store';\n\n// ============================================================================\n// CLASSES CONFIGURATION\n// ============================================================================\n\n// Classes configuration for generating class selector HTML\nconst CLASSES: ClassConfig[] = [\n    { id: CLASS.HERO, name: 'Hero', image: 'media/classes/hero.png' },\n    { id: CLASS.DARK_KNIGHT, name: 'Dark Knight', image: 'media/classes/dk.png' },\n    { id: CLASS.BOWMASTER, name: 'Bowmaster', image: 'media/classes/bowmaster.png' },\n    { id: CLASS.MARKSMAN, name: 'Marksman', image: 'media/classes/marksman.png' },\n    { id: CLASS.NIGHT_LORD, name: 'Night Lord', image: 'media/classes/nl.png' },\n    { id: CLASS.SHADOWER, name: 'Shadower', image: 'media/classes/shadower.png' },\n    { id: CLASS.ARCH_MAGE_IL, name: 'Arch Mage (I/L)', image: 'media/classes/mage-il.png' },\n    { id: CLASS.ARCH_MAGE_FP, name: 'Arch Mage (F/P)', image: 'media/classes/mage-fp.png' }\n];\n\n// ============================================================================\n// WINDOW GLOBALS - HTML onclick handlers\n// ============================================================================\n\nif (typeof window !== 'undefined') {\n    window.selectJobTier = selectJobTier;\n    window.selectClass = selectClass;\n    window.selectMasteryTab = selectMasteryTab;\n}\n\n// ============================================================================\n// USER INTERACTION METHODS\n// ============================================================================\n\n/**\n * Handle user clicking on a job tier button\n */\nexport function selectJobTier(tier: JobTier): void {\n    loadoutStore.setSelectedJobTier(tier);\n    updateJobTierButtonUI(tier);\n    updateMasteryTableVisibility(tier);\n    updateMasteryTabUI(tier);\n    updateSkillCoefficient();\n    updateMasteryBonuses();\n    //updateAnalysisTabs();\n}\n\n/**\n * Handle user clicking on a class card\n */\nexport function selectClass(className: ClassName): void {\n    loadoutStore.setSelectedClass(className);\n    updateClassSelectionUI(className);\n    updateClassUI(className);\n\n    try {\n        //updateClassWarning();\n    } catch (error) {\n        // Cube module may not be initialized yet\n    }\n}\n\n/**\n * Handle user clicking on a mastery tab (3rd Job / 4th Job)\n * Switches the visible mastery table without changing job tier state\n */\nexport function selectMasteryTab(tier: JobTier): void {\n    updateMasteryTabUI(tier);\n    updateMasteryTableVisibility(tier);\n}\n\n// ============================================================================\n// INITIALIZATION METHODS\n// ============================================================================\n\n/**\n * Initialize class select state from saved localStorage data\n */\nexport function initializeClassSelectUI(): void {\n    const character = loadoutStore.getCharacter();\n\n    if (character.jobTier) {\n        initializeJobTierState(character.jobTier);\n    }\n\n    if (character.class) {\n        initializeClassState(character.class as ClassName);\n    }\n}\n\n/**\n * Load class select UI from saved state\n */\nexport function loadClassSelectUI(): void {\n    const character = loadoutStore.getCharacter();\n\n    if (character.jobTier) {\n        restoreJobTierSelection(character.jobTier);\n    }\n\n    if (character.class) {\n        restoreClassSelection(character.class as ClassName);\n    }\n}\n\n// ============================================================================\n// STATE INITIALIZATION (UI-LESS)\n// ============================================================================\n\n/**\n * Initialize job tier state only - does NOT update UI\n */\nfunction initializeJobTierState(tier: JobTier): void {\n    loadoutStore.setSelectedJobTier(tier);\n}\n\n/**\n * Initialize class state only - does NOT update UI\n */\nfunction initializeClassState(className: ClassName): void {\n    loadoutStore.setSelectedClass(className);\n}\n\n// ============================================================================\n// UI RESTORATION\n// ============================================================================\n\nfunction restoreJobTierSelection(tier: JobTier): void {\n    updateJobTierButtonUI(tier);\n    updateMasteryTableVisibility(tier);\n    updateMasteryTabUI(tier);\n    updateSkillCoefficient();\n}\n\nfunction restoreClassSelection(className: ClassName): void {\n    updateClassSelectionUI(className);\n    updateClassUI(className);\n}\n\n// ============================================================================\n// UI HELPERS\n// ============================================================================\n\nfunction updateJobTierButtonUI(tier: JobTier): void {\n    document.querySelectorAll('.bgstats-tier-btn').forEach(el => {\n        el.classList.remove('active');\n    });\n\n    const tierElement = document.getElementById(`job-tier-${tier}`);\n    if (tierElement) {\n        tierElement.classList.add('active');\n    }\n}\n\nfunction updateClassSelectionUI(className: ClassName): void {\n    document.querySelectorAll('.class-selector').forEach(el => {\n        el.classList.remove('selected');\n    });\n\n    const classElement = document.getElementById(`class-${className}`);\n    if (classElement) {\n        classElement.classList.add('selected');\n    }\n}\n\nfunction updateMasteryTabUI(tier: JobTier): void {\n    document.querySelectorAll('.bgstats-mastery-tab').forEach(el => {\n        el.classList.remove('active');\n    });\n\n    const masteryTab = document.getElementById(`mastery-tab-${tier}`);\n    if (masteryTab) {\n        masteryTab.classList.add('active');\n    }\n}\n\nfunction updateMasteryTableVisibility(tier: JobTier): void {\n    const mastery3rdTable = document.getElementById('mastery-table-3rd');\n    const mastery4thTable = document.getElementById('mastery-table-4th');\n\n    if (!mastery3rdTable || !mastery4thTable) return;\n\n    if (tier === JOB_TIER.THIRD) {\n        mastery3rdTable.style.display = 'block';\n        mastery4thTable.style.display = 'none';\n    } else if (tier === JOB_TIER.FOURTH) {\n        mastery3rdTable.style.display = 'none';\n        mastery4thTable.style.display = 'block';\n    }\n}\n\n/**\n * Update UI elements that depend on the selected class\n * Defense input only shows for Dark Knight\n */\nfunction updateClassUI(className: ClassName): void {\n    const defenseInputGroup = document.getElementById('defense-input-group');\n    if (defenseInputGroup) {\n        defenseInputGroup.style.display = className === CLASS.DARK_KNIGHT ? 'flex' : 'none';\n    }\n\n    const strRow = document.getElementById('str-row');\n    const dexRow = document.getElementById('dex-row');\n    const intRow = document.getElementById('int-row');\n    const lukRow = document.getElementById('luk-row');\n\n    if (strRow) strRow.style.display = 'none';\n    if (dexRow) dexRow.style.display = 'none';\n    if (intRow) intRow.style.display = 'none';\n    if (lukRow) lukRow.style.display = 'none';\n\n    if (isStrMainStatClass(className)) {\n        if (strRow) strRow.style.display = 'flex';\n        if (dexRow) dexRow.style.display = 'flex';\n    } else if (isDexMainStatClass(className)) {\n        if (dexRow) dexRow.style.display = 'flex';\n        if (strRow) strRow.style.display = 'flex';\n    } else if (isIntMainStatClass(className)) {\n        if (intRow) intRow.style.display = 'flex';\n        if (lukRow) lukRow.style.display = 'flex';\n    } else if (isLukMainStatClass(className)) {\n        if (lukRow) lukRow.style.display = 'flex';\n        if (dexRow) dexRow.style.display = 'flex';\n    }\n\n    syncMainStatsToHidden();\n}\n\n// ============================================================================\n// EVENT LISTENERS\n// ============================================================================\n\n/**\n * Attach event listeners to class selector cards\n */\nfunction attachClassSelectorListeners(): void {\n    CLASSES.forEach(cls => {\n        const element = document.getElementById(`class-${cls.id}`);\n        if (element) {\n            element.addEventListener('click', () => selectClass(cls.id));\n        }\n    });\n}\n\n/**\n * Attach event listeners to job tier buttons\n */\nfunction attachJobTierListeners(): void {\n    const tier3rd = document.getElementById('job-tier-3rd');\n    const tier4th = document.getElementById('job-tier-4th');\n\n    if (tier3rd) {\n        tier3rd.addEventListener('click', () => selectJobTier(JOB_TIER.THIRD));\n    }\n    if (tier4th) {\n        tier4th.addEventListener('click', () => selectJobTier(JOB_TIER.FOURTH));\n    }\n}\n\n/**\n * Attach all event listeners for class select UI\n */\nexport function attachClassSelectEventListeners(): void {\n    attachClassSelectorListeners();\n    attachJobTierListeners();\n}\n\n// ============================================================================\n// HTML GENERATION\n// ============================================================================\n\n/**\n * Generate HTML for class selector cards\n */\nexport function generateClassSelectorHTML(): string {\n    return CLASSES.map(cls => `\n        <div id=\"class-${cls.id}\" class=\"class-selector bgstats-class-card\" title=\"${cls.title || cls.name}\">\n            <div class=\"bgstats-class-image-wrapper\">\n                <img src=\"${cls.image}\" alt=\"${cls.name}\" class=\"bgstats-class-image\">\n            </div>\n            <span class=\"bgstats-class-name\">${cls.name}</span>\n        </div>\n    `).join('');\n}\n"],
  "mappings": "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",
  "names": []
}
