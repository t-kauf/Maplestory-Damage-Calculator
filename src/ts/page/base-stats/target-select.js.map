{
  "version": 3,
  "sources": ["target-select.ts"],
  "sourcesContent": ["/**\n * Pure logic layer for Target/Stage selection\n * Data retrieval and filtering functions without DOM dependencies\n */\nimport { stageDefenses } from '@ts/services/stage-defense.service';\nimport { CONTENT_TYPE, MAX_CHAPTER_NUMBER, type ContentType } from '@ts/types';\n\nexport type { ContentType };\n\n// ============================================================================\n// TYPE DEFINITIONS\n// ============================================================================\n\nexport interface StageEntry {\n    stage?: string;\n    defense: number;\n    accuracy?: number | string;\n    chapter?: string;\n    boss?: string;\n}\n\nexport interface SavedContentTypeData {\n    contentType: ContentType | null;\n    subcategory: string | null;\n    selectedStage: string | null;\n}\n\n// ============================================================================\n// STAGE DATA RETRIEVAL\n// ============================================================================\n\nexport function getStageEntries(contentType: ContentType): StageEntry[] {\n    switch (contentType) {\n        case CONTENT_TYPE.CHAPTER_BOSS:\n            return stageDefenses.chapterBosses;\n        case CONTENT_TYPE.WORLD_BOSS:\n            return stageDefenses.worldBosses;\n        case CONTENT_TYPE.STAGE_HUNT:\n            return stageDefenses.stageHunts;\n        case CONTENT_TYPE.GROWTH_DUNGEON:\n            return stageDefenses.growthDungeons;\n        default:\n            return [];\n    }\n}\n\nexport function filterStageHuntsByChapter(chapter: string): StageEntry[] {\n    return stageDefenses.stageHunts.filter(e => e.stage.startsWith(`${chapter}-`));\n}\n\nexport function filterGrowthDungeonsByType(dungeonType: string): StageEntry[] {\n    return stageDefenses.growthDungeons.filter(e => e.stage.startsWith(dungeonType));\n}\n\n// ============================================================================\n// DROPDOWN DATA GENERATION\n// ============================================================================\n\nexport function getSubcategoryOptions(contentType: ContentType): Array<{ value: string; label: string }> {\n    if (contentType === CONTENT_TYPE.STAGE_HUNT) {\n        const options: Array<{ value: string; label: string }> = [];\n        for (let ch = 1; ch <= MAX_CHAPTER_NUMBER; ch++) {\n            options.push({\n                value: `chapter-${ch}`,\n                label: `Chapter ${ch}`\n            });\n        }\n        return options;\n    }\n\n    if (contentType === CONTENT_TYPE.GROWTH_DUNGEON) {\n        const types = ['Weapon', 'EXP', 'Equipment', 'Enhancement', 'Hero Training Ground'];\n        return types.map(type => ({\n            value: type,\n            label: `${type} Stages`\n        }));\n    }\n\n    return [];\n}\n\nexport function getFilteredStageEntries(\n    contentType: ContentType,\n    filter: string\n): Array<{ entry: StageEntry; identifier: string; prefix: string }> {\n    let entries: StageEntry[] = [];\n    let prefix = '';\n\n    if (contentType === CONTENT_TYPE.STAGE_HUNT) {\n        entries = filterStageHuntsByChapter(filter);\n        prefix = 'stageHunt';\n    } else if (contentType === CONTENT_TYPE.GROWTH_DUNGEON) {\n        entries = filterGrowthDungeonsByType(filter);\n        prefix = 'growthDungeon';\n    } else if (contentType === CONTENT_TYPE.CHAPTER_BOSS) {\n        entries = getStageEntries(CONTENT_TYPE.CHAPTER_BOSS);\n        prefix = 'chapterBoss';\n    } else if (contentType === CONTENT_TYPE.WORLD_BOSS) {\n        entries = getStageEntries(CONTENT_TYPE.WORLD_BOSS);\n        prefix = 'worldBoss';\n    }\n\n    return entries.map(entry => ({\n        entry,\n        identifier: entry.stage || entry.chapter || entry.boss || '',\n        prefix\n    }));\n}\n\nexport function formatStageLabel(\n    entry: StageEntry,\n    identifier: string,\n    contentType: ContentType\n): string {\n    const accuracy = entry.accuracy ? `, Acc: ${entry.accuracy}` : '';\n    const defense = Math.floor(entry.defense * 100);\n\n    if (contentType === CONTENT_TYPE.CHAPTER_BOSS) {\n        return `Chapter ${identifier} (Def: ${defense}${accuracy})`;\n    }\n\n    if (contentType === CONTENT_TYPE.WORLD_BOSS) {\n        return `${identifier} (Def: ${defense}${accuracy})`;\n    }\n\n    return `${identifier} (Def: ${defense}${accuracy})`;\n}\n\n// ============================================================================\n// CONTENT TYPE VALIDATION\n// ============================================================================\n\nexport function requiresSubcategory(contentType: ContentType): boolean {\n    return contentType === CONTENT_TYPE.STAGE_HUNT || contentType === CONTENT_TYPE.GROWTH_DUNGEON;\n}\n\nexport function requiresStageSelection(contentType: ContentType): boolean {\n    return contentType === CONTENT_TYPE.CHAPTER_BOSS ||\n           contentType === CONTENT_TYPE.WORLD_BOSS ||\n           contentType === CONTENT_TYPE.STAGE_HUNT ||\n           contentType === CONTENT_TYPE.GROWTH_DUNGEON;\n}\n"],
  "mappings": "AAIA,SAAS,qBAAqB;AAC9B,SAAS,cAAc,0BAA4C;AA0B5D,SAAS,gBAAgB,aAAwC;AACpE,UAAQ,aAAa;AAAA,IACjB,KAAK,aAAa;AACd,aAAO,cAAc;AAAA,IACzB,KAAK,aAAa;AACd,aAAO,cAAc;AAAA,IACzB,KAAK,aAAa;AACd,aAAO,cAAc;AAAA,IACzB,KAAK,aAAa;AACd,aAAO,cAAc;AAAA,IACzB;AACI,aAAO,CAAC;AAAA,EAChB;AACJ;AAEO,SAAS,0BAA0B,SAA+B;AACrE,SAAO,cAAc,WAAW,OAAO,OAAK,EAAE,MAAM,WAAW,GAAG,OAAO,GAAG,CAAC;AACjF;AAEO,SAAS,2BAA2B,aAAmC;AAC1E,SAAO,cAAc,eAAe,OAAO,OAAK,EAAE,MAAM,WAAW,WAAW,CAAC;AACnF;AAMO,SAAS,sBAAsB,aAAmE;AACrG,MAAI,gBAAgB,aAAa,YAAY;AACzC,UAAM,UAAmD,CAAC;AAC1D,aAAS,KAAK,GAAG,MAAM,oBAAoB,MAAM;AAC7C,cAAQ,KAAK;AAAA,QACT,OAAO,WAAW,EAAE;AAAA,QACpB,OAAO,WAAW,EAAE;AAAA,MACxB,CAAC;AAAA,IACL;AACA,WAAO;AAAA,EACX;AAEA,MAAI,gBAAgB,aAAa,gBAAgB;AAC7C,UAAM,QAAQ,CAAC,UAAU,OAAO,aAAa,eAAe,sBAAsB;AAClF,WAAO,MAAM,IAAI,WAAS;AAAA,MACtB,OAAO;AAAA,MACP,OAAO,GAAG,IAAI;AAAA,IAClB,EAAE;AAAA,EACN;AAEA,SAAO,CAAC;AACZ;AAEO,SAAS,wBACZ,aACA,QACgE;AAChE,MAAI,UAAwB,CAAC;AAC7B,MAAI,SAAS;AAEb,MAAI,gBAAgB,aAAa,YAAY;AACzC,cAAU,0BAA0B,MAAM;AAC1C,aAAS;AAAA,EACb,WAAW,gBAAgB,aAAa,gBAAgB;AACpD,cAAU,2BAA2B,MAAM;AAC3C,aAAS;AAAA,EACb,WAAW,gBAAgB,aAAa,cAAc;AAClD,cAAU,gBAAgB,aAAa,YAAY;AACnD,aAAS;AAAA,EACb,WAAW,gBAAgB,aAAa,YAAY;AAChD,cAAU,gBAAgB,aAAa,UAAU;AACjD,aAAS;AAAA,EACb;AAEA,SAAO,QAAQ,IAAI,YAAU;AAAA,IACzB;AAAA,IACA,YAAY,MAAM,SAAS,MAAM,WAAW,MAAM,QAAQ;AAAA,IAC1D;AAAA,EACJ,EAAE;AACN;AAEO,SAAS,iBACZ,OACA,YACA,aACM;AACN,QAAM,WAAW,MAAM,WAAW,UAAU,MAAM,QAAQ,KAAK;AAC/D,QAAM,UAAU,KAAK,MAAM,MAAM,UAAU,GAAG;AAE9C,MAAI,gBAAgB,aAAa,cAAc;AAC3C,WAAO,WAAW,UAAU,UAAU,OAAO,GAAG,QAAQ;AAAA,EAC5D;AAEA,MAAI,gBAAgB,aAAa,YAAY;AACzC,WAAO,GAAG,UAAU,UAAU,OAAO,GAAG,QAAQ;AAAA,EACpD;AAEA,SAAO,GAAG,UAAU,UAAU,OAAO,GAAG,QAAQ;AACpD;AAMO,SAAS,oBAAoB,aAAmC;AACnE,SAAO,gBAAgB,aAAa,cAAc,gBAAgB,aAAa;AACnF;AAEO,SAAS,uBAAuB,aAAmC;AACtE,SAAO,gBAAgB,aAAa,gBAC7B,gBAAgB,aAAa,cAC7B,gBAAgB,aAAa,cAC7B,gBAAgB,aAAa;AACxC;",
  "names": []
}
