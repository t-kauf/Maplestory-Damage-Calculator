{
  "version": 3,
  "sources": ["mastery-bonus.ts"],
  "sourcesContent": ["import { MASTERY_BONUSES } from './mastery-constants';\nimport { updateMasteryDisplay } from './mastery-bonus-ui';\nimport type { JobTier } from '@ts/types/index';\nimport type { MasteryBonuses } from '@ts/types/page/base-stats/base-stats.types';\nimport { loadoutStore } from '@ts/store/loadout.store';\nimport { MASTERY_TYPE, STAT } from '@ts/types/constants';\n\nif (typeof window !== 'undefined') {\n    window.updateMasteryBonuses = updateMasteryBonuses;\n}\n\n// ============================================================================\n// UPDATE METHODS\n// ============================================================================\n\n/**\n * Update mastery bonuses from checkbox states and save\n * Call this when user interacts with mastery checkboxes\n */\nexport function updateMasteryBonuses(): void {\n    const currentTier = loadoutStore.getCharacter().jobTier as JobTier;\n    const { allTotal, bossTotal } = calculateMasteryTotals(currentTier);\n\n    updateMasteryDisplay(currentTier, allTotal, bossTotal);\n\n    // Save mastery checkbox states via loadout store (auto dual-writes to localStorage)\n    saveMasteryCheckboxesToStore(currentTier);\n}\n\n/**\n * Save current mastery checkbox states to the loadout store\n */\nfunction saveMasteryCheckboxesToStore(tier: JobTier): void {\n    const tierData = MASTERY_BONUSES[tier];\n    if (!tierData) return;\n\n    // Save \"All Monsters\" checkboxes\n    for (const [level] of Object.entries(tierData.all)) {\n        const checkbox = document.getElementById(`mastery-${tier}-all-${level}`) as HTMLInputElement;\n        if (checkbox) {\n            loadoutStore.updateMasteryCheckbox(tier, MASTERY_TYPE.ALL, level, checkbox.checked);\n        }\n    }\n\n    // Save \"Boss Only\" checkboxes\n    for (const [level] of Object.entries(tierData.boss)) {\n        const checkbox = document.getElementById(`mastery-${tier}-boss-${level}`) as HTMLInputElement;\n        if (checkbox) {\n            loadoutStore.updateMasteryCheckbox(tier, MASTERY_TYPE.BOSS, level, checkbox.checked);\n        }\n    }\n}\n\n// ============================================================================\n// CALCULATION HELPERS\n// ============================================================================\n\n/**\n * Calculate mastery bonus totals from checked checkboxes\n */\nexport function calculateMasteryTotals(tier: JobTier): { allTotal: number; bossTotal: number } {\n    let allTotal = 0;\n    let bossTotal = 0;\n\n    const tierData = MASTERY_BONUSES[tier];\n\n    // Guard: if tier doesn't exist in MASTERY_BONUSES, return zeros\n    if (!tierData) {\n        return { allTotal, bossTotal };\n    }\n\n    // Sum up \"All Monsters\" bonuses\n    for (const [level, bonus] of Object.entries(tierData.all)) {\n        const checkbox = document.getElementById(`mastery-${tier}-all-${level}`) as HTMLInputElement;\n        if (checkbox && checkbox.checked) {\n            allTotal += bonus;\n        }\n    }\n\n    // Sum up \"Boss Only\" bonuses\n    for (const [level, bonus] of Object.entries(tierData.boss)) {\n        const checkbox = document.getElementById(`mastery-${tier}-boss-${level}`) as HTMLInputElement;\n        if (checkbox && checkbox.checked) {\n            bossTotal += bonus;\n        }\n    }\n\n    return { allTotal, bossTotal };\n}\n"],
  "mappings": "AAAA,SAAS,uBAAuB;AAChC,SAAS,4BAA4B;AAGrC,SAAS,oBAAoB;AAC7B,SAAS,oBAA0B;AAEnC,IAAI,OAAO,WAAW,aAAa;AAC/B,SAAO,uBAAuB;AAClC;AAUO,SAAS,uBAA6B;AACzC,QAAM,cAAc,aAAa,aAAa,EAAE;AAChD,QAAM,EAAE,UAAU,UAAU,IAAI,uBAAuB,WAAW;AAElE,uBAAqB,aAAa,UAAU,SAAS;AAGrD,+BAA6B,WAAW;AAC5C;AAKA,SAAS,6BAA6B,MAAqB;AACvD,QAAM,WAAW,gBAAgB,IAAI;AACrC,MAAI,CAAC,SAAU;AAGf,aAAW,CAAC,KAAK,KAAK,OAAO,QAAQ,SAAS,GAAG,GAAG;AAChD,UAAM,WAAW,SAAS,eAAe,WAAW,IAAI,QAAQ,KAAK,EAAE;AACvE,QAAI,UAAU;AACV,mBAAa,sBAAsB,MAAM,aAAa,KAAK,OAAO,SAAS,OAAO;AAAA,IACtF;AAAA,EACJ;AAGA,aAAW,CAAC,KAAK,KAAK,OAAO,QAAQ,SAAS,IAAI,GAAG;AACjD,UAAM,WAAW,SAAS,eAAe,WAAW,IAAI,SAAS,KAAK,EAAE;AACxE,QAAI,UAAU;AACV,mBAAa,sBAAsB,MAAM,aAAa,MAAM,OAAO,SAAS,OAAO;AAAA,IACvF;AAAA,EACJ;AACJ;AASO,SAAS,uBAAuB,MAAwD;AAC3F,MAAI,WAAW;AACf,MAAI,YAAY;AAEhB,QAAM,WAAW,gBAAgB,IAAI;AAGrC,MAAI,CAAC,UAAU;AACX,WAAO,EAAE,UAAU,UAAU;AAAA,EACjC;AAGA,aAAW,CAAC,OAAO,KAAK,KAAK,OAAO,QAAQ,SAAS,GAAG,GAAG;AACvD,UAAM,WAAW,SAAS,eAAe,WAAW,IAAI,QAAQ,KAAK,EAAE;AACvE,QAAI,YAAY,SAAS,SAAS;AAC9B,kBAAY;AAAA,IAChB;AAAA,EACJ;AAGA,aAAW,CAAC,OAAO,KAAK,KAAK,OAAO,QAAQ,SAAS,IAAI,GAAG;AACxD,UAAM,WAAW,SAAS,eAAe,WAAW,IAAI,SAAS,KAAK,EAAE;AACxE,QAAI,YAAY,SAAS,SAAS;AAC9B,mBAAa;AAAA,IACjB;AAAA,EACJ;AAEA,SAAO,EAAE,UAAU,UAAU;AACjC;",
  "names": []
}
