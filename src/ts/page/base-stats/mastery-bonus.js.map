{
  "version": 3,
  "sources": ["mastery-bonus.ts"],
  "sourcesContent": ["import { MASTERY_BONUSES } from './mastery-constants';\r\nimport { updateMasteryDisplay } from './mastery-bonus-ui';\r\nimport type { JobTier } from '@ts/types/index';\r\nimport type { MasteryBonuses } from '@ts/types/page/base-stats/base-stats.types';\r\nimport { loadoutStore } from '@ts/store/loadout.store';\r\nimport { MASTERY_TYPE } from '@ts/types/constants';\r\n\r\nif (typeof window !== 'undefined') {\r\n    window.updateMasteryBonuses = updateMasteryBonuses;\r\n}\r\n\r\n// ============================================================================\r\n// UPDATE METHODS\r\n// ============================================================================\r\n\r\n/**\r\n * Update mastery bonuses from checkbox states and save\r\n * Call this when user interacts with mastery checkboxes\r\n */\r\nexport function updateMasteryBonuses(): void {\r\n    const currentTier = loadoutStore.getCharacter().jobTier as JobTier;\r\n    const { allTotal, bossTotal } = calculateMasteryTotals(currentTier);\r\n\r\n    updateMasteryDisplay(currentTier, allTotal, bossTotal);\r\n\r\n    // Save mastery checkbox states via loadout store (auto dual-writes to localStorage)\r\n    saveMasteryCheckboxesToStore(currentTier);\r\n   // updateAnalysisTabs();\r\n}\r\n\r\n/**\r\n * Save current mastery checkbox states to the loadout store\r\n */\r\nfunction saveMasteryCheckboxesToStore(tier: JobTier): void {\r\n    const tierData = MASTERY_BONUSES[tier];\r\n    if (!tierData) return;\r\n\r\n    // Save \"All Monsters\" checkboxes\r\n    for (const [level] of Object.entries(tierData.all)) {\r\n        const checkbox = document.getElementById(`mastery-${tier}-all-${level}`) as HTMLInputElement;\r\n        if (checkbox) {\r\n            loadoutStore.updateMasteryCheckbox(tier, MASTERY_TYPE.ALL, level, checkbox.checked);\r\n        }\r\n    }\r\n\r\n    // Save \"Boss Only\" checkboxes\r\n    for (const [level] of Object.entries(tierData.boss)) {\r\n        const checkbox = document.getElementById(`mastery-${tier}-boss-${level}`) as HTMLInputElement;\r\n        if (checkbox) {\r\n            loadoutStore.updateMasteryCheckbox(tier, MASTERY_TYPE.BOSS, level, checkbox.checked);\r\n        }\r\n    }\r\n}\r\n\r\n// ============================================================================\r\n// CALCULATION HELPERS\r\n// ============================================================================\r\n\r\n/**\r\n * Calculate mastery bonus totals from checked checkboxes\r\n */\r\nexport function calculateMasteryTotals(tier: JobTier): { allTotal: number; bossTotal: number } {\r\n    let allTotal = 0;\r\n    let bossTotal = 0;\r\n\r\n    const tierData = MASTERY_BONUSES[tier];\r\n\r\n    // Guard: if tier doesn't exist in MASTERY_BONUSES, return zeros\r\n    if (!tierData) {\r\n        return { allTotal, bossTotal };\r\n    }\r\n\r\n    // Sum up \"All Monsters\" bonuses\r\n    for (const [level, bonus] of Object.entries(tierData.all)) {\r\n        const checkbox = document.getElementById(`mastery-${tier}-all-${level}`) as HTMLInputElement;\r\n        if (checkbox && checkbox.checked) {\r\n            allTotal += bonus;\r\n        }\r\n    }\r\n\r\n    // Sum up \"Boss Only\" bonuses\r\n    for (const [level, bonus] of Object.entries(tierData.boss)) {\r\n        const checkbox = document.getElementById(`mastery-${tier}-boss-${level}`) as HTMLInputElement;\r\n        if (checkbox && checkbox.checked) {\r\n            bossTotal += bonus;\r\n        }\r\n    }\r\n\r\n    return { allTotal, bossTotal };\r\n}\r\n"],
  "mappings": "AAAA,SAAS,uBAAuB;AAChC,SAAS,4BAA4B;AAGrC,SAAS,oBAAoB;AAC7B,SAAS,oBAAoB;AAE7B,IAAI,OAAO,WAAW,aAAa;AAC/B,SAAO,uBAAuB;AAClC;AAUO,SAAS,uBAA6B;AACzC,QAAM,cAAc,aAAa,aAAa,EAAE;AAChD,QAAM,EAAE,UAAU,UAAU,IAAI,uBAAuB,WAAW;AAElE,uBAAqB,aAAa,UAAU,SAAS;AAGrD,+BAA6B,WAAW;AAE5C;AAKA,SAAS,6BAA6B,MAAqB;AACvD,QAAM,WAAW,gBAAgB,IAAI;AACrC,MAAI,CAAC,SAAU;AAGf,aAAW,CAAC,KAAK,KAAK,OAAO,QAAQ,SAAS,GAAG,GAAG;AAChD,UAAM,WAAW,SAAS,eAAe,WAAW,IAAI,QAAQ,KAAK,EAAE;AACvE,QAAI,UAAU;AACV,mBAAa,sBAAsB,MAAM,aAAa,KAAK,OAAO,SAAS,OAAO;AAAA,IACtF;AAAA,EACJ;AAGA,aAAW,CAAC,KAAK,KAAK,OAAO,QAAQ,SAAS,IAAI,GAAG;AACjD,UAAM,WAAW,SAAS,eAAe,WAAW,IAAI,SAAS,KAAK,EAAE;AACxE,QAAI,UAAU;AACV,mBAAa,sBAAsB,MAAM,aAAa,MAAM,OAAO,SAAS,OAAO;AAAA,IACvF;AAAA,EACJ;AACJ;AASO,SAAS,uBAAuB,MAAwD;AAC3F,MAAI,WAAW;AACf,MAAI,YAAY;AAEhB,QAAM,WAAW,gBAAgB,IAAI;AAGrC,MAAI,CAAC,UAAU;AACX,WAAO,EAAE,UAAU,UAAU;AAAA,EACjC;AAGA,aAAW,CAAC,OAAO,KAAK,KAAK,OAAO,QAAQ,SAAS,GAAG,GAAG;AACvD,UAAM,WAAW,SAAS,eAAe,WAAW,IAAI,QAAQ,KAAK,EAAE;AACvE,QAAI,YAAY,SAAS,SAAS;AAC9B,kBAAY;AAAA,IAChB;AAAA,EACJ;AAGA,aAAW,CAAC,OAAO,KAAK,KAAK,OAAO,QAAQ,SAAS,IAAI,GAAG;AACxD,UAAM,WAAW,SAAS,eAAe,WAAW,IAAI,SAAS,KAAK,EAAE;AACxE,QAAI,YAAY,SAAS,SAAS;AAC9B,mBAAa;AAAA,IACjB;AAAA,EACJ;AAEA,SAAO,EAAE,UAAU,UAAU;AACjC;",
  "names": []
}
