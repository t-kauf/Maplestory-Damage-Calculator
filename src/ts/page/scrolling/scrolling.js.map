{
  "version": 3,
  "sources": ["scrolling.ts"],
  "sourcesContent": ["/**\n * Scroll Optimizer - Pure Logic Layer\n *\n * Contains all simulation calculations, strategy definitions,\n * and damage gain calculations without any DOM manipulation.\n */\n\nimport { StatCalculationService } from '@ts/services/stat-calculation-service.js';\nimport { loadoutStore } from '@ts/store/loadout.store.js';\nimport { STAT } from '@ts/types/constants.js';\nimport type {\n    ScrollConfig,\n    SlotResult,\n    ScrollRunResult,\n    ScrollStrategy,\n    DamageGainResult,\n    ScrollLevel,\n    ScrollType,\n    L65ScrollType,\n    L85ScrollType,\n    EnhancementBonus\n} from '@ts/types/page/scrolling/scrolling.types.js';\n\n// ============================================================================\n// CONSTANTS\n// ============================================================================\n\nexport const SCROLLS_L65: Record<L65ScrollType, ScrollConfig> = {\n    'L65_70': { name: '70% Level 65', baseSuccess: 0.70, cost: 250, attack: 100, damageAmp: 0 },\n    'L65_30': { name: '30% Level 65', baseSuccess: 0.30, cost: 300, attack: 200, damageAmp: 0.1 }\n};\n\nexport const SCROLLS_L85: Record<L85ScrollType, ScrollConfig> = {\n    'L85_70': { name: '70% Level 85', baseSuccess: 0.70, cost: 500, attack: 200, damageAmp: 0.2 },\n    'L85_30': { name: '30% Level 85', baseSuccess: 0.30, cost: 650, attack: 400, damageAmp: 0.4 },\n    'L85_15': { name: '15% Level 85', baseSuccess: 0.15, cost: 800, attack: 800, damageAmp: 0.8 }\n};\n\nconst BONUS_AT_SLOT_5 = 0.10;\nconst BONUS_AT_SLOT_10 = 0.20;\nconst RESET_COST = 50;\nconst NUM_SLOTS = 10;\n\n// ============================================================================\n// SCROLL HELPERS\n// ============================================================================\n\n/**\n * Get scroll configuration by level and type\n */\nexport function getScrollsForLevel(level: ScrollLevel): Record<string, ScrollConfig> {\n    return level === '65' ? SCROLLS_L65 : SCROLLS_L85;\n}\n\n/**\n * Calculate success rate for a scroll at a specific slot with enhancement bonuses\n */\nexport function getScrollSuccessRate(\n    scroll: ScrollConfig,\n    slotNumber: number,\n    enhancementBonus: EnhancementBonus\n): number {\n    let rate = scroll.baseSuccess + enhancementBonus.total;\n    if (slotNumber === 5) rate += BONUS_AT_SLOT_5;\n    if (slotNumber === 10) rate += BONUS_AT_SLOT_10;\n    return Math.min(rate, 1.0); // Cap at 100%\n}\n\n// ============================================================================\n// SIMULATION LOGIC\n// ============================================================================\n\n/**\n * Attempt one complete scroll run (all 10 slots)\n */\nexport function attemptScrollRun(\n    strategy: ScrollStrategy,\n    budget: number,\n    traceUsed: number,\n    scrolls: Record<string, ScrollConfig>,\n    enhancementBonus: EnhancementBonus\n): ScrollRunResult {\n    let totalAttack = 0;\n    let totalDamageAmp = 0;\n    let successfulSlots = 0;\n    let failedSlots = 0;\n    let attemptCost = 0;\n    const slotResults: SlotResult[] = [];\n    let earlyReset = false;\n\n    for (let slot = 1; slot <= NUM_SLOTS; slot++) {\n        const scrollType = strategy.selectScroll(slot, successfulSlots, failedSlots, traceUsed + attemptCost, budget);\n        const scroll = scrolls[scrollType];\n\n        // Check if we can afford this scroll\n        if (traceUsed + attemptCost + scroll.cost > budget) {\n            // Out of budget mid-attempt\n            for (let s = slot; s <= NUM_SLOTS; s++) {\n                slotResults.push({ slot: s, success: false, unfunded: true, attack: 0, damageAmp: 0, successRate: 0 });\n            }\n            break;\n        }\n\n        attemptCost += scroll.cost;\n        const successRate = getScrollSuccessRate(scroll, slot, enhancementBonus);\n        const success = Math.random() < successRate;\n\n        slotResults.push({\n            slot,\n            scrollType,\n            success,\n            attack: success ? scroll.attack : 0,\n            damageAmp: success ? scroll.damageAmp : 0,\n            successRate: successRate * 100,\n            unfunded: false\n        });\n\n        if (success) {\n            totalAttack += scroll.attack;\n            totalDamageAmp += scroll.damageAmp;\n            successfulSlots++;\n        } else {\n            failedSlots++;\n        }\n\n        // Check for early reset after this slot (if strategy supports it)\n        if (strategy.shouldResetEarly) {\n            const shouldResetEarly = strategy.shouldResetEarly(slotResults, slot, successfulSlots, failedSlots);\n            if (shouldResetEarly) {\n                earlyReset = true;\n                // Mark remaining slots as unfunded\n                for (let s = slot + 1; s <= NUM_SLOTS; s++) {\n                    slotResults.push({ slot: s, success: false, unfunded: true, attack: 0, damageAmp: 0, successRate: 0 });\n                }\n                break;\n            }\n        }\n    }\n\n    return {\n        totalAttack,\n        totalDamageAmp,\n        successfulSlots,\n        failedSlots,\n        attemptCost,\n        slotResults,\n        earlyReset\n    };\n}\n\n/**\n * Simulate with reset strategy\n */\nexport function simulateScrollWithResets(\n    strategy: ScrollStrategy,\n    budget: number,\n    scrolls: Record<string, ScrollConfig>,\n    enhancementBonus: EnhancementBonus\n): ScrollRunResult & { resetCount: number; attemptCount: number; traceUsed: number } {\n    let traceUsed = 0;\n    let resetCount = 0;\n    let finalResult: (ScrollRunResult & { traceUsed: number }) | null = null;\n    let attemptCount = 0;\n\n    while (traceUsed < budget) {\n        attemptCount++;\n        const result = attemptScrollRun(strategy, budget, traceUsed, scrolls, enhancementBonus);\n\n        // Check if we ran out of budget during attempt\n        if (traceUsed + result.attemptCost > budget) {\n            if (finalResult) {\n                return { ...finalResult, resetCount, attemptCount };\n            } else {\n                return {\n                    totalAttack: 0,\n                    totalDamageAmp: 0,\n                    successfulSlots: 0,\n                    failedSlots: NUM_SLOTS,\n                    attemptCost: 0,\n                    traceUsed: 0,\n                    resetCount: 0,\n                    attemptCount: 0,\n                    slotResults: [],\n                    earlyReset: false\n                };\n            }\n        }\n\n        traceUsed += result.attemptCost;\n        finalResult = { ...result, traceUsed };\n\n        // Check if early reset was triggered (takes priority)\n        let shouldReset = false;\n        if (result.earlyReset) {\n            shouldReset = true;\n        } else {\n            // Otherwise, strategy decides whether to reset based on final result\n            shouldReset = strategy.shouldReset(result, traceUsed, budget);\n        }\n\n        if (!shouldReset) {\n            break;\n        }\n\n        // Try to reset\n        if (traceUsed + RESET_COST <= budget) {\n            traceUsed += RESET_COST;\n            resetCount++;\n        } else {\n            break;\n        }\n    }\n\n    return { ...finalResult!, resetCount, attemptCount };\n}\n\n// ============================================================================\n// STRATEGY CREATION\n// ============================================================================\n\n/**\n * Create strategy variations for L65 scrolls - Lock-in optimized strategies\n */\nexport function createL65Strategies(): ScrollStrategy[] {\n    const strategies: ScrollStrategy[] = [];\n\n    // Secure Slot 1 with 30% (Base strategy)\n    strategies.push({\n        id: 'L65_slot1_30_lock',\n        name: 'Secure Slot 1 (30%)',\n        description: 'Reset until 30% succeeds on slot 1. Then 30% on slots 5&10, 70% on others. Low budget efficient.',\n        selectScroll: (slot) => {\n            if (slot === 1) return 'L65_30';\n            if (slot === 5 || slot === 10) return 'L65_30';\n            return 'L65_70';\n        },\n        shouldResetEarly: (slotResults, currentSlot) => {\n            if (currentSlot === 1 && slotResults.length >= 1) {\n                const slot1 = slotResults[0];\n                if (!slot1.success && !slot1.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: () => false\n    });\n\n    // 70% Base with 30% on Bonus Slots Only\n    strategies.push({\n        id: 'L65_70_bonus_30',\n        name: '70% Base + Bonus 30%',\n        description: '70% L65 on all slots except 5&10, which use 30% (42% and 52% success rates). No early resets.',\n        selectScroll: (slot) => {\n            if (slot === 5 || slot === 10) return 'L65_30';\n            return 'L65_70';\n        },\n        shouldReset: () => false\n    });\n\n    // Secure Slot 10 with 30% (Best bonus slot)\n    strategies.push({\n        id: 'L65_slot10_30_lock',\n        name: 'Secure Slot 10 (30%)',\n        description: 'Reset until 30% succeeds on slot 10 (52% with +20% bonus). Then 30% on slots 1&5, 70% on others.',\n        selectScroll: (slot) => {\n            if (slot === 10) return 'L65_30';\n            if (slot === 1 || slot === 5) return 'L65_30';\n            return 'L65_70';\n        },\n        shouldResetEarly: (slotResults, currentSlot) => {\n            if (currentSlot === 10 && slotResults.length >= 10) {\n                const slot10 = slotResults[9];\n                if (!slot10.success && !slot10.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: () => false\n    });\n\n    // Secure Slot 5 with 30%\n    strategies.push({\n        id: 'L65_slot5_30_lock',\n        name: 'Secure Slot 5 (30%)',\n        description: 'Reset until 30% succeeds on slot 5 (42% with +10% bonus). Then 30% on slots 1&10, 70% on others.',\n        selectScroll: (slot) => {\n            if (slot === 5) return 'L65_30';\n            if (slot === 1 || slot === 10) return 'L65_30';\n            return 'L65_70';\n        },\n        shouldResetEarly: (slotResults, currentSlot) => {\n            if (currentSlot === 5 && slotResults.length >= 5) {\n                const slot5 = slotResults[4];\n                if (!slot5.success && !slot5.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: () => false\n    });\n\n    // Secure Two Slots: 1 + 10\n    strategies.push({\n        id: 'L65_slot1_10_double_lock',\n        name: 'Secure Slots 1+10 (30%)',\n        description: 'Reset until slot 1 succeeds, then reset until slot 10 succeeds (both 30%). Then 30% on slot 5, 70% on others. High damage floor.',\n        selectScroll: (slot) => {\n            if (slot === 1 || slot === 10) return 'L65_30';\n            if (slot === 5) return 'L65_30';\n            return 'L65_70';\n        },\n        shouldResetEarly: (slotResults, currentSlot) => {\n            // Reset if slot 1 fails\n            if (currentSlot === 1 && slotResults.length >= 1) {\n                const slot1 = slotResults[0];\n                if (!slot1.success && !slot1.unfunded) {\n                    return true;\n                }\n            }\n            // Reset if slot 10 fails (after slot 1 succeeded)\n            if (currentSlot === 10 && slotResults.length >= 10) {\n                const slot1 = slotResults[0];\n                const slot10 = slotResults[9];\n                if (slot1.success && !slot10.success && !slot10.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: () => false\n    });\n\n    // Secure Two Slots: 1 + 5\n    strategies.push({\n        id: 'L65_slot1_5_double_lock',\n        name: 'Secure Slots 1+5 (30%)',\n        description: 'Reset until slot 1 succeeds, then reset until slot 5 succeeds (both 30%). Then 30% on slot 10, 70% on others. Medium budget.',\n        selectScroll: (slot) => {\n            if (slot === 1 || slot === 5) return 'L65_30';\n            if (slot === 10) return 'L65_30';\n            return 'L65_70';\n        },\n        shouldResetEarly: (slotResults, currentSlot) => {\n            // Reset if slot 1 fails\n            if (currentSlot === 1 && slotResults.length >= 1) {\n                const slot1 = slotResults[0];\n                if (!slot1.success && !slot1.unfunded) {\n                    return true;\n                }\n            }\n            // Reset if slot 5 fails (after slot 1 succeeded)\n            if (currentSlot === 5 && slotResults.length >= 5) {\n                const slot1 = slotResults[0];\n                const slot5 = slotResults[4];\n                if (slot1.success && !slot5.success && !slot5.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: () => false\n    });\n\n    // Secure All Three Key Slots\n    strategies.push({\n        id: 'L65_triple_lock_1_5_10',\n        name: 'Secure All Three 30% (1+5+10)',\n        description: 'Reset until slots 1, 5, and 10 all succeed sequentially (all 30%). 70% on others. High budget, guarantees 3x 30% success.',\n        selectScroll: (slot) => {\n            if (slot === 1 || slot === 5 || slot === 10) return 'L65_30';\n            return 'L65_70';\n        },\n        shouldResetEarly: (slotResults, currentSlot) => {\n            // Reset if slot 1 fails\n            if (currentSlot === 1 && slotResults.length >= 1) {\n                const slot1 = slotResults[0];\n                if (!slot1.success && !slot1.unfunded) {\n                    return true;\n                }\n            }\n            // Reset if slot 5 fails (after slot 1 succeeded)\n            if (currentSlot === 5 && slotResults.length >= 5) {\n                const slot1 = slotResults[0];\n                const slot5 = slotResults[4];\n                if (slot1.success && !slot5.success && !slot5.unfunded) {\n                    return true;\n                }\n            }\n            // Reset if slot 10 fails (after slots 1 and 5 succeeded)\n            if (currentSlot === 10 && slotResults.length >= 10) {\n                const slot1 = slotResults[0];\n                const slot5 = slotResults[4];\n                const slot10 = slotResults[9];\n                if (slot1.success && slot5.success && !slot10.success && !slot10.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: () => false\n    });\n\n    // Secure Slot 1, then All 30%\n    strategies.push({\n        id: 'L65_slot1_lock_all_30',\n        name: 'Secure Slot 1 (30%) + All 30%',\n        description: 'Reset until slot 1 succeeds with 30%, then use 30% L65 for ALL remaining slots. High damage amp potential, high budget required.',\n        selectScroll: () => 'L65_30',\n        shouldResetEarly: (slotResults, currentSlot) => {\n            if (currentSlot === 1 && slotResults.length >= 1) {\n                const slot1 = slotResults[0];\n                if (!slot1.success && !slot1.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: () => false\n    });\n\n    // Secure Slot 1 + Require Damage Amp\n    strategies.push({\n        id: 'L65_slot1_lock_amp_0_5',\n        name: 'Secure Slot 1 (30%) + 0.5% Amp',\n        description: 'Reset until slot 1 succeeds with 30%, then 30% on slots 5&10, 70% elsewhere. Also reset if total damage amp < 0.5%. High budget.',\n        selectScroll: (slot) => {\n            if (slot === 1) return 'L65_30';\n            if (slot === 5 || slot === 10) return 'L65_30';\n            return 'L65_70';\n        },\n        shouldResetEarly: (slotResults, currentSlot) => {\n            if (currentSlot === 1 && slotResults.length >= 1) {\n                const slot1 = slotResults[0];\n                if (!slot1.success && !slot1.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: (result) => {\n            return result.totalDamageAmp < 0.5;\n        }\n    });\n\n    // Secure Slot 1 + Require Bonus Success\n    strategies.push({\n        id: 'L65_slot1_lock_bonus_retry',\n        name: 'Secure Slot 1 (30%) + Bonus Retry',\n        description: 'Reset until slot 1 succeeds with 30%, then 30% on slots 5&10, 70% elsewhere. Also reset if both bonus slots (5&10) fail. Medium budget.',\n        selectScroll: (slot) => {\n            if (slot === 1) return 'L65_30';\n            if (slot === 5 || slot === 10) return 'L65_30';\n            return 'L65_70';\n        },\n        shouldResetEarly: (slotResults, currentSlot) => {\n            if (currentSlot === 1 && slotResults.length >= 1) {\n                const slot1 = slotResults[0];\n                if (!slot1.success && !slot1.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: (result) => {\n            // Reset if both slot 5 and slot 10 failed\n            const slot5 = result.slotResults.find(s => s.slot === 5);\n            const slot10 = result.slotResults.find(s => s.slot === 10);\n            if (slot5 && slot10 && !slot5.unfunded && !slot10.unfunded) {\n                if (!slot5.success && !slot10.success) {\n                    return true;\n                }\n            }\n            return false;\n        }\n    });\n\n    // Secure Slot 1 + Require High Success Rate\n    strategies.push({\n        id: 'L65_slot1_lock_8plus',\n        name: 'Secure Slot 1 (30%) + 8+ Successes',\n        description: 'Reset until slot 1 succeeds with 30%, then 30% on slots 5&10, 70% elsewhere. Also reset if <8 total successes. Very high budget.',\n        selectScroll: (slot) => {\n            if (slot === 1) return 'L65_30';\n            if (slot === 5 || slot === 10) return 'L65_30';\n            return 'L65_70';\n        },\n        shouldResetEarly: (slotResults, currentSlot) => {\n            if (currentSlot === 1 && slotResults.length >= 1) {\n                const slot1 = slotResults[0];\n                if (!slot1.success && !slot1.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: (result) => {\n            return result.successfulSlots < 8;\n        }\n    });\n\n    return strategies;\n}\n\n/**\n * Create strategy variations for L85 scrolls\n */\nexport function createL85Strategies(): ScrollStrategy[] {\n    const strategies: ScrollStrategy[] = [];\n\n    // Base strategy: Slot 1 15% Lock-In\n    strategies.push({\n        id: 'L85_slot1_15_lock',\n        name: 'Slot 1 15% Lock-In (5/10 15% - Rest 70%)',\n        description: '15% L85 on slot 1, reset until success. Then 15% on slots 5&10, 70% on others. No resets after slot 1 succeeds.',\n        selectScroll: (slot) => {\n            if (slot === 1) return 'L85_15';\n            if (slot === 5 || slot === 10) return 'L85_15';\n            return 'L85_70';\n        },\n        shouldResetEarly: (slotResults, currentSlot) => {\n            if (currentSlot === 1 && slotResults.length >= 1) {\n                const slot1 = slotResults[0];\n                if (!slot1.success && !slot1.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: () => false\n    });\n\n    // Base strategy: Slot 1 and 2 15% Lock-In\n    strategies.push({\n        id: 'L85_slot12_15_lock',\n        name: 'Slot 1+2 15% Lock-In (5/10 15% - Rest 70%)',\n        description: '15% L85 on slot 1 and 2, reset until success on both. Then 15% on slots 5&10, 70% on others. No resets after slot 2 succeeds.',\n        selectScroll: (slot) => {\n            if (slot === 1) return 'L85_15';\n            if (slot === 2) return 'L85_15';\n            if (slot === 5 || slot === 10) return 'L85_15';\n            return 'L85_70';\n        },\n        shouldResetEarly: (slotResults, currentSlot) => {\n            if (currentSlot === 1 && slotResults.length >= 1) {\n                const slot1 = slotResults[0];\n                if (!slot1.success && !slot1.unfunded) {\n                    return true;\n                }\n            }\n\n            if (currentSlot === 2 && slotResults.length >= 2) {\n                const slot2 = slotResults[1];\n                if (!slot2.success && !slot2.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: () => false\n    });\n\n    // Base strategy: Slot 1 and 2 and 3 15% Lock-In\n    strategies.push({\n        id: 'L85_slot123_15_lock',\n        name: 'Slot 1+2+3 15% Lock-In (5/10 15% - Rest 70%)',\n        description: '15% L85 on slot 1, 2 and 3, reset until success on all. Then 15% on slots 5&10, 70% on others. No resets after slot 2 succeeds.',\n        selectScroll: (slot) => {\n            if (slot === 1) return 'L85_15';\n            if (slot === 2) return 'L85_15';\n            if (slot === 3) return 'L85_15';\n            if (slot === 5 || slot === 10) return 'L85_15';\n            return 'L85_70';\n        },\n        shouldResetEarly: (slotResults, currentSlot) => {\n            if (currentSlot === 1 && slotResults.length >= 1) {\n                const slot1 = slotResults[0];\n                if (!slot1.success && !slot1.unfunded) {\n                    return true;\n                }\n            }\n\n            if (currentSlot === 2 && slotResults.length >= 2) {\n                const slot2 = slotResults[1];\n                if (!slot2.success && !slot2.unfunded) {\n                    return true;\n                }\n            }\n\n            if (currentSlot === 3 && slotResults.length >= 3) {\n                const slot3 = slotResults[2];\n                if (!slot3.success && !slot3.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: () => false\n    });\n\n    // Slot 1 Lock + All 30%\n    strategies.push({\n        id: 'L85_slot1_lock_then_30',\n        name: 'Slot 1 15% Lock-In (5/10 15% - Rest 30%)',\n        description: '15% on slot 1, reset until success. Then 15% on slots 5&10, 30% on others. No resets after slot 1 succeeds.',\n        selectScroll: (slot) => {\n                if (slot === 1) return 'L85_15';\n                if (slot === 5 || slot === 10) return 'L85_15';\n                return 'L85_30';\n        },\n        shouldResetEarly: (slotResults, currentSlot) => {\n            if (currentSlot === 1 && slotResults.length >= 1) {\n                const slot1 = slotResults[0];\n                if (!slot1.success && !slot1.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: () => false\n    });\n\n    // Slot 1 Lock + High Success Requirement\n    strategies.push({\n        id: 'L85_slot1_lock_7plus',\n        name: 'Slot 1 15% Lock-In (5/10 15% - Rest 70% - Reset <7 Successes)',\n        description: 'Lock slot 1, then 15% on slots 5&10, 70% elsewhere. Reset if <7 total successes. Very high budget.',\n        selectScroll: (slot) => {\n            if (slot === 1) return 'L85_15';\n            if (slot === 5 || slot === 10) return 'L85_15';\n            return 'L85_70';\n        },\n        shouldResetEarly: (slotResults, currentSlot) => {\n            if (currentSlot === 1 && slotResults.length >= 1) {\n                const slot1 = slotResults[0];\n                if (!slot1.success && !slot1.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: (result) => {\n            return result.successfulSlots < 7;\n        }\n    });\n\n    // Double Lock: Slot 1 + Slot 5\n    strategies.push({\n        id: 'L85_slot1_5_double_lock',\n        name: 'Slot 1+5 15% Lock-In (10 15% - Rest 70%)',\n        description: 'Reset until slot 1 succeeds with a 15%, 70% until slot 5, reset until slot 15% suceeds here too, 70% until slot 10 where finish off with 15%.',\n        selectScroll: (slot) => {\n            if (slot === 1 || slot === 5) return 'L85_15';\n            if (slot === 10) return 'L85_15';\n            return 'L85_70';\n        },\n        shouldResetEarly: (slotResults, currentSlot) => {\n            // Reset if slot 1 fails\n            if (currentSlot === 1 && slotResults.length >= 1) {\n                const slot1 = slotResults[0];\n                if (!slot1.success && !slot1.unfunded) {\n                    return true;\n                }\n            }\n            // Reset if slot 5 fails (after slot 1 succeeded)\n            if (currentSlot === 5 && slotResults.length >= 5) {\n                const slot1 = slotResults[0];\n                const slot5 = slotResults[4];\n                if (slot1.success && !slot5.success && !slot5.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: () => false\n    });\n\n    // Slot 1 Lock + All 15% (Ultra Aggressive)\n    strategies.push({\n        id: 'L85_slot1_lock_all_15',\n        name: 'Slot 1 15% Lock-In + All 15%',\n        description: 'Lock slot 1, then use 15% L85 for ALL remaining slots.',\n        selectScroll: () => 'L85_15',\n        shouldResetEarly: (slotResults, currentSlot) => {\n            if (currentSlot === 1 && slotResults.length >= 1) {\n                const slot1 = slotResults[0];\n                if (!slot1.success && !slot1.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: () => false\n    });\n\n     strategies.push({\n        id: 'L85_slot1_lock_all_30',\n        name: 'Slot 1 15% Lock-In + All 30%',\n        description: '15% on slot 1, reset until success. Then 30% on all other slots. No resets after slot 1 succeeds.',\n          selectScroll: (slot) => {\n            if (slot === 1) return 'L85_15';\n            return 'L85_30';\n        },\n        shouldResetEarly: (slotResults, currentSlot) => {\n            if (currentSlot === 1 && slotResults.length >= 1) {\n                const slot1 = slotResults[0];\n                if (!slot1.success && !slot1.unfunded) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        shouldReset: () => false\n    });\n\n    return strategies;\n}\n\n// ============================================================================\n// DAMAGE CALCULATIONS\n// ============================================================================\n\n/**\n * Calculate damage gain from scroll results\n */\nexport function calculateScrollDamageGain(avgAttack: number, avgDamageAmp: number): DamageGainResult {\n    // Get base stats from loadout store\n    const baseStats = loadoutStore.getBaseStats();\n\n    // Use StatCalculationService to apply scroll bonuses (auto-fetches weaponAttackBonus)\n    const service = new StatCalculationService(baseStats);\n    service.add(STAT.ATTACK.id, avgAttack);\n    service.add(STAT.DAMAGE_AMP.id, avgDamageAmp);\n\n    const baseDPS = service.baseBossDPS;\n    const newDPS = service.computeDPS('boss');\n    const dpsGain = ((newDPS - baseDPS) / baseDPS * 100);\n    const weaponAttackBonus = service.weaponAttackBonus;\n    const effectiveAttackIncrease = avgAttack * (1 + weaponAttackBonus / 100);\n\n    return {\n        baseDPS,\n        newDPS,\n        dpsGain,\n        effectiveAttackIncrease\n    };\n}\n"],
  "mappings": "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",
  "names": []
}
