{
  "version": 3,
  "sources": ["base-page.ts"],
  "sourcesContent": ["/**\n * BasePage - Reusable page lifecycle pattern\n *\n * All pages should extend this class to get consistent:\n * - Lifecycle hooks (onBeforePageVisible, onPageVisible)\n * - Tab management (activateTab, updateSubmenuStates)\n * - URL navigation helpers\n *\n * Usage:\n * class LoadoutPage extends BasePage {\n *   constructor() {\n *     super('setup', 'base-stats');\n *   }\n * }\n */\n\n// Type declarations for window functions used by BasePage\ndeclare global {\n    interface Window {\n        navigateToTab: (pageName: string, tabName: string) => void;\n    }\n}\n\nexport abstract class BasePage {\n    protected currentTab: string | null = null;\n    protected readonly pageId: string;\n    protected readonly defaultTab: string;\n\n    constructor(pageId: string, defaultTab: string) {\n        this.pageId = pageId;\n        this.defaultTab = defaultTab;\n    }\n\n    /**\n     * Lifecycle: Called before page is visible (prevents flash of unstyled content)\n     * Set CSS classes and states BEFORE the page renders\n     */\n    onBeforePageVisible(tabName: string | null): void {\n        const targetTab = tabName || this.defaultTab;\n\n        // Set active class on sidebar nav item\n        const navItem = document.querySelector(`[data-page=\"${this.pageId}\"]`);\n        navItem?.classList.add('active');\n\n        // Expand submenu if on mobile\n        this.expandSubmenuIfNeeded();\n\n        // Update submenu active states\n        this.updateSubmenuActiveStates(targetTab);\n    }\n\n    /**\n     * Lifecycle: Called after page is visible\n     * Initialize tab, load data, attach listeners\n     */\n    onPageVisible(tabName: string | null): void {\n        const targetTab = tabName || this.defaultTab;\n        this.currentTab = targetTab;\n\n        // Activate the tab (update UI)\n        this.activateTab(targetTab);\n    }\n\n    /**\n     * Switch to a specific tab (called by tab button onclick)\n     * Updates URL via router, which triggers lifecycle hooks\n     */\n    switchToTab(tabName: string): void {\n        // Update URL via router (router handles the hash and calls us back)\n        if (window.navigateToTab) {\n            window.navigateToTab(this.pageId, tabName);\n        }\n    }\n\n    /**\n     * Activate a tab UI without changing URL\n     * Internal method called by onPageVisible\n     */\n    protected activateTab(tabName: string): void {\n        const tabClassPattern = `${this.pageId}-tab-content`;\n        const buttonClassPattern = `${this.pageId}-tab-button`;\n\n        // Hide all tab content for this page\n        document.querySelectorAll(`[class^=\"${tabClassPattern}\"]`).forEach(el => {\n            el.classList.remove('active');\n        });\n\n        // Show target tab content\n        const targetTab = document.getElementById(`${this.pageId}-${tabName}`);\n        targetTab?.classList.add('active');\n\n        // Update button states\n        document.querySelectorAll(`[class^=\"${buttonClassPattern}\"]`).forEach(btn => {\n            btn.classList.remove('active');\n            const onclickAttr = btn.getAttribute('onclick');\n            if (onclickAttr && onclickAttr.includes(`'${tabName}'`)) {\n                btn.classList.add('active');\n            }\n        });\n\n        // Update submenu active states\n        this.updateSubmenuActiveStates(tabName);\n    }\n\n    /**\n     * Update submenu item active states for the current page\n     */\n    protected updateSubmenuActiveStates(tabName: string): void {\n        // Remove active from ALL submenu items across all pages\n        document.querySelectorAll('.sidebar-submenu-item').forEach(item => {\n            item.classList.remove('active');\n        });\n\n        // Activate the specific submenu item for the current page/tab\n        const submenu = document.getElementById(`submenu-${this.pageId}`);\n        if (!submenu) return;\n\n        const items = submenu.querySelectorAll('.sidebar-submenu-item');\n        items.forEach(item => {\n            const onclickAttr = item.getAttribute('onclick');\n            if (onclickAttr && onclickAttr.includes(`'${tabName}'`)) {\n                item.classList.add('active');\n            }\n        });\n    }\n\n    /**\n     * Expand submenu if on mobile (width < 1024px)\n     */\n    protected expandSubmenuIfNeeded(): void {\n        const isMobile = window.innerWidth < 1024;\n\n        if (isMobile) {\n            const submenu = document.getElementById(`submenu-${this.pageId}`);\n            const navItem = document.querySelector(`[data-page=\"${this.pageId}\"]`);\n\n            submenu?.classList.add('expanded');\n            navItem?.classList.add('expanded');\n        }\n    }\n\n    /**\n     * Get the current tab name\n     */\n    getCurrentTab(): string | null {\n        return this.currentTab;\n    }\n\n    /**\n     * Get the page ID\n     */\n    getPageId(): string {\n        return this.pageId;\n    }\n\n    /**\n     * Get the default tab name\n     */\n    getDefaultTab(): string {\n        return this.defaultTab;\n    }\n}\n"],
  "mappings": "AAuBO,MAAe,SAAS;AAAA,EAK3B,YAAY,QAAgB,YAAoB;AAJhD,SAAU,aAA4B;AAKlC,SAAK,SAAS;AACd,SAAK,aAAa;AAAA,EACtB;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,oBAAoB,SAA8B;AAC9C,UAAM,YAAY,WAAW,KAAK;AAGlC,UAAM,UAAU,SAAS,cAAc,eAAe,KAAK,MAAM,IAAI;AACrE,aAAS,UAAU,IAAI,QAAQ;AAG/B,SAAK,sBAAsB;AAG3B,SAAK,0BAA0B,SAAS;AAAA,EAC5C;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,cAAc,SAA8B;AACxC,UAAM,YAAY,WAAW,KAAK;AAClC,SAAK,aAAa;AAGlB,SAAK,YAAY,SAAS;AAAA,EAC9B;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,YAAY,SAAuB;AAE/B,QAAI,OAAO,eAAe;AACtB,aAAO,cAAc,KAAK,QAAQ,OAAO;AAAA,IAC7C;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA,EAMU,YAAY,SAAuB;AACzC,UAAM,kBAAkB,GAAG,KAAK,MAAM;AACtC,UAAM,qBAAqB,GAAG,KAAK,MAAM;AAGzC,aAAS,iBAAiB,YAAY,eAAe,IAAI,EAAE,QAAQ,QAAM;AACrE,SAAG,UAAU,OAAO,QAAQ;AAAA,IAChC,CAAC;AAGD,UAAM,YAAY,SAAS,eAAe,GAAG,KAAK,MAAM,IAAI,OAAO,EAAE;AACrE,eAAW,UAAU,IAAI,QAAQ;AAGjC,aAAS,iBAAiB,YAAY,kBAAkB,IAAI,EAAE,QAAQ,SAAO;AACzE,UAAI,UAAU,OAAO,QAAQ;AAC7B,YAAM,cAAc,IAAI,aAAa,SAAS;AAC9C,UAAI,eAAe,YAAY,SAAS,IAAI,OAAO,GAAG,GAAG;AACrD,YAAI,UAAU,IAAI,QAAQ;AAAA,MAC9B;AAAA,IACJ,CAAC;AAGD,SAAK,0BAA0B,OAAO;AAAA,EAC1C;AAAA;AAAA;AAAA;AAAA,EAKU,0BAA0B,SAAuB;AAEvD,aAAS,iBAAiB,uBAAuB,EAAE,QAAQ,UAAQ;AAC/D,WAAK,UAAU,OAAO,QAAQ;AAAA,IAClC,CAAC;AAGD,UAAM,UAAU,SAAS,eAAe,WAAW,KAAK,MAAM,EAAE;AAChE,QAAI,CAAC,QAAS;AAEd,UAAM,QAAQ,QAAQ,iBAAiB,uBAAuB;AAC9D,UAAM,QAAQ,UAAQ;AAClB,YAAM,cAAc,KAAK,aAAa,SAAS;AAC/C,UAAI,eAAe,YAAY,SAAS,IAAI,OAAO,GAAG,GAAG;AACrD,aAAK,UAAU,IAAI,QAAQ;AAAA,MAC/B;AAAA,IACJ,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA,EAKU,wBAA8B;AACpC,UAAM,WAAW,OAAO,aAAa;AAErC,QAAI,UAAU;AACV,YAAM,UAAU,SAAS,eAAe,WAAW,KAAK,MAAM,EAAE;AAChE,YAAM,UAAU,SAAS,cAAc,eAAe,KAAK,MAAM,IAAI;AAErE,eAAS,UAAU,IAAI,UAAU;AACjC,eAAS,UAAU,IAAI,UAAU;AAAA,IACrC;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKA,gBAA+B;AAC3B,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA,EAKA,YAAoB;AAChB,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA,EAKA,gBAAwB;AACpB,WAAO,KAAK;AAAA,EAChB;AACJ;",
  "names": []
}
