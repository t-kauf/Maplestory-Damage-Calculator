{
  "version": 3,
  "sources": ["base-page.ts"],
  "sourcesContent": ["/**\r\n * BasePage - Reusable page lifecycle pattern\r\n *\r\n * All pages should extend this class to get consistent:\r\n * - Lifecycle hooks (onBeforePageVisible, onPageVisible)\r\n * - Tab management (activateTab, updateSubmenuStates)\r\n * - URL navigation helpers\r\n *\r\n * Usage:\r\n * class LoadoutPage extends BasePage {\r\n *   constructor() {\r\n *     super('setup', 'base-stats');\r\n *   }\r\n * }\r\n */\r\n\r\n// Type declarations for window functions used by BasePage\r\ndeclare global {\r\n    interface Window {\r\n        navigateToTab: (pageName: string, tabName: string) => void;\r\n    }\r\n}\r\n\r\nexport abstract class BasePage {\r\n    protected currentTab: string | null = null;\r\n    protected readonly pageId: string;\r\n    protected readonly defaultTab: string;\r\n\r\n    constructor(pageId: string, defaultTab: string) {\r\n        this.pageId = pageId;\r\n        this.defaultTab = defaultTab;\r\n    }\r\n\r\n    /**\r\n     * Lifecycle: Called before page is visible (prevents flash of unstyled content)\r\n     * Set CSS classes and states BEFORE the page renders\r\n     */\r\n    onBeforePageVisible(tabName: string | null): void {\r\n        const targetTab = tabName || this.defaultTab;\r\n\r\n        // Set active class on sidebar nav item\r\n        const navItem = document.querySelector(`[data-page=\"${this.pageId}\"]`);\r\n        navItem?.classList.add('active');\r\n\r\n        // Expand submenu if on mobile\r\n        this.expandSubmenuIfNeeded();\r\n\r\n        // Update submenu active states\r\n        this.updateSubmenuActiveStates(targetTab);\r\n    }\r\n\r\n    /**\r\n     * Lifecycle: Called after page is visible\r\n     * Initialize tab, load data, attach listeners\r\n     */\r\n    onPageVisible(tabName: string | null): void {\r\n        const targetTab = tabName || this.defaultTab;\r\n        this.currentTab = targetTab;\r\n\r\n        // Activate the tab (update UI)\r\n        this.activateTab(targetTab);\r\n    }\r\n\r\n    /**\r\n     * Switch to a specific tab (called by tab button onclick)\r\n     * Updates URL via router, which triggers lifecycle hooks\r\n     */\r\n    switchToTab(tabName: string): void {\r\n        // Update URL via router (router handles the hash and calls us back)\r\n        if (window.navigateToTab) {\r\n            window.navigateToTab(this.pageId, tabName);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Activate a tab UI without changing URL\r\n     * Internal method called by onPageVisible\r\n     */\r\n    protected activateTab(tabName: string): void {\r\n        const tabClassPattern = `${this.pageId}-tab-content`;\r\n        const buttonClassPattern = `${this.pageId}-tab-button`;\r\n\r\n        // Hide all tab content for this page\r\n        document.querySelectorAll(`[class^=\"${tabClassPattern}\"]`).forEach(el => {\r\n            el.classList.remove('active');\r\n        });\r\n\r\n        // Show target tab content\r\n        const targetTab = document.getElementById(`${this.pageId}-${tabName}`);\r\n        targetTab?.classList.add('active');\r\n\r\n        // Update button states\r\n        document.querySelectorAll(`[class^=\"${buttonClassPattern}\"]`).forEach(btn => {\r\n            btn.classList.remove('active');\r\n            const onclickAttr = btn.getAttribute('onclick');\r\n            if (onclickAttr && onclickAttr.includes(`'${tabName}'`)) {\r\n                btn.classList.add('active');\r\n            }\r\n        });\r\n\r\n        // Update submenu active states\r\n        this.updateSubmenuActiveStates(tabName);\r\n    }\r\n\r\n    /**\r\n     * Update submenu item active states for the current page\r\n     */\r\n    protected updateSubmenuActiveStates(tabName: string): void {\r\n        // Remove active from ALL submenu items across all pages\r\n        document.querySelectorAll('.sidebar-submenu-item').forEach(item => {\r\n            item.classList.remove('active');\r\n        });\r\n\r\n        // Activate the specific submenu item for the current page/tab\r\n        const submenu = document.getElementById(`submenu-${this.pageId}`);\r\n        if (!submenu) return;\r\n\r\n        const items = submenu.querySelectorAll('.sidebar-submenu-item');\r\n        items.forEach(item => {\r\n            const onclickAttr = item.getAttribute('onclick');\r\n            if (onclickAttr && onclickAttr.includes(`'${tabName}'`)) {\r\n                item.classList.add('active');\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Expand submenu if on mobile (width < 1024px)\r\n     */\r\n    protected expandSubmenuIfNeeded(): void {\r\n        const isMobile = window.innerWidth < 1024;\r\n\r\n        if (isMobile) {\r\n            const submenu = document.getElementById(`submenu-${this.pageId}`);\r\n            const navItem = document.querySelector(`[data-page=\"${this.pageId}\"]`);\r\n\r\n            submenu?.classList.add('expanded');\r\n            navItem?.classList.add('expanded');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get the current tab name\r\n     */\r\n    getCurrentTab(): string | null {\r\n        return this.currentTab;\r\n    }\r\n\r\n    /**\r\n     * Get the page ID\r\n     */\r\n    getPageId(): string {\r\n        return this.pageId;\r\n    }\r\n\r\n    /**\r\n     * Get the default tab name\r\n     */\r\n    getDefaultTab(): string {\r\n        return this.defaultTab;\r\n    }\r\n}\r\n"],
  "mappings": "AAuBO,MAAe,SAAS;AAAA,EAK3B,YAAY,QAAgB,YAAoB;AAJhD,SAAU,aAA4B;AAKlC,SAAK,SAAS;AACd,SAAK,aAAa;AAAA,EACtB;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,oBAAoB,SAA8B;AAC9C,UAAM,YAAY,WAAW,KAAK;AAGlC,UAAM,UAAU,SAAS,cAAc,eAAe,KAAK,MAAM,IAAI;AACrE,aAAS,UAAU,IAAI,QAAQ;AAG/B,SAAK,sBAAsB;AAG3B,SAAK,0BAA0B,SAAS;AAAA,EAC5C;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,cAAc,SAA8B;AACxC,UAAM,YAAY,WAAW,KAAK;AAClC,SAAK,aAAa;AAGlB,SAAK,YAAY,SAAS;AAAA,EAC9B;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,YAAY,SAAuB;AAE/B,QAAI,OAAO,eAAe;AACtB,aAAO,cAAc,KAAK,QAAQ,OAAO;AAAA,IAC7C;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA,EAMU,YAAY,SAAuB;AACzC,UAAM,kBAAkB,GAAG,KAAK,MAAM;AACtC,UAAM,qBAAqB,GAAG,KAAK,MAAM;AAGzC,aAAS,iBAAiB,YAAY,eAAe,IAAI,EAAE,QAAQ,QAAM;AACrE,SAAG,UAAU,OAAO,QAAQ;AAAA,IAChC,CAAC;AAGD,UAAM,YAAY,SAAS,eAAe,GAAG,KAAK,MAAM,IAAI,OAAO,EAAE;AACrE,eAAW,UAAU,IAAI,QAAQ;AAGjC,aAAS,iBAAiB,YAAY,kBAAkB,IAAI,EAAE,QAAQ,SAAO;AACzE,UAAI,UAAU,OAAO,QAAQ;AAC7B,YAAM,cAAc,IAAI,aAAa,SAAS;AAC9C,UAAI,eAAe,YAAY,SAAS,IAAI,OAAO,GAAG,GAAG;AACrD,YAAI,UAAU,IAAI,QAAQ;AAAA,MAC9B;AAAA,IACJ,CAAC;AAGD,SAAK,0BAA0B,OAAO;AAAA,EAC1C;AAAA;AAAA;AAAA;AAAA,EAKU,0BAA0B,SAAuB;AAEvD,aAAS,iBAAiB,uBAAuB,EAAE,QAAQ,UAAQ;AAC/D,WAAK,UAAU,OAAO,QAAQ;AAAA,IAClC,CAAC;AAGD,UAAM,UAAU,SAAS,eAAe,WAAW,KAAK,MAAM,EAAE;AAChE,QAAI,CAAC,QAAS;AAEd,UAAM,QAAQ,QAAQ,iBAAiB,uBAAuB;AAC9D,UAAM,QAAQ,UAAQ;AAClB,YAAM,cAAc,KAAK,aAAa,SAAS;AAC/C,UAAI,eAAe,YAAY,SAAS,IAAI,OAAO,GAAG,GAAG;AACrD,aAAK,UAAU,IAAI,QAAQ;AAAA,MAC/B;AAAA,IACJ,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA,EAKU,wBAA8B;AACpC,UAAM,WAAW,OAAO,aAAa;AAErC,QAAI,UAAU;AACV,YAAM,UAAU,SAAS,eAAe,WAAW,KAAK,MAAM,EAAE;AAChE,YAAM,UAAU,SAAS,cAAc,eAAe,KAAK,MAAM,IAAI;AAErE,eAAS,UAAU,IAAI,UAAU;AACjC,eAAS,UAAU,IAAI,UAAU;AAAA,IACrC;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKA,gBAA+B;AAC3B,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA,EAKA,YAAoB;AAChB,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA,EAKA,gBAAwB;AACpB,WAAO,KAAK;AAAA,EAChB;AACJ;",
  "names": []
}
