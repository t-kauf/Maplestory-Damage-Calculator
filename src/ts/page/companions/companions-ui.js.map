{
  "version": 3,
  "sources": ["companions-ui.ts"],
  "sourcesContent": ["/**\n * Companion System UI\n * Merged from companions-ui.js and companions-presets-ui.js\n * Handles all HTML generation and event handling for the companions tab\n */\n\nimport { getCompanionEffects, getMaxCompanionLevel } from '@ts/services/index.js';\nimport { loadoutStore } from '@ts/store/loadout.store.js';\nimport { calculateBothDpsDifferences, presetHasAnyCompanion, generateOptimalPreset, swapCompanionPresetEffects } from './companion.js';\nimport type {\n    CompanionKey,\n    CompanionPresetId,\n    CompanionPreset,\n    CompanionData,\n    CompanionEffects,\n    CompanionRarity,\n    ProcessedEffect,\n    DpsComparisonResult,\n    BothDpsResults,\n    CompanionClass\n} from '@ts/types/page/companions/companions.types';\nimport { CLASS_DISPLAY_NAMES, RARITY_CONFIG } from '@ts/types/page/companions/companions.types';\nimport { debounce } from '@ts/utils/event-emitter.js';\n\n// ============================================================================\n// STATE TRACKING\n// ============================================================================\n\n// Track currently selected companion for re-opening detail panel after updates\ninterface CurrentCompanion {\n    companionKey: CompanionKey;\n    className: CompanionClass;\n    rarity: CompanionRarity;\n    borderColor: string;\n    color: string;\n}\n\nlet currentCompanion: CurrentCompanion | null = null;\n\n// ============================================================================\n// INITIALIZATION FUNCTIONS\n// ============================================================================\n\n/**\n * Initialize the companions UI\n */\nexport function initializeCompanionsUI(): void {\n    renderCompanionsGrid();\n    updateSummary();\n    initializePresetsUI();\n}\n\n/**\n * Load companions UI from saved state\n */\nexport function loadCompanionsUI(): void {\n    // Load and update UI based on store state\n    // (Individual components update themselves via event listeners)\n}\n\n/**\n * Attach event listeners to companion-related elements\n */\nexport function attachCompanionsEventListeners(): void {\n    attachCompanionIconListeners();\n    attachPresetEventListeners();\n    attachClickOutsideListener();\n\n    loadoutStore.on('stat:changed', debounce((_) => {\n        refreshCompanionsUI();\n    }, 3000));\n}\n\n/**\n * Refresh the companions UI\n */\nexport function refreshCompanionsUI(): void {\n    renderCompanionsGrid();\n    updateSummary();\n    refreshPresetsUI();\n}\n\n// ============================================================================\n// RENDER FUNCTIONS - GRID & DETAIL PANEL\n// ============================================================================\n\n/**\n * Render the companions grid\n */\nfunction renderCompanionsGrid(): void {\n    const container = document.getElementById('companions-grid-container');\n    if (!container) return;\n\n    // Render icon grid and detail panel as separate flex items\n    let html = `\n        <!-- Icon Grid wrapper -->\n        <div class=\"companions-icon-grid-wrapper\">\n            <div class=\"companions-icon-grid\">\n                ${renderIconGrid()}\n            </div>\n\n            <!-- Clear Slot Button (shown when slot is selected) -->\n            <div id=\"clear-slot-selection-container\" style=\"display: none; margin-top: 15px;\">\n                <button id=\"clear-slot-selection-btn\" onclick=\"window.clearSelectedSlotCompanion()\" style=\"\n                    padding: 10px 20px;\n                    background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(220, 38, 38, 0.1));\n                    border: 2px solid #ef4444;\n                    border-radius: 8px;\n                    color: #ef4444;\n                    font-weight: 600;\n                    font-size: 0.95em;\n                    cursor: pointer;\n                    transition: all 0.2s ease;\n                    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.2);\n                \" onmouseover=\"this.style.background='linear-gradient(135deg, rgba(239, 68, 68, 0.25), rgba(220, 38, 38, 0.2))'; this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 12px rgba(239, 68, 68, 0.3)';\"\n                   onmouseout=\"this.style.background='linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(220, 38, 38, 0.1))'; this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(239, 68, 68, 0.2)';\">\n                    \uD83D\uDDD1\uFE0F Clear Slot\n                </button>\n            </div>\n        </div>\n\n        <!-- Detail Panel -->\n        <div id=\"companion-detail-panel\" class=\"companions-detail-panel\">\n            <div id=\"companion-detail-content\">\n                ${renderDetailPlaceholder()}\n            </div>\n        </div>\n    `;\n\n    // Append to container without removing existing elements (like presets)\n    const presetsContainer = document.getElementById('companions-presets-container');\n    container.innerHTML = html;\n\n    // Re-append presets container if it existed\n    if (presetsContainer) {\n        container.appendChild(presetsContainer);\n    } else {\n        // Create presets container if it doesn't exist\n        const newPresetsContainer = document.createElement('div');\n        newPresetsContainer.id = 'companions-presets-container';\n        newPresetsContainer.className = 'companions-presets-panel';\n        container.appendChild(newPresetsContainer);\n    }\n\n    // Attach event listeners\n    attachCompanionIconListeners();\n}\n\n/**\n * Render placeholder for detail panel\n */\nfunction renderDetailPlaceholder(): string {\n    return `\n        <div style=\"\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            height: 300px;\n            color: var(--text-secondary);\n            text-align: center;\n        \">\n            <div style=\"font-size: 1.1em; font-weight: 500;\">Select a companion</div>\n            <div style=\"font-size: 0.9em; margin-top: 8px; opacity: 0.7;\">\n                Click any companion icon to view details and effects\n            </div>\n        </div>\n    `;\n}\n\n/**\n * Render the icon grid (all class-rarity combinations)\n */\nfunction renderIconGrid(): string {\n    let html = '';\n\n    // Create grid for all rarity-class combinations\n    Object.entries(RARITY_CONFIG).forEach(([rarity, config]) => {\n        config.classes.forEach(className => {\n            const companionKey: CompanionKey = `${className}-${rarity}` as CompanionKey;\n            const companionData = loadoutStore.getCompanion(companionKey);\n            const isUnlocked = companionData?.unlocked ?? false;\n            const level = companionData?.level ?? 1;\n\n            html += `\n                <div class=\"companion-icon\"\n                     data-companion=\"${companionKey}\"\n                     data-class=\"${className}\"\n                     data-rarity=\"${rarity}\"\n                     data-config-color=\"${config.color}\"\n                     data-config-border=\"${config.borderColor}\"\n                     style=\"\n                        width: 60px;\n                        height: 60px;\n                        background: linear-gradient(135deg, ${config.color}22, ${config.borderColor}44);\n                        border: 2px solid ${isUnlocked ? config.borderColor : '#666'};\n                        border-radius: 8px;\n                        cursor: pointer;\n                        transition: all 0.2s ease;\n                        opacity: ${isUnlocked ? '1' : '0.4'};\n                        filter: ${isUnlocked ? 'none' : 'grayscale(100%)'};\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        position: relative;\n                     \"\n                     onmouseover=\"this.style.transform='scale(1.1)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.3)';\"\n                     onmouseout=\"this.style.transform='scale(1)'; this.style.boxShadow='none';\">\n                    <img class=\"comp-image comp-${className}\" src=\"media/classes/${getClassPngName(className)}.png\" style=\"width: 45px; height: 45px; object-fit: contain;\">\n                    ${isUnlocked ? `\n                        <div class=\"companion-icon-level\" data-companion=\"${companionKey}\" style=\"position: absolute; top: 2px; right: 2px; font-size: 0.75em; color: white; font-weight: 900; text-shadow: 2px 2px 3px rgba(0,0,0,0.9);\">\n                            Lv.${level}\n                        </div>\n                    ` : ''}\n                </div>\n            `;\n        });\n    });\n\n    return html;\n}\n\n/**\n * Show the detail panel for a companion\n */\nfunction showDetailPanel(\n    companionKey: CompanionKey,\n    className: CompanionClass,\n    rarity: CompanionRarity,\n    borderColor: string,\n    color: string\n): void {\n    const panel = document.getElementById('companion-detail-panel');\n    const content = document.getElementById('companion-detail-content');\n    if (!panel || !content) return;\n\n    const companionData = loadoutStore.getCompanion(companionKey);\n\n    const displayName = CLASS_DISPLAY_NAMES[className];\n    const isUnlocked = companionData.unlocked;\n    const level = companionData.level || 1;\n    const maxLevel = getMaxCompanionLevel();\n\n    // Get companion effects\n    let inventoryEffectText = '';\n    let equipEffectText = '';\n\n    if (isUnlocked) {\n        const effects = getCompanionEffects(className, rarity, level);\n        if (effects) {\n            inventoryEffectText = formatEffects(effects.inventoryEffect);\n            equipEffectText = formatEffects(effects.equipEffect);\n        }\n    }\n\n    content.innerHTML = `\n        <!-- Gradient background with color at bottom - takes top 1/3 -->\n        <div style=\"\n            background: linear-gradient(to top, ${borderColor}88 0%, transparent 50%);\n            border-radius: 12px;\n            height: 265px;\n            width: 400px;\n            margin: -20px -20px 20px -20px;\n            position: relative;\n            pointer-events: none;\n            border: solid 1px ${borderColor}\n        \">\n            <!-- Class animated webp - much larger, centered -->\n            <div style=\"position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 400px; height: 400px;\">\n                <img class=\"comp-image comp-${className}\" src=\"media/classes/${getClassWebpName(className)}.webp\" style=\"width: 100%; height: 100%; object-fit: contain;\">\n            </div>\n\n            <!-- Class name - absolute bottom left -->\n            <div style=\"\n                position: absolute;\n                bottom: 12px;\n                left: 12px;\n                color: white;\n                font-size: 1.2em;\n                font-weight: bold;\n                text-shadow: 2px 2px 4px rgba(0,0,0,0.8);\n            \">${displayName}</div>\n\n            <!-- Rarity badge - absolute bottom right -->\n            <div style=\"\n                position: absolute;\n                bottom: 12px;\n                right: 12px;\n                background: ${borderColor};\n                color: white;\n                padding: 4px 12px;\n                border-radius: 12px;\n                font-size: 0.85em;\n                font-weight: 600;\n                box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n            \">${rarity}</div>\n        </div>\n\n        ${isUnlocked ? `\n            <!-- Level Input -->\n            <div style=\"margin-bottom: 20px;\">\n                <label style=\"\n                    display: block;\n                    margin-bottom: 8px;\n                    font-weight: 600;\n                    color: var(--text-primary);\n                \">Level</label>\n                <input type=\"number\"\n                       class=\"companion-level-input\"\n                       data-companion=\"${companionKey}\"\n                       value=\"${level}\"\n                       min=\"1\"\n                       max=\"${maxLevel}\"\n                       onchange=\"window.handleLevelChange('${companionKey}', this.value)\"\n                       style=\"\n                        width: 100%;\n                        padding: 10px;\n                        border: 2px solid ${borderColor};\n                        border-radius: 8px;\n                        background: var(--input-bg);\n                        color: var(--text-primary);\n                        text-align: center;\n                        font-size: 1.1em;\n                        font-weight: 600;\n                       \">\n            </div>\n\n            <!-- Two column layout: Effects and Lock button -->\n            <div style=\"display: flex; gap: 15px;\">\n                <!-- Left: Effects Display -->\n                <div style=\"\n                    flex: 1;\n                    border-top: 1px solid var(--border-color);\n                \">\n                    <h4 style=\"\n                        color: ${borderColor};\n                        margin: 0 0 10px 0;\n                        font-size: 1em;\n                        font-weight: 600;\n                    \">Effects</h4>\n\n                    ${inventoryEffectText ? `\n                        <div style=\"margin-bottom: 12px;\">\n                            <div style=\"\n                                font-weight: 600;\n                                color: var(--text-primary);\n                                margin-bottom: 4px;\n                                font-size: 0.9em;\n                            \">Inventory</div>\n                            <div style=\"\n                                font-size: 0.85em;\n                                color: var(--text-secondary);\n                                line-height: 1.5;\n                            \">${inventoryEffectText}</div>\n                        </div>\n                    ` : ''}\n\n                    ${equipEffectText ? `\n                        <div>\n                            <div style=\"\n                                font-weight: 600;\n                                color: var(--text-primary);\n                                margin-bottom: 4px;\n                                font-size: 0.9em;\n                            \">Equip</div>\n                            <div style=\"\n                                font-size: 0.85em;\n                                color: var(--text-secondary);\n                                line-height: 1.5;\n                            \">${equipEffectText}</div>\n                        </div>\n                    ` : ''}\n                </div>\n\n                <!-- Right: Lock/Unlock button -->\n                <div style=\"flex: 1; display: flex; align-items: flex-start;\">\n                    <button onclick=\"window.toggleCompanionLock('${companionKey}')\" style=\"\n                        width: 100%;\n                        padding: 12px;\n                        background: rgba(239, 68, 68, 0.15);\n                        border: 2px solid #ef4444;\n                        border-radius: 8px;\n                        color: #ef4444;\n                        font-weight: 600;\n                        cursor: pointer;\n                        transition: all 0.2s ease;\n                    \">\n                        \uD83D\uDD12 Lock Companion\n                    </button>\n                </div>\n            </div>\n        ` : `\n            <!-- Locked state: show unlock button -->\n            <div style=\"display: flex; justify-content: center; padding-top: 20px;\">\n                <button onclick=\"window.toggleCompanionLock('${companionKey}')\" style=\"\n                    width: 100%;\n                    padding: 12px;\n                    background: rgba(16, 185, 129, 0.15);\n                    border: 2px solid #10b981;\n                    border-radius: 8px;\n                    color: #10b981;\n                    font-weight: 600;\n                    cursor: pointer;\n                    transition: all 0.2s ease;\n                \">\n                    \uD83D\uDD13 Unlock Companion\n                </button>\n            </div>\n        `}\n    `;\n\n    panel.style.borderColor = borderColor;\n}\n\n// ============================================================================\n// RENDER FUNCTIONS - PRESETS\n// ============================================================================\n\n/**\n * Initialize the presets UI\n */\nfunction initializePresetsUI(): void {\n    // Update ContributedStats for current equipped preset on init\n    const equippedPresetId = loadoutStore.getEquippedPresetId();\n    updateContributedStatsForPreset(equippedPresetId);\n    renderPresetsPanel();\n}\n\n/**\n * Render the presets panel\n */\nfunction renderPresetsPanel(): void {\n    const container = document.getElementById('companions-presets-container');\n    if (!container) return;\n\n    const showDpsComparison = loadoutStore.getShowPresetDpsComparison();\n    const equippedPresetId = loadoutStore.getEquippedPresetId();\n\n    // Get current and all preset effects for DPS comparison\n    const currentPresetEffects = getPresetEquipEffects(equippedPresetId);\n\n    // Generate optimal presets for boss and normal damage\n    const maxBossDpsPreset = generateOptimalPreset(\n        'bossDamage',\n        getCompanionEffects,\n        (key) => loadoutStore.getCompanion(key),\n        getMaxCompanionLevel,\n        loadoutStore.getLockedMainCompanion('optimal-boss')\n    );\n    const maxNormalDpsPreset = generateOptimalPreset(\n        'normalDamage',\n        getCompanionEffects,\n        (key) => loadoutStore.getCompanion(key),\n        getMaxCompanionLevel,\n        loadoutStore.getLockedMainCompanion('optimal-normal')\n    );\n\n    let html = '<div style=\"display: flex; flex-direction: column; gap: 12px;\">';\n\n    // Add toggle header at the top\n    html += `\n        <header style=\"margin-bottom: 8px; padding: 10px 12px; background: rgba(0, 122, 255, 0.08); border: 1px solid rgba(0, 122, 255, 0.2); border-radius: 8px; display: flex; align-items: center; justify-content: space-between;\">\n            <span style=\"font-weight: 600; color: var(--text-primary);\">Show DPS Comparison</span>\n            <label style=\"display: flex; align-items: center; gap: 8px; cursor: pointer;\">\n                <input type=\"checkbox\" id=\"preset-dps-comparison-toggle\" onchange=\"window.togglePresetDpsComparison(this.checked)\" ${showDpsComparison ? 'checked' : ''}>\n                <span style=\"font-size: 0.9em; color: var(--text-secondary);\">Enable DPS info below each preset</span>\n            </label>\n        </header>\n    `;\n\n    // Render 20 user presets\n    for (let i = 1; i <= 20; i++) {\n        const presetId: CompanionPresetId = `preset${i}` as CompanionPresetId;\n        const presetData = loadoutStore.getPreset(presetId);\n        const isEquipped = presetId === equippedPresetId;\n\n        html += renderPresetRow(presetId, presetData, isEquipped, showDpsComparison, currentPresetEffects, false);\n    }\n\n    // Render 2 special optimal presets\n    html += renderPresetRow('optimal-boss', maxBossDpsPreset, false, showDpsComparison, currentPresetEffects, true, 'Max Boss Dmg');\n    html += renderPresetRow('optimal-normal', maxNormalDpsPreset, false, showDpsComparison, currentPresetEffects, true, 'Max Normal Dmg');\n\n    html += '</div>';\n\n    container.innerHTML = html;\n\n    // Attach event listeners (only for user presets, not optimal ones)\n    attachPresetEventListeners();\n}\n\n/**\n * Render a single preset row\n */\nfunction renderPresetRow(\n    presetId: CompanionPresetId,\n    presetData: CompanionPreset,\n    isEquipped: boolean,\n    showDpsComparison: boolean,\n    currentPresetEffects: Record<string, number>,\n    isSpecialPreset = false,\n    customLabel: string | null = null\n): string {\n    // Format number helper\n    const formatNumber = (num: number): string => {\n        if (num >= 1000000) return (num / 1000000).toFixed(2) + 'M';\n        if (num >= 1000) return (num / 1000).toFixed(1) + 'K';\n        return Math.floor(num).toString();\n    };\n\n    // Determine label\n    const labelText = customLabel || presetId.replace('preset', '#');\n\n    // Determine border color (gold for special presets)\n    const borderColor = isSpecialPreset ? '#fbbf24' : (isEquipped ? '#10b981' : 'var(--border-color)');\n\n    // For optimal presets, check if main is locked\n    const isLocked = isSpecialPreset &&\n        (presetId === 'optimal-boss' || presetId === 'optimal-normal') &&\n        loadoutStore.getLockedMainCompanion(presetId) !== null;\n\n    // Build the preset row HTML\n    let html = `\n        <div class=\"preset-row\" data-preset=\"${presetId}\" data-special=\"${isSpecialPreset}\" style=\"\n            display: flex;\n            flex-direction: column;\n            background: var(--background);\n            border: 2px solid ${borderColor};\n            border-radius: 8px;\n            transition: all 0.2s ease;\n            ${isSpecialPreset ? 'background: linear-gradient(135deg, rgba(251, 191, 36, 0.05), rgba(245, 158, 11, 0.03));' : ''}\n        \">\n            <!-- Top row: label, slots, and badge -->\n            <div style=\"\n                display: flex;\n                align-items: center;\n                gap: 8px;\n                padding: 10px 12px;\n            \">\n                <!-- Preset label -->\n                <div style=\"\n                    font-size: 0.8em;\n                    font-weight: 600;\n                    color: ${isSpecialPreset ? '#fbbf24' : 'var(--text-secondary)'};\n                    min-width: ${customLabel ? '100px' : '45px'};\n                    text-align: right;\n                    margin-right: 4px;\n                \">${labelText}</div>\n\n                <!-- Main slot -->\n                ${isSpecialPreset ? renderOptimalMainSlot(presetId, presetData.main, 80, isLocked) : renderSlot(presetId, 'main', 0, presetData.main, 80)}\n\n                <!-- Sub slots (6 in a row) -->\n                ${presetData.subs.map((sub, index) =>\n                    isSpecialPreset ? renderReadOnlySlot(sub, 50) : renderSlot(presetId, 'sub', index, sub, 50)\n                ).join('')}\n\n                <!-- Badge for equipped or lock button for special presets -->\n                ${isSpecialPreset ? `\n                    <button onclick=\"window.toggleOptimalLock('${presetId}')\" style=\"\n                        margin-left: auto;\n                        padding: 6px 12px;\n                        background: ${isLocked ? 'linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(220, 38, 38, 0.1))' : 'linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(59, 130, 246, 0.1))'};\n                        border: 2px solid ${isLocked ? '#ef4444' : '#3b82f6'};\n                        border-radius: 6px;\n                        color: ${isLocked ? '#ef4444' : '#3b82f6'};\n                        font-weight: 600;\n                        font-size: 0.8em;\n                        cursor: pointer;\n                        transition: all 0.2s ease;\n                        white-space: nowrap;\n                    \" onmouseover=\"this.style.background='${isLocked ? 'rgba(239, 68, 68, 0.25)' : 'rgba(59, 130, 246, 0.25)'}'; this.style.transform='translateY(-1px)';\"\n                       onmouseout=\"this.style.background='${isLocked ? 'linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(220, 38, 38, 0.1))' : 'linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(59, 130, 246, 0.1))'}'; this.style.transform='translateY(0)';\">\n                        ${isLocked ? 'CLEAR LOCK' : 'LOCK MAIN'}\n                    </button>\n                ` : (isEquipped ? `\n                    <div style=\"\n                        margin-left: auto;\n                        padding: 6px 12px;\n                        background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(16, 185, 129, 0.1));\n                        border: 2px solid #10b981;\n                        border-radius: 6px;\n                        color: #10b981;\n                        font-weight: 700;\n                        font-size: 0.8em;\n                        white-space: nowrap;\n                    \">\u2713 EQUIPPED</div>\n                ` : `\n                    <button onclick=\"window.equipPreset('${presetId}')\" style=\"\n                        margin-left: auto;\n                        padding: 6px 14px;\n                        background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(59, 130, 246, 0.1));\n                        border: 2px solid #3b82f6;\n                        border-radius: 6px;\n                        color: #3b82f6;\n                        font-weight: 600;\n                        font-size: 0.8em;\n                        cursor: pointer;\n                        transition: all 0.2s ease;\n                        white-space: nowrap;\n                    \" onmouseover=\"this.style.background='rgba(59, 130, 246, 0.25)'; this.style.transform='translateY(-1px)';\"\n                       onmouseout=\"this.style.background='linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(59, 130, 246, 0.1))'; this.style.transform='translateY(0)';\">\n                        EQUIP\n                    </button>\n                `)}\n            </div>\n    `;\n\n    // Add DPS comparison section if enabled and preset has companions\n    if (showDpsComparison && presetHasAnyCompanion(presetData)) {\n        const targetPresetEffects = isSpecialPreset\n            ? getPresetEquipEffectsFromData(presetData)\n            : getPresetEquipEffects(presetId);\n\n        const dpsResults = calculateBothDpsDifferences(currentPresetEffects, targetPresetEffects);\n\n        html += renderDpsComparisonSection(dpsResults, isEquipped, formatNumber);\n    }\n\n    html += `</div>`;\n    return html;\n}\n\n/**\n * Render DPS comparison section for a preset row\n */\nfunction renderDpsComparisonSection(\n    dpsResults: BothDpsResults,\n    isEquipped: boolean,\n    formatNumber: (num: number) => string\n): string {\n    let html = `\n        <div class=\"preset-dps-comparison\" style=\"\n            margin-top: 8px;\n            padding: 10px 12px;\n            background: linear-gradient(135deg, rgba(0, 122, 255, 0.08), rgba(88, 86, 214, 0.05));\n            border-top: 1px solid rgba(0, 122, 255, 0.2);\n            border-radius: 0 0 6px 6px;\n        \">\n            <div style=\"display: flex; gap: 20px; justify-content: space-around;\">\n    `;\n\n    if (isEquipped) {\n        // Show current DPS and gain over baseline for equipped preset\n        const bossGainOverBaseline = dpsResults.boss.currentPresetGain;\n        const normalGainOverBaseline = dpsResults.normal.currentPresetGain;\n        const bossPctGain = dpsResults.boss.baselineDps > 0 ? (bossGainOverBaseline / dpsResults.boss.baselineDps) * 100 : 0;\n        const normalPctGain = dpsResults.normal.baselineDps > 0 ? (normalGainOverBaseline / dpsResults.normal.baselineDps) * 100 : 0;\n\n        html += `\n            <div style=\"text-align: center;\">\n                <div style=\"font-size: 0.75em; color: var(--text-secondary); margin-bottom: 4px;\">DPS vs Boss</div>\n                <div style=\"font-size: 1em; font-weight: 700; color: var(--accent-success);\">\n                    Current\n                </div>\n                <div style=\"font-size: 0.7em; color: var(--text-secondary);\">\n                    ${formatNumber(dpsResults.boss.currentPresetDps)}\n                </div>\n                <div style=\"font-size: 0.65em; color: var(--text-secondary);\">\n                    +${bossPctGain.toFixed(1)}% over baseline\n                </div>\n            </div>\n            <div style=\"text-align: center;\">\n                <div style=\"font-size: 0.75em; color: var(--text-secondary); margin-bottom: 4px;\">DPS vs Monster</div>\n                <div style=\"font-size: 1em; font-weight: 700; color: var(--accent-success);\">\n                    Current\n                </div>\n                <div style=\"font-size: 0.7em; color: var(--text-secondary);\">\n                    ${formatNumber(dpsResults.normal.currentPresetDps)}\n                </div>\n                <div style=\"font-size: 0.65em; color: var(--text-secondary);\">\n                    +${normalPctGain.toFixed(1)}% over baseline\n                </div>\n            </div>\n        `;\n    } else {\n        // Show DPS difference relative to current preset for non-equipped presets\n        const bossGain = dpsResults.boss.dpsGain;\n        const normalGain = dpsResults.normal.dpsGain;\n\n        html += `\n            <div style=\"text-align: center;\">\n                <div style=\"font-size: 0.75em; color: var(--text-secondary); margin-bottom: 4px;\">DPS vs Boss</div>\n                <div style=\"font-size: 1em; font-weight: 700;\">\n                    <span style=\"color: ${bossGain >= 0 ? '#10b981' : '#ef4444'};\">\n                        ${bossGain >= 0 ? '+' : ''}${bossGain.toFixed(2)}%\n                    </span>\n                </div>\n                <div style=\"font-size: 0.7em; color: var(--text-secondary);\">\n                    ${formatNumber(dpsResults.boss.newPresetDps)}\n                </div>\n            </div>\n            <div style=\"text-align: center;\">\n                <div style=\"font-size: 0.75em; color: var(--text-secondary); margin-bottom: 4px;\">DPS vs Monster</div>\n                <div style=\"font-size: 1em; font-weight: 700;\">\n                    <span style=\"color: ${normalGain >= 0 ? '#10b981' : '#ef4444'};\">\n                        ${normalGain >= 0 ? '+' : ''}${normalGain.toFixed(2)}%\n                    </span>\n                </div>\n                <div style=\"font-size: 0.7em; color: var(--text-secondary);\">\n                    ${formatNumber(dpsResults.normal.newPresetDps)}\n                </div>\n            </div>\n        `;\n    }\n\n    html += `\n                </div>\n            </div>\n        `;\n\n    return html;\n}\n\n/**\n * Render a single slot\n */\nfunction renderSlot(\n    presetId: CompanionPresetId,\n    slotType: 'main' | 'sub',\n    slotIndex: number,\n    companionKey: CompanionKey | null,\n    size: number\n): string {\n    const slotId = `${presetId}-${slotType}-${slotIndex}`;\n\n    if (!companionKey) {\n        // Empty slot\n        return `\n            <div class=\"preset-slot empty-slot\"\n                 data-preset=\"${presetId}\"\n                 data-slot-type=\"${slotType}\"\n                 data-slot-index=\"${slotIndex}\"\n                 data-slot-id=\"${slotId}\"\n                 style=\"\n                    width: ${size}px;\n                    height: ${size}px;\n                    border: 2px dashed #666;\n                    border-radius: 8px;\n                    background: rgba(255,255,255,0.05);\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    cursor: pointer;\n                    transition: all 0.2s ease;\n                    position: relative;\n                    overflow: hidden;\n                 \"\n                 onmouseover=\"this.style.background='rgba(255,255,255,0.1)';\"\n                 onmouseout=\"this.style.background='rgba(255,255,255,0.05)';\">\n                <div style=\"font-size: ${size * 0.5}px; color: #888; font-weight: bold;\">+</div>\n            </div>\n        `;\n    }\n\n    // Filled slot\n    const [className, rarity] = companionKey.split('-');\n    const config = RARITY_CONFIG[rarity as CompanionRarity] || RARITY_CONFIG['Normal'];\n    const companionData = loadoutStore.getCompanion(companionKey);\n    const level = companionData?.level ?? 1;\n    const isLocked = !companionData?.unlocked;\n\n    // For main slots: use webp with preset-specific class\n    // For sub slots: use png with preset-specific sub class\n    const isMain = slotType === 'main';\n    const iconName = isMain ? getClassWebpName(className as CompanionClass) : getClassPngName(className as CompanionClass);\n    const iconExt = isMain ? 'webp' : 'png';\n    const iconClass = isMain\n        ? `comp-image comp-preset-${className}`\n        : `comp-image comp-preset-sub-${className}`;\n\n    return `\n        <div class=\"preset-slot filled-slot ${isLocked ? 'locked-companion-slot' : ''}\"\n             data-preset=\"${presetId}\"\n             data-slot-type=\"${slotType}\"\n             data-slot-index=\"${slotIndex}\"\n             data-slot-id=\"${slotId}\"\n             data-companion=\"${companionKey}\"\n             data-main-rarity=\"${isMain ? rarity : ''}\"\n             style=\"\n                width: ${size}px;\n                height: ${size}px;\n                background: linear-gradient(135deg, ${config.color}22, ${config.borderColor}44);\n                border: 2px solid ${isLocked ? '#ef4444' : config.borderColor};\n                border-radius: 8px;\n                cursor: pointer;\n                transition: all 0.2s ease;\n                position: relative;\n                overflow: hidden;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                opacity: ${isLocked ? '0.6' : '1'};\n             \">\n            <!-- Companion icon (scaled up and clipped) -->\n            <div style=\"\n                position: absolute;\n                width: ${size * 1.5}px;\n                height: ${size * 1.5}px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                ${isLocked ? 'filter: grayscale(100%);' : ''}\n            \">\n                <img class=\"${iconClass}\" src=\"media/classes/${iconName}.${iconExt}\" style=\"\n                    width: 100%;\n                    height: 100%;\n                    object-fit: contain;\n                \">\n            </div>\n\n            <!-- Level badge -->\n            <div style=\"\n                position: absolute;\n                top: 2px;\n                right: 2px;\n                font-size: 0.65em;\n                color: white;\n                font-weight: 900;\n                text-shadow: 1px 1px 2px rgba(0,0,0,0.9);\n                background: rgba(0,0,0,0.5);\n                padding: 1px 3px;\n                border-radius: 4px;\n            \">${level}</div>\n\n            ${isLocked ? `\n            <!-- Locked warning indicator -->\n            <div style=\"\n                position: absolute;\n                top: 2px;\n                left: 2px;\n                font-size: ${size * 0.25}px;\n                line-height: 1;\n                background: rgba(239, 68, 68, 0.9);\n                color: white;\n                width: ${size * 0.35}px;\n                height: ${size * 0.35}px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n                z-index: 10;\n            \">\u26A0\uFE0F</div>\n            ` : ''}\n        </div>\n    `;\n}\n\n/**\n * Render optimal preset main slot (clickable for lock management)\n */\nfunction renderOptimalMainSlot(\n    presetId: CompanionPresetId,\n    companionKey: CompanionKey | null,\n    size: number,\n    isLocked: boolean\n): string {\n    if (!companionKey) {\n        // Empty slot - clickable to select\n        return `\n            <div class=\"preset-slot optimal-main-slot\"\n                 data-preset=\"${presetId}\"\n                 data-slot-type=\"main\"\n                 data-slot-index=\"0\"\n                 style=\"\n                    width: ${size}px;\n                    height: ${size}px;\n                    border: 2px dashed #666;\n                    border-radius: 8px;\n                    background: rgba(255,255,255,0.05);\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    cursor: pointer;\n                    transition: all 0.2s ease;\n                    position: relative;\n                    overflow: hidden;\n                 \"\n                 onmouseover=\"this.style.background='rgba(255,255,255,0.1)';\"\n                 onmouseout=\"this.style.background='rgba(255,255,255,0.05)';\">\n                <div style=\"font-size: ${size * 0.5}px; color: #888; font-weight: bold;\">+</div>\n            </div>\n        `;\n    }\n\n    // Filled slot\n    const [className, rarity] = companionKey.split('-');\n    const config = RARITY_CONFIG[rarity as CompanionRarity] || RARITY_CONFIG['Normal'];\n    const iconName = getClassWebpName(className as CompanionClass);\n    const iconClass = `comp-image comp-preset-${className}`;\n\n    return `\n        <div class=\"preset-slot optimal-main-slot filled-slot\"\n             data-preset=\"${presetId}\"\n             data-slot-type=\"main\"\n             data-slot-index=\"0\"\n             data-companion=\"${companionKey}\"\n             style=\"\n                width: ${size}px;\n                height: ${size}px;\n                background: linear-gradient(135deg, ${config.color}22, ${config.borderColor}44);\n                border: 2px solid ${config.borderColor};\n                border-radius: 8px;\n                cursor: pointer;\n                transition: all 0.2s ease;\n                position: relative;\n                overflow: hidden;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                opacity: 0.8;\n             \">\n            <!-- Companion icon (scaled up and clipped) -->\n            <div style=\"\n                position: absolute;\n                width: ${size * 1.5}px;\n                height: ${size * 1.5}px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            \">\n                <img src=\"media/classes/${iconName}.webp\"\n                     class=\"${iconClass}\"\n                     style=\"width: 100%; height: 100%; object-fit: contain;\"\n                     alt=\"${className}\">\n            </div>\n\n            ${isLocked ? `\n            <!-- Lock icon indicator -->\n            <div style=\"\n                position: absolute;\n                top: 2px;\n                left: 2px;\n                font-size: ${size * 0.25}px;\n                line-height: 1;\n                background: rgba(239, 68, 68, 0.9);\n                color: white;\n                width: ${size * 0.35}px;\n                height: ${size * 0.35}px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n                z-index: 10;\n            \">\uD83D\uDD12</div>\n            ` : ''}\n        </div>\n    `;\n}\n\n/**\n * Render a read-only slot (for optimal presets - non-clickable)\n */\nfunction renderReadOnlySlot(companionKey: CompanionKey | null, size: number): string {\n    if (!companionKey) {\n        // Empty slot\n        return `\n            <div class=\"optimal-readonly-slot\" style=\"\n                width: ${size}px;\n                height: ${size}px;\n                border: 2px dashed #444;\n                border-radius: 8px;\n                background: rgba(255,255,255,0.03);\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                opacity: 0.5;\n             \">\n                <div style=\"font-size: ${size * 0.5}px; color: #666; font-weight: bold;\">+</div>\n            </div>\n        `;\n    }\n\n    // Filled slot (read-only)\n    const [className, rarity] = companionKey.split('-');\n    const config = RARITY_CONFIG[rarity as CompanionRarity] || RARITY_CONFIG['Normal'];\n\n    // Use PNG icons for sub slots in optimal presets\n    const iconName = getClassPngName(className as CompanionClass);\n    const iconClass = `comp-image comp-preset-sub-${className}`;\n\n    return `\n        <div class=\"optimal-readonly-slot\" style=\"\n            width: ${size}px;\n            height: ${size}px;\n            background: linear-gradient(135deg, ${config.color}22, ${config.borderColor}44);\n            border: 2px solid ${config.borderColor};\n            border-radius: 8px;\n            position: relative;\n            overflow: hidden;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            opacity: 0.8;\n         \">\n            <!-- Companion icon (scaled up and clipped) -->\n            <div style=\"\n                position: absolute;\n                width: ${size * 1.5}px;\n                height: ${size * 1.5}px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            \">\n                <img src=\"media/classes/${iconName}.png\"\n                     class=\"${iconClass}\"\n                     style=\"width: 100%; height: 100%; object-fit: contain;\"\n                     alt=\"${className}\">\n            </div>\n        </div>\n    `;\n}\n\n// ============================================================================\n// EVENT HANDLERS\n// ============================================================================\n\n/**\n * Attach event listeners to companion icons\n */\nfunction attachCompanionIconListeners(): void {\n    // Icon click to show detail panel\n    document.querySelectorAll('.companion-icon').forEach(icon => {\n        icon.addEventListener('click', (e) => {\n            const target = icon as HTMLElement;\n            const companionKey = target.dataset.companion as CompanionKey;\n            const className = target.dataset.class as CompanionClass;\n            const rarity = target.dataset.rarity as CompanionRarity;\n            const borderColor = target.dataset.configBorder || '';\n            const color = target.dataset.configColor || '';\n\n            // Check if a preset slot is selected for assignment\n            const selectedSlot = getSelectedSlotInfo();\n            if (selectedSlot) {\n                const companionData = loadoutStore.getCompanion(companionKey);\n\n                // Check if this is an optimal preset and companion is already locked\n                const isOptimalPreset = selectedSlot.presetId === 'optimal-boss' || selectedSlot.presetId === 'optimal-normal';\n                if (isOptimalPreset && selectedSlot.type === 'main') {\n                    const currentLock = loadoutStore.getLockedMainCompanion(selectedSlot.presetId as 'optimal-boss' | 'optimal-normal');\n                    if (currentLock === companionKey) {\n                        // Already locked - add shake animation and return early\n                        target.style.animation = 'shake 0.5s ease-in-out';\n                        setTimeout(() => {\n                            target.style.animation = '';\n                        }, 500);\n                        return; // Don't proceed to assignment\n                    }\n                }\n\n                // Check if companion is locked and show visual feedback\n                if (!companionData?.unlocked) {\n                    // Add shake animation\n                    target.style.animation = 'shake 0.5s ease-in-out';\n                    setTimeout(() => {\n                        target.style.animation = '';\n                    }, 500);\n\n                    // For locked companions, show detail panel so user can unlock them\n                    // Don't return early - fall through to detail panel display below\n                } else {\n                    // Unlocked companion - assign to slot and return\n                    assignCompanionToSlot(companionKey);\n                    return;\n                }\n            }\n\n            // Track current companion\n            currentCompanion = { companionKey, className, rarity, borderColor, color };\n\n            // Update active state\n            document.querySelectorAll('.companion-icon').forEach(i => {\n                (i as HTMLElement).style.boxShadow = 'none';\n            });\n            target.style.boxShadow = `0 0 0 3px ${borderColor}`;\n\n            // Show detail panel\n            showDetailPanel(companionKey, className, rarity, borderColor, color);\n        });\n    });\n}\n\n/**\n * Attach event listeners to preset slots\n */\nfunction attachPresetEventListeners(): void {\n    document.querySelectorAll('.preset-slot').forEach(slot => {\n        slot.addEventListener('click', (e) => {\n            e.stopPropagation();\n            handleSlotClick(slot as HTMLElement);\n        });\n\n        // Right-click to clear filled slot\n        slot.addEventListener('contextmenu', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            const target = slot as HTMLElement;\n            const presetId = target.dataset.preset as CompanionPresetId;\n            const slotType = target.dataset.slotType as 'main' | 'sub';\n            const slotIndex = parseInt(target.dataset.slotIndex || '0');\n            const companionKey = target.dataset.companion as CompanionKey | null;\n\n            if (companionKey) {\n                loadoutStore.clearPresetSlot(presetId, slotType, slotIndex);\n                renderPresetsPanel();\n            }\n        });\n    });\n}\n\n/**\n * Attach click outside listener to clear selection\n */\nfunction attachClickOutsideListener(): void {\n    // Remove existing listener if any\n    const existingHandler = (window as any)._companionsClickOutsideHandler;\n    if (existingHandler) {\n        document.removeEventListener('click', existingHandler);\n    }\n\n    const handler = (e: Event) => {\n        const selectedSlot = getSelectedSlotInfo();\n        if (!selectedSlot) return;\n\n        // Check if clicking outside of preset slots and companion icons\n        const target = e.target as HTMLElement;\n        const clickedSlot = target.closest('.preset-slot');\n        const clickedIcon = target.closest('.companion-icon');\n\n        if (!clickedSlot && !clickedIcon) {\n            clearSelectionFeedback();\n            clearSelectedSlot();\n        }\n    };\n\n    (window as any)._companionsClickOutsideHandler = handler;\n    document.addEventListener('click', handler);\n}\n\n/**\n * Handle slot click\n */\nfunction handleSlotClick(slot: HTMLElement): void {\n    const presetId = slot.dataset.preset as CompanionPresetId;\n    const slotType = slot.dataset.slotType as 'main' | 'sub';\n    const slotIndex = parseInt(slot.dataset.slotIndex || '0');\n    const mainRarity = slot.dataset.mainRarity;\n\n    // Check if this is an optimal preset slot\n    const isOptimalSlot = slot.classList.contains('optimal-main-slot');\n\n    // For optimal slots, toggle the lock instead of selecting for assignment\n    if (isOptimalSlot) {\n        // Only optimal-boss and optimal-normal have locked companions\n        if (presetId === 'optimal-boss' || presetId === 'optimal-normal') {\n            const currentLock = loadoutStore.getLockedMainCompanion(presetId);\n            if (currentLock) {\n                // Currently locked - clicking the slot should just show that it's locked\n                return;\n            }\n        }\n        // Not locked - proceed with selection\n    }\n\n    // Set this as the selected slot\n    setSelectedSlot(presetId, slotType, slotIndex);\n\n    // Clear any previous selection feedback\n    clearSelectionFeedback();\n\n    // Show selection feedback\n    if (isOptimalSlot) {\n        // For optimal slots, use custom feedback\n        slot.style.boxShadow = '0 0 15px 3px rgba(255, 255, 255, 0.6)';\n        slot.style.animation = 'pulse-glow 1s infinite';\n        showTooltip(slot, 'Select main companion from grid');\n        highlightSourceIcons();\n    } else {\n        showSelectionFeedback(presetId, mainRarity || '');\n    }\n\n    // Show the clear selection button\n    const clearBtnContainer = document.getElementById('clear-slot-selection-container');\n    if (clearBtnContainer) {\n        clearBtnContainer.style.display = 'block';\n    }\n}\n\n// ============================================================================\n// HELPER FUNCTIONS\n// ============================================================================\n\n/**\n * Process effects and return formatted entries\n */\nfunction processEffects(effects: Record<string, number>): ProcessedEffect[] {\n    if (!effects || Object.keys(effects).length === 0) return [];\n\n    return Object.entries(effects)\n        .map(([stat, value]) => {\n            // Determine if this stat should display as a percentage\n            // Raw value stats (not divided by 10): HitChance, MaxHp, Attack, MainStat\n            const isPercentage = !['HitChance', 'MaxHp', 'Attack', 'MainStat'].includes(stat);\n\n            // Values are already pre-formatted from companion-data.js\n            // Just format for display (avoid floating point issues)\n            const formattedValue = typeof value === 'number' ?\n                (Number.isInteger(value) ? value : value.toFixed(1).replace(/\\.0$/, '')) : value;\n\n            return {\n                stat,\n                displayName: formatStat(stat),\n                value: formattedValue,\n                isPercentage\n            };\n        });\n}\n\n/**\n * Format effects for display in detail panel\n */\nfunction formatEffects(effects: Record<string, number>): string {\n    if (!effects || Object.keys(effects).length === 0) return '';\n\n    return processEffects(effects)\n        .map(entry => `${entry.displayName}: +${entry.value}${entry.isPercentage ? '%' : ''}`)\n        .join('<br>');\n}\n\n/**\n * Format stat name for display\n */\nfunction formatStat(stat: string): string {\n    const stats: Record<string, string> = {\n        'maxhpr': 'Max HP',\n        'maxhp': 'Max HP',\n        'damage': 'Damage',\n        'maxdamage': 'Max Damage Multiplier',\n        'hitchance': 'Accuracy',\n        'normaldamage': 'Normal Monster Damage',\n        'critrate': 'Critical Rate',\n        'attackspeed': 'Attack Speed',\n        'attack speed': 'Attack Speed',\n        'damageInCc': 'Status Effect Damage',\n        'bossdamage': 'Boss Monster Damage',\n        'mindamage': 'Min Damage Multiplier',\n        'mainstat': 'Main Stat',\n        'attack': 'Attack'\n    };\n\n    return stats[stat.toLowerCase()] || stat;\n}\n\n/**\n * Set the current companion and save its details\n */\nfunction setCurrentCompanion(\n    companionKey: CompanionKey,\n    className: CompanionClass,\n    rarity: CompanionRarity,\n    borderColor: string,\n    color: string\n): void {\n    currentCompanion = { companionKey, className, rarity, borderColor, color };\n}\n\n/**\n * Get png icon representation for class\n */\nfunction getClassPngName(className: CompanionClass): string {\n    const names: Record<CompanionClass, string> = {\n        'Hero': 'hero',\n        'DarkKnight': 'dk',\n        'ArchMageIL': 'mage-il',\n        'ArchMageFP': 'mage-fp',\n        'BowMaster': 'bowmaster',\n        'Marksman': 'marksman',\n        'NightLord': 'nl',\n        'Shadower': 'shadower'\n    };\n    return names[className];\n}\n\n/**\n * Get webp representation for class\n */\nfunction getClassWebpName(className: CompanionClass): string {\n    const names: Record<CompanionClass, string> = {\n        'Hero': 'hero',\n        'DarkKnight': 'dk',\n        'ArchMageIL': 'il',\n        'ArchMageFP': 'fp',\n        'BowMaster': 'bow',\n        'Marksman': 'mark',\n        'NightLord': 'night',\n        'Shadower': 'shad'\n    };\n    return names[className];\n}\n\n/**\n * Update the summary section\n */\nfunction updateSummary(): void {\n    const container = document.getElementById('companions-summary-content');\n    if (!container) return;\n\n    const totalEffects: Record<string, number> = {};\n\n    // Calculate total inventory effects from all unlocked companions\n    // Iterate over all possible companion combinations\n    Object.entries(RARITY_CONFIG).forEach(([rarity, config]) => {\n        config.classes.forEach(className => {\n            const companionKey: CompanionKey = `${className}-${rarity}` as CompanionKey;\n            const data = loadoutStore.getCompanion(companionKey);\n\n            if (!data?.unlocked) return;\n\n            const effects = getCompanionEffects(className, rarity, data.level);\n\n            if (effects && effects.inventoryEffect) {\n                Object.entries(effects.inventoryEffect).forEach(([stat, value]) => {\n                    totalEffects[stat] = (totalEffects[stat] || 0) + value;\n                });\n            }\n        });\n    });\n\n    // Render summary\n    if (Object.keys(totalEffects).length === 0) {\n        container.innerHTML = '<span style=\"color: var(--text-secondary); font-style: italic;\">No unlocked companions</span>';\n        return;\n    }\n\n    // Use the same processEffects logic for consistency\n    const processedEffects = processEffects(totalEffects);\n\n    // Render each effect as a compact inline badge\n    container.innerHTML = processedEffects\n        .map(entry => `\n            <span style=\"\n                display: inline-flex;\n                align-items: center;\n                gap: 4px;\n                background: rgba(0, 122, 255, 0.1);\n                padding: 3px 10px;\n                border-radius: 12px;\n                border: 1px solid var(--border-color);\n                white-space: nowrap;\n            \">\n                <span style=\"font-weight: 600; color: var(--tab-teal);\">${entry.displayName}:</span>\n                <span style=\"color: var(--text-primary);\">+${entry.value}${entry.isPercentage ? '%' : ''}</span>\n            </span>\n        `)\n        .join('');\n}\n\n/**\n * Get equip effects for all companions in a preset\n */\nfunction getPresetEquipEffects(presetId: CompanionPresetId): Record<string, number> {\n    const preset = loadoutStore.getPreset(presetId);\n    const allSlots: (CompanionKey | null)[] = [preset.main, ...preset.subs];\n    const totalEffects: Record<string, number> = {};\n\n    allSlots.forEach(companionKey => {\n        if (!companionKey) return;\n\n        const [className, rarity] = companionKey.split('-');\n        const companionData = loadoutStore.getCompanion(companionKey);\n\n        if (!companionData?.unlocked) return;\n\n        const level = companionData.level || 1;\n        const effects = getCompanionEffects(className, rarity, level);\n\n        if (effects && effects.equipEffect) {\n            Object.entries(effects.equipEffect).forEach(([stat, value]) => {\n                totalEffects[stat] = (totalEffects[stat] || 0) + value;\n            });\n        }\n    });\n\n    return totalEffects;\n}\n\n/**\n * Get equip effects from preset data directly (for special optimal presets)\n */\nfunction getPresetEquipEffectsFromData(preset: CompanionPreset): Record<string, number> {\n    if (!preset) return {};\n    const allSlots: (CompanionKey | null)[] = [preset.main, ...preset.subs];\n    const totalEffects: Record<string, number> = {};\n\n    allSlots.forEach(companionKey => {\n        if (!companionKey) return;\n\n        const [className, rarity] = companionKey.split('-');\n        const companionData = loadoutStore.getCompanion(companionKey);\n\n        if (!companionData?.unlocked) return;\n\n        const level = companionData.level || 1;\n        const effects = getCompanionEffects(className, rarity, level);\n\n        if (effects && effects.equipEffect) {\n            Object.entries(effects.equipEffect).forEach(([stat, value]) => {\n                totalEffects[stat] = (totalEffects[stat] || 0) + value;\n            });\n        }\n    });\n\n    return totalEffects;\n}\n\n/**\n * Update ContributedStats with current preset's effects\n */\nfunction updateContributedStatsForPreset(presetId: CompanionPresetId): void {\n    const effects = getPresetEquipEffects(presetId);\n    // TODO: Implement updateCompanionEquippedContributions\n    // This will be added when integrating with state management\n}\n\n/**\n * Refresh the presets UI\n */\nfunction refreshPresetsUI(): void {\n    renderPresetsPanel();\n}\n\n// ============================================================================\n// SLOT SELECTION MANAGEMENT\n// ============================================================================\n\ninterface SlotSelection {\n    presetId: CompanionPresetId;\n    type: 'main' | 'sub';\n    index: number;\n}\n\nfunction getSelectedSlotInfo(): SlotSelection | null {\n    return (window as any)._selectedSlotInfo || null;\n}\n\nfunction setSelectedSlot(presetId: CompanionPresetId, type: 'main' | 'sub', index: number): void {\n    (window as any)._selectedSlotInfo = { presetId, type, index };\n}\n\nfunction clearSelectedSlot(): void {\n    (window as any)._selectedSlotInfo = null;\n}\n\n/**\n * Show selection feedback based on main companion's rarity\n */\nfunction showSelectionFeedback(presetId: CompanionPresetId, mainRarity: string): void {\n    const slot = getSelectedSlotInfo();\n    if (!slot) return;\n\n    const slotElement = document.querySelector(`[data-slot-id=\"${presetId}-${slot.type}-${slot.index}\"]`) as HTMLElement;\n    if (!slotElement) return;\n\n    // Add common glow effect\n    slotElement.style.boxShadow = '0 0 15px 3px rgba(255, 255, 255, 0.6)';\n    slotElement.style.animation = 'pulse-glow 1s infinite';\n\n    // Show tooltip and highlight source icons for all rarities\n    showTooltip(slotElement, 'Select a companion from the left');\n    highlightSourceIcons();\n}\n\n/**\n * Show tooltip above slot\n */\nfunction showTooltip(slotElement: HTMLElement, text: string): void {\n    const tooltip = document.createElement('div');\n    tooltip.id = 'preset-selection-tooltip';\n    tooltip.style.cssText = `\n        position: absolute;\n        top: -35px;\n        left: 50%;\n        transform: translateX(-50%);\n        background: rgba(0,0,0,0.9);\n        color: white;\n        padding: 6px 12px;\n        border-radius: 6px;\n        font-size: 0.85em;\n        white-space: nowrap;\n        z-index: 1000;\n        pointer-events: none;\n    `;\n    tooltip.textContent = text;\n    slotElement.style.position = 'relative';\n    slotElement.appendChild(tooltip);\n}\n\n/**\n * Highlight source companion icons (only unlocked ones)\n */\nfunction highlightSourceIcons(): void {\n    // Check if we're selecting for an optimal preset\n    const slotInfo = getSelectedSlotInfo();\n    let excludedCompanion: CompanionKey | null = null;\n\n    if (slotInfo && (slotInfo.presetId === 'optimal-boss' || slotInfo.presetId === 'optimal-normal')) {\n        // Get the locked companion for this optimal preset (if any)\n        excludedCompanion = loadoutStore.getLockedMainCompanion(slotInfo.presetId);\n    }\n\n    document.querySelectorAll('.companion-icon').forEach(icon => {\n        const target = icon as HTMLElement;\n        const companionKey = target.dataset.companion as CompanionKey;\n        const companionData = loadoutStore.getCompanion(companionKey);\n\n        // Skip highlighting if this companion is excluded (already locked for this preset)\n        if (companionKey === excludedCompanion) {\n            // Dim the excluded companion to show it's unavailable\n            target.style.transition = 'all 0.3s ease';\n            target.style.opacity = '0.3';\n            target.style.transform = 'scale(0.9)';\n            target.style.boxShadow = 'none';\n            return;\n        }\n\n        // Only highlight unlocked companions\n        if (companionData?.unlocked) {\n            target.style.transition = 'all 0.3s ease';\n            target.style.boxShadow = '0 0 20px 5px rgba(187, 119, 255, 0.4)';\n            target.style.transform = 'scale(1.05)';\n        }\n    });\n}\n\n/**\n * Clear all selection feedback\n */\nfunction clearSelectionFeedback(): void {\n    // Remove glow and animation from slots\n    document.querySelectorAll('.preset-slot').forEach(slot => {\n        const target = slot as HTMLElement;\n        target.style.boxShadow = '';\n        target.style.animation = '';\n    });\n\n    // Remove tooltip\n    const tooltip = document.getElementById('preset-selection-tooltip');\n    if (tooltip) tooltip.remove();\n\n    // Remove highlight from icons\n    document.querySelectorAll('.companion-icon').forEach(icon => {\n        const target = icon as HTMLElement;\n        target.style.boxShadow = '';\n        target.style.transform = '';\n        target.style.opacity = ''; // Restore opacity for dimmed companions\n    });\n\n    // Hide the clear selection button\n    const clearBtnContainer = document.getElementById('clear-slot-selection-container');\n    if (clearBtnContainer) {\n        clearBtnContainer.style.display = 'none';\n    }\n}\n\n/**\n * Assign companion to selected slot\n */\nfunction assignCompanionToSlot(companionKey: CompanionKey): void {\n    const slotInfo = getSelectedSlotInfo();\n    if (!slotInfo) return;\n\n    // Check if this is an optimal preset slot\n    const isOptimalPreset = slotInfo.presetId === 'optimal-boss' || slotInfo.presetId === 'optimal-normal';\n\n    // Check if companion is unlocked\n    const companionData = loadoutStore.getCompanion(companionKey);\n    if (!companionData?.unlocked) {\n        // Show error feedback\n        const slotSelector = isOptimalPreset\n            ? `.optimal-main-slot[data-preset=\"${slotInfo.presetId}\"]`\n            : `[data-slot-id=\"${slotInfo.presetId}-${slotInfo.type}-${slotInfo.index}\"]`;\n        const slotElement = document.querySelector(slotSelector) as HTMLElement;\n        if (slotElement) {\n            showTooltip(slotElement, '\u274C Companion not unlocked!');\n            setTimeout(() => {\n                const tooltip = document.getElementById('preset-selection-tooltip');\n                if (tooltip) tooltip.remove();\n            }, 1500);\n        }\n        return;\n    }\n\n    // For optimal presets, check if this companion is already locked as main\n    if (isOptimalPreset && slotInfo.type === 'main') {\n        const currentLock = loadoutStore.getLockedMainCompanion(slotInfo.presetId as 'optimal-boss' | 'optimal-normal');\n        if (currentLock === companionKey) {\n            // Already locked - show feedback and don't proceed\n            const slotSelector = `.optimal-main-slot[data-preset=\"${slotInfo.presetId}\"]`;\n            const slotElement = document.querySelector(slotSelector) as HTMLElement;\n            if (slotElement) {\n                showTooltip(slotElement, '\u274C This companion is already locked!');\n                setTimeout(() => {\n                    const tooltip = document.getElementById('preset-selection-tooltip');\n                    if (tooltip) tooltip.remove();\n                }, 1500);\n            }\n            return;\n        }\n    }\n\n    // For optimal presets, just set the locked main\n    if (isOptimalPreset && slotInfo.type === 'main') {\n        loadoutStore.setLockedMainCompanion(slotInfo.presetId as 'optimal-boss' | 'optimal-normal', companionKey);\n        clearSelectionFeedback();\n        clearSelectedSlot();\n        renderPresetsPanel();\n        return;\n    }\n\n    // Check for duplicates in regular presets\n    const preset = loadoutStore.getPreset(slotInfo.presetId);\n    const allSlots: (CompanionKey | null)[] = [preset.main, ...preset.subs];\n\n    const duplicateSlot = allSlots.find((slotKey, idx) => {\n        if (slotInfo.type === 'main' && idx === 0) return false;\n        if (slotInfo.type === 'sub' && idx === slotInfo.index + 1) return false;\n        return slotKey === companionKey;\n    });\n\n    if (duplicateSlot) {\n        const slotElement = document.querySelector(`[data-slot-id=\"${slotInfo.presetId}-${slotInfo.type}-${slotInfo.index}\"]`) as HTMLElement;\n        if (slotElement) {\n            showTooltip(slotElement, '\u274C Already equipped in this preset!');\n            setTimeout(() => {\n                const tooltip = document.getElementById('preset-selection-tooltip');\n                if (tooltip) tooltip.remove();\n            }, 1500);\n        }\n        return;\n    }\n\n    loadoutStore.setPresetSlot(slotInfo.presetId, slotInfo.type, slotInfo.index, companionKey);\n\n    clearSelectionFeedback();\n    clearSelectedSlot();\n    renderPresetsPanel();\n}\n\n// ============================================================================\n// GLOBAL WINDOW FUNCTIONS (for HTML onclick attributes)\n// ============================================================================\n\n/**\n * Toggle companion lock status\n */\n(window as any).toggleCompanionLock = function(companionKey: CompanionKey): void {\n    const current = loadoutStore.getCompanion(companionKey);\n    if (!current) return;\n\n    loadoutStore.updateCompanion(companionKey, {\n        ...current,\n        unlocked: !current.unlocked\n    });\n\n    // Re-render the grid\n    const savedCompanion = currentCompanion;\n    renderCompanionsGrid();\n    updateSummary();\n    refreshPresetsUI();\n\n    // Re-open the detail panel if there was a selected companion\n    if (savedCompanion) {\n        setTimeout(() => {\n            const icon = document.querySelector(`.companion-icon[data-companion=\"${savedCompanion.companionKey}\"]`) as HTMLElement;\n            if (icon) {\n                icon.style.boxShadow = `0 0 0 3px ${savedCompanion.borderColor}`;\n                showDetailPanel(\n                    savedCompanion.companionKey,\n                    savedCompanion.className,\n                    savedCompanion.rarity,\n                    savedCompanion.borderColor,\n                    savedCompanion.color\n                );\n            }\n        }, 0);\n    }\n};\n\n/**\n * Handle level change\n */\n(window as any).handleLevelChange = function(companionKey: CompanionKey, newLevel: string): void {\n    const level = parseInt(newLevel);\n    const maxLevel = getMaxCompanionLevel();\n\n    if (isNaN(level) || level < 1 || level > maxLevel) {\n        return;\n    }\n\n    const current = loadoutStore.getCompanion(companionKey);\n    if (!current) return;\n\n    loadoutStore.updateCompanion(companionKey, {\n        ...current,\n        level: level\n    });\n\n    // Update the icon level text in real-time\n    const levelDisplay = document.querySelector(`.companion-icon-level[data-companion=\"${companionKey}\"]`) as HTMLElement;\n    if (levelDisplay) {\n        levelDisplay.textContent = `Lv.${level}`;\n    }\n\n    // Only update the detail panel and summary, not the whole grid\n    if (currentCompanion && currentCompanion.companionKey === companionKey) {\n        showDetailPanel(\n            currentCompanion.companionKey,\n            currentCompanion.className,\n            currentCompanion.rarity,\n            currentCompanion.borderColor,\n            currentCompanion.color\n        );\n    }\n    updateSummary();\n    refreshPresetsUI();\n};\n\n/**\n * Clear the companion from the selected slot\n */\n(window as any).clearSelectedSlotCompanion = function(): void {\n    const slotInfo = getSelectedSlotInfo();\n    if (!slotInfo) return;\n\n    // Clear the companion from the slot\n    loadoutStore.clearPresetSlot(slotInfo.presetId, slotInfo.type, slotInfo.index);\n\n    // Clear the selection feedback\n    clearSelectionFeedback();\n    clearSelectedSlot();\n\n    // Re-render the presets panel\n    renderPresetsPanel();\n};\n\n/**\n * Toggle preset DPS comparison visibility\n */\n(window as any).togglePresetDpsComparison = function(checked: boolean): void {\n    loadoutStore.setShowPresetDpsComparison(checked);\n    renderPresetsPanel();\n};\n\n/**\n * Toggle optimal preset lock\n */\n(window as any).toggleOptimalLock = function(optimalType: 'optimal-boss' | 'optimal-normal'): void {\n    const currentLock = loadoutStore.getLockedMainCompanion(optimalType);\n\n    if (currentLock) {\n        // Currently locked - clear the lock\n        loadoutStore.setLockedMainCompanion(optimalType, null);\n        clearSelectedSlot();\n        clearSelectionFeedback();\n        renderPresetsPanel();\n    } else {\n        // Currently unlocked - select the main slot for assignment\n        setSelectedSlot(optimalType, 'main', 0);\n\n        // Clear any previous selection feedback\n        clearSelectionFeedback();\n\n        // Re-render the presets panel\n        renderPresetsPanel();\n\n        // Apply glow effects AFTER render completes\n        setTimeout(() => {\n            // Find the preset row container\n            const presetRow = document.querySelector(`.preset-row[data-preset=\"${optimalType}\"]`) as HTMLElement;\n            if (presetRow) {\n                // Make all slots in this preset row glow (main + readonly subs)\n                const allSlots = presetRow.querySelectorAll('.optimal-main-slot, .optimal-readonly-slot');\n                allSlots.forEach(slot => {\n                    const target = slot as HTMLElement;\n                    target.style.boxShadow = '0 0 15px 3px rgba(255, 255, 255, 0.6)';\n                    target.style.animation = 'pulse-glow 1s infinite';\n                });\n\n                // Show tooltip on main slot\n                const mainSlot = presetRow.querySelector('.optimal-main-slot') as HTMLElement;\n                if (mainSlot) {\n                    showTooltip(mainSlot, 'Select main companion from grid');\n                }\n\n                // Highlight companion icons in grid\n                highlightSourceIcons();\n            }\n        }, 0);\n    }\n};\n\n/**\n * Equip a preset with confirmation modal\n */\n(window as any).equipPreset = async function(presetId: CompanionPresetId): Promise<void> {\n    const currentPresetId = loadoutStore.getEquippedPresetId();\n    if (currentPresetId === presetId) return; // Already equipped\n\n    const newPresetEffects = getPresetEquipEffects(presetId);\n    const currentPresetEffects = getPresetEquipEffects(currentPresetId);\n\n    // Check if new preset has any equip effects\n    const hasEquipEffects = Object.keys(newPresetEffects).length > 0 || Object.keys(currentPresetEffects).length > 0;\n\n    if (hasEquipEffects) {\n        // Show confirmation modal\n        const userChoice = await showEquipConfirmModal(presetId, currentPresetEffects, newPresetEffects);\n\n        if (userChoice === 'cancel') {\n            return;\n        }\n\n        if (userChoice === 'yes') {\n            // User says stats ARE incorporated - need to subtract old and add new\n            // Use StatCalculationService to properly calculate new base stats\n            const newStats = swapCompanionPresetEffects(currentPresetEffects, newPresetEffects);\n\n            // Persist the new base stats\n            loadoutStore.updateBaseStats(newStats);\n\n            // Switch preset ID\n            loadoutStore.setEquippedPresetId(presetId);\n            updateContributedStatsForPreset(presetId);\n            renderPresetsPanel();\n        } else if (userChoice === 'no') {\n            // User says stats are NOT incorporated - just switch presets without adjusting\n            loadoutStore.setEquippedPresetId(presetId);\n            updateContributedStatsForPreset(presetId);\n            renderPresetsPanel();\n        }\n    } else {\n        // No equip effects - just switch presets\n        loadoutStore.setEquippedPresetId(presetId);\n        updateContributedStatsForPreset(presetId);\n        renderPresetsPanel();\n    }\n};\n\n/**\n * Show equip preset confirmation modal\n */\nfunction showEquipConfirmModal(\n    presetId: CompanionPresetId,\n    currentEffects: Record<string, number>,\n    newEffects: Record<string, number>\n): Promise<'yes' | 'no' | 'cancel'> {\n    return new Promise((resolve) => {\n        // Remove any existing modal\n        const existingModal = document.getElementById('equip-preset-modal');\n        if (existingModal) {\n            existingModal.remove();\n        }\n\n        // Create modal overlay\n        const overlay = document.createElement('div');\n        overlay.id = 'equip-preset-modal';\n        overlay.className = 'modal-overlay';\n\n        // Create modal box\n        const modalBox = document.createElement('div');\n        modalBox.className = 'modal-box';\n\n        // Create title\n        const title = document.createElement('h2');\n        title.className = 'modal-title';\n        title.textContent = `Equip ${presetId.replace('preset', '#')}`;\n\n        // Create message\n        const message = document.createElement('p');\n        message.className = 'modal-message';\n        message.innerHTML = `\n            Are the stats from the currently equipped preset already incorporated in your input stats?<br>\n            <br>\n            This will:\n            <ul style=\"text-align: left; margin: 12px 0; padding-left: 24px;\">\n                <li>Subtract the stats of your current preset from base stats</li>\n                <li>Add the stats of ${presetId.replace('preset', '#')} to base stats</li>\n            </ul>\n        `;\n\n        // Create stat comparison table container\n        const tableContainer = document.createElement('div');\n        tableContainer.className = 'stat-comparison-table';\n        tableContainer.innerHTML = createStatComparisonTable(currentEffects, newEffects);\n\n        // Create button container\n        const buttonContainer = document.createElement('div');\n        buttonContainer.className = 'modal-buttons';\n\n        // Create \"Equip Without Adjusting\" button\n        const equipNoAdjustBtn = document.createElement('button');\n        equipNoAdjustBtn.className = 'modal-btn btn-no-adjust';\n        equipNoAdjustBtn.textContent = 'Equip Only - Don\\'t Adjust Stats';\n        equipNoAdjustBtn.onclick = () => {\n            overlay.remove();\n            resolve('no');\n        };\n\n        // Create Yes button\n        const yesBtn = document.createElement('button');\n        yesBtn.className = 'modal-btn btn-yes';\n        yesBtn.textContent = 'Equip - Adjust Stats';\n        yesBtn.onclick = () => {\n            overlay.remove();\n            resolve('yes');\n        };\n\n        // Create Cancel button\n        const cancelBtn = document.createElement('button');\n        cancelBtn.className = 'modal-btn btn-cancel';\n        cancelBtn.textContent = 'Cancel';\n        cancelBtn.onclick = () => {\n            overlay.remove();\n            resolve('cancel');\n        };\n\n        // Assemble modal\n        buttonContainer.appendChild(equipNoAdjustBtn);\n        buttonContainer.appendChild(yesBtn);\n        buttonContainer.appendChild(cancelBtn);\n\n        modalBox.appendChild(title);\n        modalBox.appendChild(message);\n        modalBox.appendChild(tableContainer);\n        modalBox.appendChild(buttonContainer);\n\n        overlay.appendChild(modalBox);\n        document.body.appendChild(overlay);\n\n        // Handle ESC key\n        const escHandler = (e: KeyboardEvent) => {\n            if (e.key === 'Escape') {\n                overlay.remove();\n                document.removeEventListener('keydown', escHandler);\n                resolve('cancel');\n            }\n        };\n        document.addEventListener('keydown', escHandler);\n\n        // Focus on Yes button by default\n        yesBtn.focus();\n    });\n}\n\n/**\n * Create stat comparison table HTML\n */\nfunction createStatComparisonTable(\n    currentEffects: Record<string, number>,\n    newEffects: Record<string, number>\n): string {\n    // Get all unique stats from both effects (excluding Attack)\n    const allStats = new Set([\n        ...Object.keys(currentEffects),\n        ...Object.keys(newEffects)\n    ]);\n\n    // Filter out Attack stat - companions don't provide raw attack, only attack percentage\n    allStats.delete('Attack');\n\n    if (allStats.size === 0) {\n        return '<div style=\"text-align: center; color: var(--text-secondary);\">No stat changes</div>';\n    }\n\n    // Create the table with losing/gaining/net change format\n    let rows = '';\n    for (const stat of allStats) {\n        const currentValue = currentEffects[stat] || 0;\n        const newValue = newEffects[stat] || 0;\n        const diffValue = newValue - currentValue;\n\n        // Determine if this stat displays as a percentage\n        const isPercentage = !['hitChance', 'maxHp', 'attack', 'mainStat'].includes(stat);\n\n        const formatValue = (val: number): string => {\n            if (val === 0) return '-';\n            const displayValue = val.toFixed(2).replace(/\\.00$/, '');\n            return `${displayValue}${isPercentage ? '%' : ''}`;\n        };\n\n        // Determine color class\n        const currentClass = currentValue > 0 ? 'stat-value-negative' : 'stat-value-neutral';\n        const newClass = newValue > 0 ? 'stat-value-positive' : 'stat-value-neutral';\n        const diffClass = diffValue > 0 ? 'stat-value-positive' : diffValue < 0 ? 'stat-value-negative' : 'stat-value-neutral';\n\n        rows += `\n            <tr>\n                <td>${formatStat(stat)}</td>\n                <td class=\"${currentClass}\">${formatValue(currentValue)}</td>\n                <td class=\"${newClass}\">${formatValue(newValue)}</td>\n                <td class=\"${diffClass}\">${diffValue > 0 ? '+' : diffValue < 0 ? '-' : ''}${formatValue(Math.abs(diffValue))}</td>\n            </tr>\n        `;\n    }\n\n    return `\n        <table class=\"stat-table\">\n            <thead>\n                <tr>\n                    <th>Stat</th>\n                    <th>Losing</th>\n                    <th>Gaining</th>\n                    <th>Net Change</th>\n                </tr>\n            </thead>\n            <tbody>\n                ${rows}\n            </tbody>\n        </table>\n    `;\n}\n"],
  "mappings": "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",
  "names": []
}
