{
  "version": 3,
  "sources": ["weapon-ui.ts"],
  "sourcesContent": ["/**\n * DOM manipulation layer for Weapon Levels system\n * All functions handle only DOM operations and delegate logic to weapons.ts\n */\n\nimport {\n    calculateWeaponAttacks,\n    getMaxLevelForStars,\n    calculateUpgradeGain\n} from './weapons';\nimport type { WeaponRarity, WeaponTier, StarRating } from '@ts/types';\nimport { rarities, tiers, weaponBaseAttackEquipped } from '@ts/types';\nimport { WEAPON_RARITY, WEAPON_TIER, HIGH_TIER_RARITIES } from '@ts/types/constants';\nimport { loadoutStore } from '@ts/store/loadout.store';\n\n// Import and re-export upgrade priority UI functions for external use\nimport {\n    updateUpgradePriorityChain,\n    updateWeaponUpgradeColors\n} from './weapon-priority-ui';\n\nexport { updateWeaponUpgradeColors, updateUpgradePriorityChain };\n\n// =======================\n// Weapon Levels Tab UI\n// =======================\n\n/**\n * Generate the complete HTML for the weapon levels tab\n */\nfunction generateWeaponLevelsHTML(): string {\n    return `\n        <!-- Sub-tab Navigation -->\n        <div class=\"optimization-sub-tabs\">\n            <button id=\"weapon-levels-subtab-button\" class=\"tab-button active\" onclick=\"switchWeaponLevelsTab('weapons-grid')\">Weapons Grid</button>\n            <button id=\"weapon-levels-subtab-button\" class=\"tab-button\" onclick=\"switchWeaponLevelsTab('upgrade-priority')\">Upgrade Priority</button>\n        </div>\n\n        <!-- Weapons Grid Sub-Tab -->\n        <div id=\"weapon-levels-weapons-grid\" class=\"weapon-levels-subtab active\">\n            <!-- Summary Stats -->\n            <div class=\"wl-summary-stats\">\n                <div class=\"wl-summary-card\">\n                    <span class=\"wl-summary-label\">Total Inventory Attack %</span>\n                    <div class=\"wl-summary-value\" id=\"total-inventory-attack\">0%</div>\n                </div>\n                <div class=\"wl-summary-card\">\n                    <span class=\"wl-summary-label\">Equipped Attack %</span>\n                    <div class=\"wl-summary-value\" id=\"equipped-weapon-attack-pct\">0%</div>\n                </div>\n                <div class=\"wl-summary-card\">\n                    <span class=\"wl-summary-label\">Total Weapon Attack %</span>\n                    <div class=\"wl-summary-value\" id=\"total-weapon-attack\">0%</div>\n                </div>\n            </div>\n\n            <!-- Info Banner -->\n            <div class=\"wl-info-banner\">\n                <div class=\"wl-info-banner-content\">\n                    <strong>Instructions:</strong> Click stars to set star rating, enter weapon level. Check the \"E\" button to equip a weapon. The given inventory attack gain % is how much you'd expect if you spent 1k shards on the given weapon.\n                </div>\n            </div>\n\n            <!-- No Weapon Equipped Indicator -->\n            <div id=\"no-weapon-equipped-indicator\" class=\"wl-warning-banner\">\n                <span class=\"wl-warning-banner-icon\">\u26A0\uFE0F</span>\n                <span class=\"wl-warning-banner-text\">No Weapon Equipped - Check the \"E\" button on a weapon to equip it</span>\n            </div>\n\n            <div id=\"weapons-grid\">\n                <!-- Weapons will be generated by initializeWeaponsUI() -->\n            </div>\n        </div>\n\n        <!-- Upgrade Priority Sub-Tab -->\n        <div id=\"weapon-levels-upgrade-priority\" class=\"weapon-levels-subtab\" style=\"display: none;\">\n            <!-- Content populated by weapon-priority-ui.ts -->\n        </div>\n    `;\n}\n\n// =======================\n// Window Global Exports\n// =======================\n// These functions are attached to window for HTML onclick handlers\n\nwindow.setWeaponStars = setWeaponStars;\nwindow.previewStars = previewStars;\nwindow.resetStarPreview = resetStarPreview;\nwindow.handleEquippedCheckboxChange = handleEquippedCheckboxChange;\nwindow.handleWeaponLevelChange = handleWeaponLevelChange;\nwindow.switchWeaponLevelsTab = switchWeaponLevelsTab;\nwindow.updateWeaponBonuses = updateWeaponBonuses;\n\n// =======================\n// DOM Initialization\n// =======================\n\n/**\n * Initialize all weapons UI elements - generates tab HTML and weapon grid\n */\nexport function initializeWeaponsUI(): void {\n    // First, initialize the weapon levels tab container\n    const container = document.getElementById('setup-weapon-levels');\n    if (container) {\n        container.innerHTML = generateWeaponLevelsHTML();\n    }\n\n    // Then, populate the weapons grid\n    const weaponsGrid = document.getElementById('weapons-grid');\n    if (!weaponsGrid) return;\n\n    let html = '';\n\n    rarities.forEach(rarity => {\n        tiers.forEach(tier => {\n            const baseAtk = weaponBaseAttackEquipped[rarity]?.[tier];\n            const rarityCapitalized = rarity.charAt(0).toUpperCase() + rarity.slice(1);\n\n            // Ancient T4 is enabled, T3/T2/T1 are disabled\n            const isDisabled = rarity === WEAPON_RARITY.ANCIENT && tier === WEAPON_TIER.T1;\n\n            if (baseAtk === null || baseAtk === undefined || isDisabled) {\n                html += `<div class=\"weapon-card weapon-card--disabled\" data-rarity=\"${rarity}\">\n                    <div class=\"weapon-header\">${tier.toUpperCase()} ${rarityCapitalized}</div>\n                    <div class=\"weapon-no-data\">No data</div>\n                </div>`;\n            } else {\n                // Default stars: 5 for normal/rare/epic/unique, 1 for legendary/mystic/ancient\n                const defaultStars: StarRating = HIGH_TIER_RARITIES.includes(rarity) ? 1 : 5;\n\n                html += `<div class=\"weapon-card\" id=\"weapon-${rarity}-${tier}\" data-rarity=\"${rarity}\">\n                    <!-- Equipped Checkbox in top right -->\n                    <div class=\"weapon-equipped-toggle\">\n                        <input type=\"checkbox\" id=\"equipped-checkbox-${rarity}-${tier}\"\n                               onchange=\"handleEquippedCheckboxChange('${rarity}', '${tier}')\">\n                        <label for=\"equipped-checkbox-${rarity}-${tier}\"\n                               class=\"weapon-equipped-label\"\n                               id=\"equipped-label-${rarity}-${tier}\">E</label>\n                    </div>\n\n                    <div class=\"weapon-header\">${tier.toUpperCase()} ${rarityCapitalized}</div>\n\n                    <!-- Star Rating -->\n                    <div class=\"weapon-stars\">`;\n\n                for (let i = 1; i <= 5; i++) {\n                    const activeClass = i <= defaultStars ? 'active' : '';\n                    html += `<span class=\"star-individual ${activeClass}\"\n                                   onclick=\"setWeaponStars('${rarity}', '${tier}', ${i})\"\n                                   onmouseenter=\"previewStars('${rarity}', '${tier}', ${i})\"\n                                   onmouseleave=\"resetStarPreview('${rarity}', '${tier}')\"\n                                   id=\"star-${rarity}-${tier}-${i}\">\u2B50</span>`;\n                }\n\n                html += `</div>\n                    <input type=\"hidden\" id=\"stars-${rarity}-${tier}\" value=\"${defaultStars}\">\n\n                    <div class=\"weapon-input-group\">\n                        <label for=\"level-${rarity}-${tier}\">Level</label>\n                        <input type=\"number\" min=\"0\" max=\"200\" class=\"weapon-input\" id=\"level-${rarity}-${tier}\"\n                               placeholder=\"0-200\" value=\"0\" oninput=\"handleWeaponLevelChange('${rarity}', '${tier}')\">\n                    </div>\n\n                    <div class=\"weapon-stats\">\n                        <span class=\"weapon-inventory-display\" id=\"inventory-display-${rarity}-${tier}\">0.0% inventory attack</span>\n                    </div>\n\n                    <div class=\"weapon-upgrade-efficiency\" id=\"upgrade-gain-container-${rarity}-${tier}\">\n                        <span class=\"weapon-efficiency-text\" id=\"upgrade-gain-${rarity}-${tier}\"></span>\n                    </div>\n\n                    <div class=\"weapon-equipped-display\" id=\"equipped-display-${rarity}-${tier}\" style=\"display:none;\">\n                        <span class=\"weapon-equipped-value\" id=\"equipped-value-${rarity}-${tier}\">0.0% equipped attack</span>\n                    </div>\n                </div>`;\n            }\n        });\n    });\n\n    weaponsGrid.innerHTML = html;\n}\n\n/**\n * Load weapons UI from saved state\n */\nexport function loadWeaponsUI(): void {\n    const weapons = loadoutStore.getWeapons();\n    Object.entries(weapons).forEach(([key, weapon]) => {\n        const [rarity, tier] = key.split('-') as [WeaponRarity, WeaponTier];\n\n        // Load level\n        const levelInput = document.getElementById(`level-${rarity}-${tier}`) as HTMLInputElement;\n        if (levelInput) {\n            levelInput.value = weapon.level.toString();\n        }\n\n        // Load stars\n        const starsInput = document.getElementById(`stars-${rarity}-${tier}`) as HTMLInputElement;\n        if (starsInput) {\n            starsInput.value = weapon.stars.toString();\n            // Update star display\n            for (let i = 1; i <= 5; i++) {\n                const starElem = document.getElementById(`star-${rarity}-${tier}-${i}`);\n                if (starElem) {\n                    starElem.classList.toggle('active', i <= weapon.stars);\n                }\n            }\n        }\n\n        // Load equipped state\n        if (weapon.equipped) {\n            setEquippedState(rarity, tier);\n        }\n\n        // Update the display\n        handleWeaponLevelChangeBulk(rarity, tier);\n    });\n\n    updateWeaponBonuses(false);\n    updateWeaponUpgradeColors();\n    updateEquippedWeaponIndicator();\n}\n\n/**\n * Attach event listeners for weapon UI elements\n */\nexport function attachWeaponEventListeners(): void {\n    // Note: Level and star inputs are handled via oninput/onchange in HTML\n    // No additional listeners needed here\n    initializeWeaponMaxLevels();\n}\n\n/**\n * Initialize max level attributes for all weapons based on their current star rating\n */\nfunction initializeWeaponMaxLevels(): void {\n    rarities.forEach(rarity => {\n        tiers.forEach(tier => {\n            const starsInput = document.getElementById(`stars-${rarity}-${tier}`) as HTMLInputElement;\n            const levelInput = document.getElementById(`level-${rarity}-${tier}`) as HTMLInputElement;\n\n            if (starsInput && levelInput) {\n                const stars: StarRating = (parseInt(starsInput.value) || 5) as StarRating;\n                const maxLevel = getMaxLevelForStars(stars);\n                levelInput.setAttribute('max', maxLevel.toString());\n            }\n        });\n    });\n}\n\n// =======================\n// Star Rating Handlers\n// =======================\n\n/**\n * Set weapon star rating\n * @param rarity - Weapon rarity\n * @param tier - Weapon tier\n * @param stars - Star rating to set (1-5)\n */\nexport function setWeaponStars(rarity: WeaponRarity, tier: WeaponTier, stars: StarRating): void {\n    const starsInput = document.getElementById(`stars-${rarity}-${tier}`) as HTMLInputElement;\n    if (!starsInput) return;\n\n    // Toggle behavior: if clicking the same star, set to 0, otherwise set to clicked star\n    const currentStars: StarRating = (parseInt(starsInput.value) || 0) as StarRating;\n    const newStars: StarRating = (currentStars === stars) ? 0 : stars;\n    starsInput.value = newStars.toString();\n\n    // Update star display (1-5 stars)\n    for (let i = 1; i <= 5; i++) {\n        const starElem = document.getElementById(`star-${rarity}-${tier}-${i}`);\n        if (starElem) {\n            const isActive = i <= newStars;\n            starElem.classList.toggle('active', isActive);\n\n            // Add pop animation for newly active stars\n            if (isActive && i > currentStars) {\n                starElem.classList.remove('pop');\n                void starElem.offsetWidth; // Trigger reflow\n                starElem.classList.add('pop');\n            }\n        }\n    }\n\n    // Trigger level change to recalculate and enforce max level\n    handleWeaponLevelChange(rarity, tier);\n\n    // Save via loadout store (auto dual-writes)\n    const key = `${rarity}-${tier}`;\n    loadoutStore.updateWeapon(key, { stars: newStars });\n}\n\n/**\n * Preview star rating on hover\n * @param rarity - Weapon rarity\n * @param tier - Weapon tier\n * @param stars - Star rating to preview\n */\nexport function previewStars(rarity: WeaponRarity, tier: WeaponTier, stars: StarRating): void {\n    // Temporarily show what the stars would look like if this star is clicked\n    for (let i = 1; i <= 5; i++) {\n        const starElem = document.getElementById(`star-${rarity}-${tier}-${i}`);\n        if (starElem) {\n            const shouldBeActive = i <= stars;\n            starElem.style.opacity = shouldBeActive ? '1' : '0.25';\n            starElem.style.filter = shouldBeActive ? 'grayscale(0)' : 'grayscale(0.7)';\n            starElem.style.transform = shouldBeActive ? 'scale(1)' : 'scale(0.85)';\n        }\n    }\n}\n\n/**\n * Reset star preview on mouse leave\n * @param rarity - Weapon rarity\n * @param tier - Weapon tier\n */\nexport function resetStarPreview(rarity: WeaponRarity, tier: WeaponTier): void {\n    // Reset stars to their actual stored value\n    const starsInput = document.getElementById(`stars-${rarity}-${tier}`) as HTMLInputElement;\n    if (!starsInput) return;\n\n    const currentStars: StarRating = (parseInt(starsInput.value) || 0) as StarRating;\n    for (let i = 1; i <= 5; i++) {\n        const starElem = document.getElementById(`star-${rarity}-${tier}-${i}`);\n        if (starElem) {\n            // Remove inline styles and let CSS classes handle it\n            starElem.style.opacity = '';\n            starElem.style.filter = '';\n            starElem.style.transform = '';\n        }\n    }\n}\n\n// =======================\n// Weapon Level Handlers\n// =======================\n\n/**\n * Handle weapon level input change\n * @param rarity - Weapon rarity\n * @param tier - Weapon tier\n */\nexport function handleWeaponLevelChange(rarity: WeaponRarity, tier: WeaponTier): void {\n    const levelInput = document.getElementById(`level-${rarity}-${tier}`) as HTMLInputElement;\n    const starsInput = document.getElementById(`stars-${rarity}-${tier}`) as HTMLInputElement;\n\n    if (!levelInput) return;\n\n    const level = parseInt(levelInput.value) || 0;\n    const stars: StarRating = (starsInput?.value !== undefined && starsInput?.value !== ''\n        ? parseInt(starsInput.value)\n        : 5) as StarRating;\n\n    // Enforce max level based on stars\n    const maxLevel = getMaxLevelForStars(stars);\n    levelInput.setAttribute('max', maxLevel.toString());\n    if (level > maxLevel) {\n        levelInput.value = maxLevel.toString();\n        return handleWeaponLevelChange(rarity, tier);\n    }\n\n    // Calculate inventory and equipped attack percentages\n    const { inventoryAttack, equippedAttack } = calculateWeaponAttacks(rarity, tier, level);\n\n    // Update inventory display\n    const inventoryDisplay = document.getElementById(`inventory-display-${rarity}-${tier}`);\n    if (inventoryDisplay) {\n        inventoryDisplay.textContent = `${inventoryAttack.toFixed(1)}% inventory attack`;\n    }\n\n    // Show/hide upgrade gain display based on whether at max level\n    const upgradeGainContainer = document.getElementById(`upgrade-gain-container-${rarity}-${tier}`);\n    const upgradeGainDisplay = document.getElementById(`upgrade-gain-${rarity}-${tier}`);\n\n    if (level < maxLevel && level > 0) {\n        // Check if this weapon is equipped\n        const equippedDisplay = document.getElementById(`equipped-display-${rarity}-${tier}`);\n        const isEquipped = equippedDisplay && equippedDisplay.style.display !== 'none';\n\n        // Calculate multi-level efficiency (what you actually get per 1k shards)\n        const upgradeGain = calculateUpgradeGain(rarity, tier, level, stars, 1000, isEquipped);\n\n        if (upgradeGainDisplay && upgradeGain.attackGain > 0) {\n            let gainPer1k: number;\n            let totalGainPer1k: number;\n\n            if (upgradeGain.isUnaffordable) {\n                // Next level costs more than 1k - normalize to per 1k\n                gainPer1k = (upgradeGain.attackGain / upgradeGain.singleLevelCost) * 1000;\n                const equippedGainPer1k = (upgradeGain.equippedAttackGain / upgradeGain.singleLevelCost) * 1000;\n                totalGainPer1k = gainPer1k + equippedGainPer1k;\n\n                if (isEquipped) {\n                    upgradeGainDisplay.textContent = `+${totalGainPer1k.toFixed(2)}% per 1k shards (${gainPer1k.toFixed(2)}% inv + ${equippedGainPer1k.toFixed(2)}% eq, next level costs ${upgradeGain.singleLevelCost} shards)`;\n                } else {\n                    upgradeGainDisplay.textContent = `+${gainPer1k.toFixed(2)}% per 1k shards (next level costs ${upgradeGain.singleLevelCost} shards)`;\n                }\n            } else {\n                // Can afford levels with 1k shards\n                gainPer1k = upgradeGain.attackGain;\n                totalGainPer1k = gainPer1k + upgradeGain.equippedAttackGain;\n\n                if (isEquipped) {\n                    upgradeGainDisplay.textContent = `+${totalGainPer1k.toFixed(2)}% per 1k shards (${gainPer1k.toFixed(2)}% inv + ${upgradeGain.equippedAttackGain.toFixed(2)}% eq, ${upgradeGain.levelsGained} levels)`;\n                } else {\n                    upgradeGainDisplay.textContent = `+${gainPer1k.toFixed(2)}% per 1k shards (${upgradeGain.levelsGained} levels)`;\n                }\n            }\n\n            // Store totalGainPer1k for color coding (use total when equipped, otherwise just inventory)\n            upgradeGainDisplay.dataset.gainPer1k = isEquipped ? totalGainPer1k.toString() : gainPer1k.toString();\n\n            if (upgradeGainContainer) {\n                upgradeGainContainer.classList.add('visible');\n            }\n        } else {\n            // Hide if no gain or can't calculate\n            if (upgradeGainContainer) {\n                upgradeGainContainer.classList.remove('visible');\n            }\n        }\n    } else {\n        if (upgradeGainContainer) {\n            upgradeGainContainer.classList.remove('visible');\n        }\n        if (upgradeGainDisplay) {\n            delete upgradeGainDisplay.dataset.gainPer1k;\n        }\n    }\n\n    // Update equipped display if this weapon is currently shown as equipped\n    const equippedDisplay = document.getElementById(`equipped-display-${rarity}-${tier}`);\n    if (equippedDisplay && equippedDisplay.style.display !== 'none') {\n        const equippedValue = document.getElementById(`equipped-value-${rarity}-${tier}`);\n        if (equippedValue) {\n            equippedValue.textContent = `${equippedAttack.toFixed(1)}% equipped attack`;\n        }\n    }\n\n    // Update totals and recalculate damage\n    updateWeaponBonuses();\n    updateEquippedWeaponIndicator();\n    updateWeaponUpgradeColors();\n\n    // Save via loadout store (auto dual-writes)\n    const key = `${rarity}-${tier}`;\n    loadoutStore.updateWeapon(key, { level });\n}\n\n/**\n * Bulk update version for loading - skips global updates to avoid cascading\n * Use this when loading multiple weapons at once, then call updateWeaponBonuses once after\n * @param rarity - Weapon rarity\n * @param tier - Weapon tier\n */\nexport function handleWeaponLevelChangeBulk(rarity: WeaponRarity, tier: WeaponTier): void {\n    const levelInput = document.getElementById(`level-${rarity}-${tier}`) as HTMLInputElement;\n    const starsInput = document.getElementById(`stars-${rarity}-${tier}`) as HTMLInputElement;\n\n    if (!levelInput) return;\n\n    const level = parseInt(levelInput.value) || 0;\n    const stars: StarRating = (starsInput?.value !== undefined && starsInput?.value !== ''\n        ? parseInt(starsInput.value)\n        : 5) as StarRating;\n\n    // Enforce max level based on stars\n    const maxLevel = getMaxLevelForStars(stars);\n    levelInput.setAttribute('max', maxLevel.toString());\n    if (level > maxLevel) {\n        levelInput.value = maxLevel.toString();\n        return handleWeaponLevelChangeBulk(rarity, tier);\n    }\n\n    // Calculate inventory and equipped attack percentages\n    const { inventoryAttack, equippedAttack } = calculateWeaponAttacks(rarity, tier, level);\n\n    // Update inventory display\n    const inventoryDisplay = document.getElementById(`inventory-display-${rarity}-${tier}`);\n    if (inventoryDisplay) {\n        inventoryDisplay.textContent = `${inventoryAttack.toFixed(1)}% inventory attack`;\n    }\n\n    // Show/hide upgrade gain display based on whether at max level\n    const upgradeGainContainer = document.getElementById(`upgrade-gain-container-${rarity}-${tier}`);\n    const upgradeGainDisplay = document.getElementById(`upgrade-gain-${rarity}-${tier}`);\n\n    if (level < maxLevel && level > 0) {\n        // Check if this weapon is equipped\n        const equippedDisplay = document.getElementById(`equipped-display-${rarity}-${tier}`);\n        const isEquipped = equippedDisplay && equippedDisplay.style.display !== 'none';\n\n        // Calculate multi-level efficiency (what you actually get per 1k shards)\n        const upgradeGain = calculateUpgradeGain(rarity, tier, level, stars, 1000, isEquipped);\n\n        if (upgradeGainDisplay && upgradeGain.attackGain > 0) {\n            let gainPer1k: number;\n            let totalGainPer1k: number;\n\n            if (upgradeGain.isUnaffordable) {\n                // Next level costs more than 1k - normalize to per 1k\n                gainPer1k = (upgradeGain.attackGain / upgradeGain.singleLevelCost) * 1000;\n                const equippedGainPer1k = (upgradeGain.equippedAttackGain / upgradeGain.singleLevelCost) * 1000;\n                totalGainPer1k = gainPer1k + equippedGainPer1k;\n\n                if (isEquipped) {\n                    upgradeGainDisplay.textContent = `+${totalGainPer1k.toFixed(2)}% per 1k shards (${gainPer1k.toFixed(2)}% inv + ${equippedGainPer1k.toFixed(2)}% eq, next level costs ${upgradeGain.singleLevelCost} shards)`;\n                } else {\n                    upgradeGainDisplay.textContent = `+${gainPer1k.toFixed(2)}% per 1k shards (next level costs ${upgradeGain.singleLevelCost} shards)`;\n                }\n            } else {\n                // Can afford levels with 1k shards\n                gainPer1k = upgradeGain.attackGain;\n                totalGainPer1k = gainPer1k + upgradeGain.equippedAttackGain;\n\n                if (isEquipped) {\n                    upgradeGainDisplay.textContent = `+${totalGainPer1k.toFixed(2)}% per 1k shards (${gainPer1k.toFixed(2)}% inv + ${upgradeGain.equippedAttackGain.toFixed(2)}% eq, ${upgradeGain.levelsGained} levels)`;\n                } else {\n                    upgradeGainDisplay.textContent = `+${gainPer1k.toFixed(2)}% per 1k shards (${upgradeGain.levelsGained} levels)`;\n                }\n            }\n\n            // Store totalGainPer1k for color coding (use total when equipped, otherwise just inventory)\n            upgradeGainDisplay.dataset.gainPer1k = isEquipped ? totalGainPer1k.toString() : gainPer1k.toString();\n\n            if (upgradeGainContainer) {\n                upgradeGainContainer.classList.add('visible');\n            }\n        } else {\n            // Hide if no gain or can't calculate\n            if (upgradeGainContainer) {\n                upgradeGainContainer.classList.remove('visible');\n            }\n        }\n    } else {\n        if (upgradeGainContainer) {\n            upgradeGainContainer.classList.remove('visible');\n        }\n        if (upgradeGainDisplay) {\n            delete upgradeGainDisplay.dataset.gainPer1k;\n        }\n    }\n\n    // Update equipped display if this weapon is currently shown as equipped\n    const equippedDisplay = document.getElementById(`equipped-display-${rarity}-${tier}`);\n    if (equippedDisplay && equippedDisplay.style.display !== 'none') {\n        const equippedValue = document.getElementById(`equipped-value-${rarity}-${tier}`);\n        if (equippedValue) {\n            equippedValue.textContent = `${equippedAttack.toFixed(1)}% equipped attack`;\n        }\n    }\n\n    // NOTE: Does NOT call updateWeaponBonuses() to avoid cascading during bulk operations\n}\n\n// =======================\n// Equipped Weapon Handlers\n// =======================\n\n/**\n * Refresh all equipped weapon UI states from the loadout store\n * This ensures UI is in sync with data state\n */\nfunction refreshAllEquippedStates(): void {\n    const weapons = loadoutStore.getWeapons();\n\n    Object.entries(weapons).forEach(([key, weapon]) => {\n        const [rarity, tier] = key.split('-') as [WeaponRarity, WeaponTier];\n        const checkbox = document.getElementById(`equipped-checkbox-${rarity}-${tier}`) as HTMLInputElement;\n        const equippedDisplay = document.getElementById(`equipped-display-${rarity}-${tier}`);\n        const card = document.getElementById(`weapon-${rarity}-${tier}`);\n\n        if (!checkbox) return;\n\n        // Update checkbox state to match store\n        checkbox.checked = weapon.equipped;\n\n        // Update UI based on equipped state\n        if (weapon.equipped) {\n            const levelInput = document.getElementById(`level-${rarity}-${tier}`) as HTMLInputElement;\n            const level = parseInt(levelInput?.value) || 0;\n            const { equippedAttack } = calculateWeaponAttacks(rarity, tier, level);\n\n            const equippedValue = document.getElementById(`equipped-value-${rarity}-${tier}`);\n            if (equippedValue) {\n                equippedValue.textContent = `${equippedAttack.toFixed(1)}% equipped attack`;\n            }\n\n            if (equippedDisplay) equippedDisplay.style.display = 'block';\n            if (card) card.classList.add('equipped');\n        } else {\n            if (equippedDisplay) equippedDisplay.style.display = 'none';\n            if (card) card.classList.remove('equipped');\n        }\n    });\n}\n\n/**\n * Handle equipped checkbox change\n * @param rarity - Weapon rarity\n * @param tier - Weapon tier\n */\nexport function handleEquippedCheckboxChange(rarity: WeaponRarity, tier: WeaponTier): void {\n    const checkbox = document.getElementById(`equipped-checkbox-${rarity}-${tier}`) as HTMLInputElement;\n    if (!checkbox) return;\n\n    const key = `${rarity}-${tier}`;\n\n    if (checkbox.checked) {\n        // When equipping a weapon, unequip all others via the store\n        const weapons = loadoutStore.getWeapons();\n        Object.entries(weapons).forEach(([otherKey, otherWeapon]) => {\n            if (otherKey !== key && otherWeapon.equipped) {\n                loadoutStore.updateWeapon(otherKey, { equipped: false });\n            }\n        });\n\n        // Equip the selected weapon\n        loadoutStore.updateWeapon(key, { equipped: true });\n    } else {\n        // Unequip the selected weapon\n        loadoutStore.updateWeapon(key, { equipped: false });\n    }\n\n    // Refresh all equipped UI states from the updated store\n    refreshAllEquippedStates();\n\n    updateWeaponBonuses();\n    updateEquippedWeaponIndicator();\n}\n\n/**\n * Bulk update version for loading - skips save and global updates to avoid cascading\n * Use this when loading equipped state, then call updateWeaponBonuses once after\n * @param rarity - Weapon rarity\n * @param tier - Weapon tier\n */\nexport function setEquippedState(rarity: WeaponRarity, tier: WeaponTier): void {\n    const checkbox = document.getElementById(`equipped-checkbox-${rarity}-${tier}`) as HTMLInputElement;\n    const equippedDisplay = document.getElementById(`equipped-display-${rarity}-${tier}`);\n    const card = document.getElementById(`weapon-${rarity}-${tier}`);\n\n    if (!checkbox) return;\n\n    checkbox.checked = true;\n    // Uncheck all other equipped checkboxes\n    rarities.forEach(r => {\n        tiers.forEach(t => {\n            if (r !== rarity || t !== tier) {\n                const otherCheckbox = document.getElementById(`equipped-checkbox-${r}-${t}`) as HTMLInputElement;\n                const otherDisplay = document.getElementById(`equipped-display-${r}-${t}`);\n                const otherCard = document.getElementById(`weapon-${r}-${t}`);\n\n                if (otherCheckbox) otherCheckbox.checked = false;\n                if (otherDisplay) otherDisplay.style.display = 'none';\n                if (otherCard) otherCard.classList.remove('equipped');\n            }\n        });\n    });\n\n    // Calculate and display equipped attack\n    const levelInput = document.getElementById(`level-${rarity}-${tier}`) as HTMLInputElement;\n    const level = parseInt(levelInput?.value) || 0;\n    const { equippedAttack } = calculateWeaponAttacks(rarity, tier, level);\n\n    const equippedValue = document.getElementById(`equipped-value-${rarity}-${tier}`);\n    if (equippedValue) {\n        equippedValue.textContent = `${equippedAttack.toFixed(1)}% equipped attack`;\n    }\n\n    if (equippedDisplay) equippedDisplay.style.display = 'block';\n    if (card) card.classList.add('equipped');\n}\n\n/**\n * Update the equipped weapon indicator\n */\nexport function updateEquippedWeaponIndicator(): void {\n    // Check if any weapon is equipped\n    let hasEquipped = false;\n\n    rarities.forEach(rarity => {\n        tiers.forEach(tier => {\n            const equippedDisplay = document.getElementById(`equipped-display-${rarity}-${tier}`);\n            if (equippedDisplay && equippedDisplay.style.display !== 'none') {\n                hasEquipped = true;\n            }\n        });\n    });\n\n    // Show/hide the indicator\n    const indicator = document.getElementById('no-weapon-equipped-indicator');\n    if (indicator) {\n        indicator.style.display = hasEquipped ? 'none' : 'block';\n    }\n}\n\n// =======================\n// Weapon Bonus Calculations\n// =======================\n\n/**\n * Update weapon bonus displays and recalculate damage\n */\nexport function updateWeaponBonuses(calculateDamage: boolean = true): void {\n    let totalInventory = 0;\n    let equippedBonus = 0;\n\n    rarities.forEach(rarity => {\n        tiers.forEach(tier => {\n            const levelInput = document.getElementById(`level-${rarity}-${tier}`) as HTMLInputElement;\n            const equippedDisplay = document.getElementById(`equipped-display-${rarity}-${tier}`);\n\n            if (levelInput) {\n                const level = parseInt(levelInput.value) || 0;\n                const { inventoryAttack, equippedAttack } = calculateWeaponAttacks(rarity, tier, level);\n\n                totalInventory += inventoryAttack;\n\n                // Check if equipped based on display visibility\n                if (equippedDisplay && equippedDisplay.style.display !== 'none') {\n                    equippedBonus = equippedAttack;\n                }\n            }\n        });\n    });\n\n    const totalInventoryEl = document.getElementById('total-inventory-attack');\n    const equippedEl = document.getElementById('equipped-weapon-attack-pct');\n    const totalEl = document.getElementById('total-weapon-attack');\n\n    if (totalInventoryEl) totalInventoryEl.textContent = totalInventory.toFixed(1) + '%';\n    if (equippedEl) equippedEl.textContent = equippedBonus.toFixed(1) + '%';\n    if (totalEl) totalEl.textContent = (totalInventory + equippedBonus).toFixed(1) + '%';\n\n    // Persist weapon attack bonus to loadout store\n    loadoutStore.updateWeaponAttackBonus({\n        totalAttack: totalInventory + equippedBonus,\n        equippedAttack: equippedBonus\n    });\n\n    // Recalculate damage\n    if(calculateDamage)\n    {\n       // calculate();\n    }\n\n    // Update upgrade priority chain\n    updateUpgradePriorityChain();\n}\n\n// =======================\n// Tab Switching\n// =======================\n\n/**\n * Switch weapon levels sub-tabs\n * @param tabName - Name of the tab to switch to\n */\nexport function switchWeaponLevelsTab(tabName: string): void {\n    const allSubTabContent = document.querySelectorAll('.weapon-levels-subtab');\n    const allSubTabButtons = document.querySelectorAll('#weapon-levels-subtab-button');\n\n    // Hide all subtabs\n    allSubTabContent.forEach(tab => {\n        tab.classList.remove('active');\n        (tab as HTMLElement).style.display = 'none';\n    });\n\n    // Remove active from all buttons\n    allSubTabButtons.forEach(btn => {\n        btn.classList.remove('active');\n    });\n\n    // Show selected subtab\n    const selectedTab = document.getElementById(`weapon-levels-${tabName}`);\n    if (selectedTab) {\n        selectedTab.classList.add('active');\n        (selectedTab as HTMLElement).style.display = 'block';\n    }\n\n    // Activate button - Find the button by matching the onclick attribute\n    allSubTabButtons.forEach(btn => {\n        const onclickAttr = btn.getAttribute('onclick');\n        if (onclickAttr && onclickAttr.includes(tabName)) {\n            btn.classList.add('active');\n        }\n    });\n\n    // Calculate upgrade priority when switching to the priority tab\n    if (tabName === 'upgrade-priority') {\n        setTimeout(() => {\n            updateUpgradePriorityChain();\n        }, 100);\n    }\n}\n"],
  "mappings": "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",
  "names": ["equippedDisplay"]
}
