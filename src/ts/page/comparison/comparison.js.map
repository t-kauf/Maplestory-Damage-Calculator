{
  "version": 3,
  "sources": ["comparison.ts"],
  "sourcesContent": ["/**\n * Comparison Equipment - Pure Logic Module\n *\n * This module contains all business logic for comparison equipment,\n * separate from UI rendering and event handling.\n *\n * Responsibilities:\n * - Validation of comparison items\n * - Damage calculations\n * - Data transformations\n * - Import/export utilities\n */\n\nimport type { ComparisonItem, ComparisonStatLine, EquipmentSlotId } from '@ts/types/page/gear-lab/gear-lab.types';\nimport { gearLabStore } from '@ts/store/gear-lab-store';\nimport { StatCalculationService } from '@ts/services/stat-calculation-service';\nimport { BaseStats, STAT } from '@ts/types';\nimport { loadoutStore } from '@ts/store/loadout.store';\nimport { calculatePassiveGainsForItem } from '@ts/services/item-comparison.service';\nimport type { StatId } from '@ts/types/constants';\n\n// ============================================================================\n// TYPE DEFINITIONS\n// ============================================================================\n\n/**\n * Result of a damage calculation for a comparison item\n */\nexport interface ComparisonCalculationResult {\n    guid: string;\n    name: string;\n    bossDPS: number;\n    normalDPS: number;\n    bossExpectedDamage: number;\n    normalExpectedDamage: number;\n    stats: BaseStats;\n    passiveGains?: {\n        statChanges: Record<string, number>;\n        breakdown: Array<{\n            passive: string;\n            stat: string;\n            statDisplay?: string;\n            baseValue: number;\n            bonusValue: number;\n            gain: number;\n            isPercent: boolean;\n            note?: string;\n        }>;\n        complexPassives: Array<{\n            passive: string;\n            stat?: string;\n            baseValue?: number;\n            bonusValue?: number;\n            gain?: number;\n            isPercent?: boolean;\n            note?: string;\n        }>;\n        complexStatChanges: Record<string, number>;\n    };\n}\n\n/**\n * Equipment slot configuration\n */\nexport interface EquipmentSlotConfig {\n    id: EquipmentSlotId;\n    name: string;\n    hasMainStat: boolean;\n}\n\n// ============================================================================\n// CONSTANTS\n// ============================================================================\n\n/**\n * Equipment slot configurations\n */\nexport const EQUIPMENT_SLOTS: Record<EquipmentSlotId, EquipmentSlotConfig> = {\n    head: { id: 'head', name: 'Head', hasMainStat: false },\n    cape: { id: 'cape', name: 'Cape', hasMainStat: false },\n    chest: { id: 'chest', name: 'Chest', hasMainStat: false },\n    shoulders: { id: 'shoulders', name: 'Shoulders', hasMainStat: false },\n    legs: { id: 'legs', name: 'Legs', hasMainStat: false },\n    belt: { id: 'belt', name: 'Belt', hasMainStat: false },\n    gloves: { id: 'gloves', name: 'Gloves', hasMainStat: false },\n    boots: { id: 'boots', name: 'Boots', hasMainStat: false },\n    ring: { id: 'ring', name: 'Ring', hasMainStat: true },\n    neck: { id: 'neck', name: 'Neck', hasMainStat: true },\n    'eye-accessory': { id: 'eye-accessory', name: 'Eye Accessory', hasMainStat: true }\n};\n\n/**\n * Maximum number of stat lines allowed per item\n */\nexport const MAX_STAT_LINES = 10;\n\n// ============================================================================\n// VALIDATION\n// ============================================================================\n\n/**\n * Validate a comparison item\n * @param item - Item to validate\n * @returns True if valid, false otherwise\n */\nexport function validateComparisonItem(item: ComparisonItem): boolean {\n    if (!item.guid || typeof item.guid !== 'string') return false;\n    if (!item.name || typeof item.name !== 'string') return false;\n    if (typeof item.attack !== 'number' || item.attack < 0) return false;\n    if (typeof item.mainStat !== 'number' || item.mainStat < 0) return false;\n    if (!Array.isArray(item.statLines)) return false;\n\n    // Validate stat lines\n    for (const statLine of item.statLines) {\n        if (typeof statLine.type !== 'string') return false;\n        if (typeof statLine.value !== 'number') return false;\n    }\n\n    return true;\n}\n\n/**\n * Validate a stat line\n * @param statLine - Stat line to validate\n * @returns True if valid, false otherwise\n */\nexport function validateStatLine(statLine: ComparisonStatLine): boolean {\n    return typeof statLine.type === 'string' && typeof statLine.value === 'number';\n}\n\n// ============================================================================\n// DATA RETRIEVAL\n// ============================================================================\n\n/**\n * Get comparison items for a slot\n * @param slotId - Equipment slot ID\n * @returns Array of comparison items\n */\nexport function getComparisonItems(slotId: EquipmentSlotId): ComparisonItem[] {\n    return gearLabStore.getComparisonItems(slotId);\n}\n\n/**\n * Get a specific comparison item\n * @param slotId - Equipment slot ID\n * @param guid - Item GUID\n * @returns Item data or null if not found\n */\nexport function getComparisonItem(slotId: EquipmentSlotId, guid: string): ComparisonItem | null {\n    return gearLabStore.getComparisonItem(slotId, guid);\n}\n\n/**\n * Get equipped item data for a slot from the loadout store\n * @param slotId - Equipment slot ID\n * @returns Equipment data with attack, mainStat, and statLines, or null if slot is empty\n */\nexport function getEquippedItemData(slotId: EquipmentSlotId): {\n    attack: number;\n    mainStat: number;\n    statLines: Array<{ type: string; value: number }>;\n} | null {\n    const equipmentData = loadoutStore.getEquipmentData();\n    const slotData = equipmentData[slotId];\n    if (!slotData) return null;\n\n    // Convert StatLine[] to generic format expected by calculation service\n    const statLines = (slotData.statLines || []).map(sl => ({\n        type: sl.type,\n        value: sl.value\n    }));\n\n    return {\n        attack: slotData.attack,\n        mainStat: slotData.mainStat || 0,\n        statLines\n    };\n}\n\n// ============================================================================\n// ITEM OPERATIONS\n// ============================================================================\n\n/**\n * Add a new comparison item\n * @param slotId - Equipment slot ID\n * @param item - Item data (without guid)\n * @returns The created item with generated guid\n */\nexport function addComparisonItem(\n    slotId: EquipmentSlotId,\n    item: Omit<ComparisonItem, 'guid'>\n): ComparisonItem {\n    return gearLabStore.addComparisonItem(slotId, item);\n}\n\n/**\n * Update a comparison item\n * @param slotId - Equipment slot ID\n * @param guid - Item GUID\n * @param data - Partial item data to update\n * @returns True if successful, false otherwise\n */\nexport function updateComparisonItem(\n    slotId: EquipmentSlotId,\n    guid: string,\n    data: Partial<ComparisonItem>\n): boolean {\n    return gearLabStore.updateComparisonItem(slotId, guid, data);\n}\n\n/**\n * Remove a comparison item\n * @param slotId - Equipment slot ID\n * @param guid - Item GUID\n * @returns True if successful, false otherwise\n */\nexport function removeComparisonItem(slotId: EquipmentSlotId, guid: string): boolean {\n    return gearLabStore.removeComparisonItem(slotId, guid);\n}\n\n/**\n * Clear all comparison items for a slot\n * @param slotId - Equipment slot ID\n */\nexport function clearComparisonItems(slotId: EquipmentSlotId): void {\n    gearLabStore.clearComparisonItems(slotId);\n}\n\n// ============================================================================\n// STAT LINE OPERATIONS\n// ============================================================================\n\n/**\n * Add a stat line to a comparison item\n * @param slotId - Equipment slot ID\n * @param guid - Item GUID\n * @param statLine - Stat line data\n * @returns True if successful, false otherwise\n */\nexport function addStatLine(\n    slotId: EquipmentSlotId,\n    guid: string,\n    statLine: ComparisonStatLine\n): boolean {\n    const item = getComparisonItem(slotId, guid);\n    if (!item) return false;\n\n    // Check max stat lines\n    if (item.statLines.length >= MAX_STAT_LINES) {\n        console.warn(`Maximum ${MAX_STAT_LINES} stat lines allowed per item`);\n        return false;\n    }\n\n    return gearLabStore.addComparisonItemStatLine(slotId, guid, statLine);\n}\n\n/**\n * Remove a stat line from a comparison item\n * @param slotId - Equipment slot ID\n * @param guid - Item GUID\n * @param statLineIndex - Index of stat line to remove\n * @returns True if successful, false otherwise\n */\nexport function removeStatLine(\n    slotId: EquipmentSlotId,\n    guid: string,\n    statLineIndex: number\n): boolean {\n    return gearLabStore.removeComparisonItemStatLine(slotId, guid, statLineIndex);\n}\n\n// ============================================================================\n// DAMAGE CALCULATIONS\n// ============================================================================\n\n/**\n * Calculate damage for a comparison item\n * @param slotId - Equipment slot ID\n * @param item - Comparison item data\n * @returns Calculation result\n */\nexport function calculateItemDamage(\n    slotId: EquipmentSlotId,\n    item: ComparisonItem\n): ComparisonCalculationResult {\n    // Get base stats and context\n    const baseStats = loadoutStore.getBaseStats();\n    const currentClass = loadoutStore.getSelectedClass();\n    const characterLevel = loadoutStore.getCharacterLevel();\n\n    // Calculate using StatCalculationService\n    const service = new StatCalculationService(baseStats);\n\n    // Remove equipped item stats from this slot to ensure clean comparison\n    const equippedData = getEquippedItemData(slotId);\n    if (equippedData) {\n        // Subtract equipped item's attack and main stat\n        service.subtract(STAT.ATTACK.id, equippedData.attack);\n        service.subtract(STAT.PRIMARY_MAIN_STAT.id, equippedData.mainStat);\n\n        // Subtract equipped item's stat lines\n        equippedData.statLines.forEach(statLine => {\n            service.subtract(statLine.type, statLine.value);\n        });\n    }\n\n    // Add comparison item attack and main stat\n    service.add(STAT.ATTACK.id, item.attack);\n    service.add(STAT.PRIMARY_MAIN_STAT.id, item.mainStat);\n\n    // Add comparison item stat lines\n    item.statLines.forEach(statLine => {\n        service.add(statLine.type, statLine.value);\n    });\n\n    // Calculate passive gains from job skill levels\n    let passiveGains: ComparisonCalculationResult['passiveGains'] = undefined;\n\n    if (currentClass) {\n        const passiveResult = calculatePassiveGainsForItem(item, {\n            currentClass,\n            characterLevel,\n            baseStats\n        });\n\n        // Apply non-complex passive stat gains\n        Object.entries(passiveResult.statChanges).forEach(([stat, value]) => {\n            if (value !== 0) {\n                service.add(stat, value);\n            }\n        });\n\n        // Store passive gains for UI display (including complex passives)\n        if (passiveResult.breakdown.length > 0 || passiveResult.complexPassives.length > 0) {\n            passiveGains = {\n                statChanges: passiveResult.statChanges,\n                breakdown: passiveResult.breakdown,\n                complexPassives: passiveResult.complexPassives,\n                complexStatChanges: passiveResult.complexStatChanges\n            };\n        }\n    }\n\n    const bossResult = service.compute('boss');\n    const normalResult = service.compute('normal');\n\n    return {\n        guid: item.guid,\n        name: item.name,\n        bossDPS: bossResult.dps,\n        normalDPS: normalResult.dps,\n        bossExpectedDamage: bossResult.expectedDamage,\n        normalExpectedDamage: normalResult.expectedDamage,\n        stats: service.getStats(),\n        passiveGains\n    };\n}\n\n/**\n * Calculate damage for all comparison items in a slot\n * @param slotId - Equipment slot ID\n * @returns Array of calculation results\n */\nexport function calculateAllItemsDamage(slotId: EquipmentSlotId): ComparisonCalculationResult[] {\n    const items = getComparisonItems(slotId);\n    return items.map(item => calculateItemDamage(slotId, item));\n}\n\n/**\n * Calculate equipped item damage\n *\n * IMPORTANT: Base stats include the equipped item's direct stat contributions\n * (attack, main stat, stat lines) but do NOT automatically include passive gains\n * from skill level bonuses. We need to calculate and apply those passive gains\n * explicitly, just like we do for comparison items.\n *\n * @param slotId - Equipment slot ID\n * @returns Calculation result or null if no equipped data\n */\nexport function calculateEquippedDamage(slotId: EquipmentSlotId): ComparisonCalculationResult | null {\n    const equippedData = getEquippedItemData(slotId);\n    if (!equippedData) return null;\n\n    const baseStats = loadoutStore.getBaseStats();\n    const currentClass = loadoutStore.getSelectedClass();\n    const characterLevel = loadoutStore.getCharacterLevel();\n\n    // Base stats include the equipped item's direct stat contribution\n    const service = new StatCalculationService(baseStats);\n\n    // Calculate passive gains from equipped item's job skill levels (if any)\n    let passiveGains: ComparisonCalculationResult['passiveGains'] = undefined;\n\n    if (currentClass && characterLevel != null) {\n        // Convert equipped data to ComparisonItem format for passive calculation\n        const equippedAsComparisonItem: ComparisonItem = {\n            guid: 'equipped',\n            name: 'Equipped Item',\n            attack: equippedData.attack,\n            mainStat: equippedData.mainStat,\n            statLines: equippedData.statLines.map(sl => ({\n                type: sl.type as StatId,\n                value: sl.value\n            }))\n        };\n\n        const passiveResult = calculatePassiveGainsForItem(equippedAsComparisonItem, {\n            currentClass,\n            characterLevel,\n            baseStats\n        });\n\n        // Apply non-complex passive stat gains\n        Object.entries(passiveResult.statChanges).forEach(([stat, value]) => {\n            if (value !== 0) {\n                service.add(stat, value);\n            }\n        });\n\n        // Store passive gains for UI display (including complex passives)\n        if (passiveResult.breakdown.length > 0 || passiveResult.complexPassives.length > 0) {\n            passiveGains = {\n                statChanges: passiveResult.statChanges,\n                breakdown: passiveResult.breakdown,\n                complexPassives: passiveResult.complexPassives,\n                complexStatChanges: passiveResult.complexStatChanges\n            };\n        }\n    }\n\n    const bossResult = service.compute('boss');\n    const normalResult = service.compute('normal');\n\n    return {\n        guid: 'equipped',\n        name: 'Equipped Item',\n        bossDPS: bossResult.dps,\n        normalDPS: normalResult.dps,\n        bossExpectedDamage: bossResult.expectedDamage,\n        normalExpectedDamage: normalResult.expectedDamage,\n        stats: service.getStats(),\n        passiveGains\n    };\n}\n\n// ============================================================================\n// UTILITY FUNCTIONS\n// ============================================================================\n\n/**\n * Get slot configuration by ID\n * @param slotId - Equipment slot ID\n * @returns Slot configuration or null if not found\n */\nexport function getSlotConfig(slotId: EquipmentSlotId): EquipmentSlotConfig | null {\n    return EQUIPMENT_SLOTS[slotId] || null;\n}\n\n/**\n * Get all slot configurations\n * @returns Array of all slot configurations\n */\nexport function getAllSlotConfigs(): EquipmentSlotConfig[] {\n    return Object.values(EQUIPMENT_SLOTS);\n}\n\n/**\n * Generate a default item name for a new comparison item\n * @param slotId - Equipment slot ID\n * @param itemCount - Current number of items in the slot\n * @returns Default item name\n */\nexport function generateDefaultItemName(slotId: EquipmentSlotId, itemCount: number): string {\n    return `Item ${itemCount + 1}`;\n}\n\n// ============================================================================\n// EQUIP CONFIRMATION MODAL\n// ============================================================================\n\n/**\n * Result of equip stat changes calculation\n */\nexport interface EquipStatChanges {\n    directStats: {\n        old: Record<string, number>;\n        new: Record<string, number>;\n        diff: Record<string, number>;\n    };\n    passiveGains: {\n        old: ReturnType<typeof calculatePassiveGainsForItem>;\n        new: ReturnType<typeof calculatePassiveGainsForItem>;\n        diff: Record<string, number>;\n    };\n    hasAnyChanges: boolean;\n}\n\n/**\n * Calculate stat changes between old equipped item and new comparison item\n * @param slotId - Equipment slot ID\n * @param newItem - Comparison item to equip\n * @returns Stat changes including passive gains\n */\nexport function calculateEquipStatChanges(\n    slotId: EquipmentSlotId,\n    newItem: ComparisonItem\n): EquipStatChanges {\n    const baseStats = loadoutStore.getBaseStats();\n    const currentClass = loadoutStore.getSelectedClass();\n    const characterLevel = loadoutStore.getCharacterLevel();\n\n    // Get old equipped item\n    const equippedData = getEquippedItemData(slotId);\n\n    // Calculate direct stats for old item\n    const oldDirectStats: Record<string, number> = {};\n    if (equippedData) {\n        oldDirectStats[STAT.ATTACK.id] = equippedData.attack;\n        oldDirectStats[STAT.PRIMARY_MAIN_STAT.id] = equippedData.mainStat;\n        equippedData.statLines.forEach(statLine => {\n            oldDirectStats[statLine.type] = (oldDirectStats[statLine.type] || 0) + statLine.value;\n        });\n    }\n\n    // Calculate direct stats for new item\n    const newDirectStats: Record<string, number> = {};\n    newDirectStats[STAT.ATTACK.id] = newItem.attack;\n    newDirectStats[STAT.PRIMARY_MAIN_STAT.id] = newItem.mainStat;\n    newItem.statLines.forEach(statLine => {\n        newDirectStats[statLine.type] = (newDirectStats[statLine.type] || 0) + statLine.value;\n    });\n\n    // Calculate passive gains for old item\n    const oldPassiveGains = equippedData && currentClass\n        ? calculatePassiveGainsForItem(\n            {\n                guid: 'old',\n                name: 'Old Item',\n                attack: equippedData.attack,\n                mainStat: equippedData.mainStat,\n                statLines: equippedData.statLines.map(sl => ({\n                    type: sl.type as StatId,\n                    value: sl.value\n                }))\n            },\n            { currentClass, characterLevel, baseStats }\n        )\n        : { statChanges: {}, breakdown: [], complexPassives: [], complexStatChanges: {} };\n\n    // Calculate passive gains for new item\n    const newPassiveGains = currentClass\n        ? calculatePassiveGainsForItem(\n            newItem,\n            { currentClass, characterLevel, baseStats }\n        )\n        : { statChanges: {}, breakdown: [], complexPassives: [], complexStatChanges: {} };\n\n    // Calculate direct stats diff ONLY (no passive gains)\n    const directDiff: Record<string, number> = {};\n    Object.keys({ ...oldDirectStats, ...newDirectStats }).forEach(stat => {\n        const oldValue = oldDirectStats[stat] || 0;\n        const newValue = newDirectStats[stat] || 0;\n        directDiff[stat] = newValue - oldValue;\n    });\n\n    // Calculate passive gains diff (separate from direct stats)\n    const passiveDiff: Record<string, number> = {};\n    Object.keys({ ...oldPassiveGains.statChanges, ...newPassiveGains.statChanges }).forEach(stat => {\n        const oldValue = oldPassiveGains.statChanges[stat] || 0;\n        const newValue = newPassiveGains.statChanges[stat] || 0;\n        passiveDiff[stat] = newValue - oldValue;\n    });\n\n    const hasAnyChanges =\n        Object.values(directDiff).some(v => v !== 0) ||\n        Object.values(passiveDiff).some(v => v !== 0) ||\n        oldPassiveGains.breakdown.length > 0 ||\n        newPassiveGains.breakdown.length > 0;\n\n    return {\n        directStats: {\n            old: oldDirectStats,\n            new: newDirectStats,\n            diff: directDiff\n        },\n        passiveGains: {\n            old: oldPassiveGains,\n            new: newPassiveGains,\n            diff: passiveDiff\n        },\n        hasAnyChanges\n    };\n}\n\n/**\n * Format stat name for display\n */\nfunction formatStatForDisplay(statId: string): string {\n    // Find the STAT entry with matching ID\n    const statEntry = Object.values(STAT).find(stat => stat.id === statId);\n    return statEntry?.label || statId;\n}\n\n/**\n * Check if a stat should display as a percentage\n */\nfunction isStatPercentage(statId: string): boolean {\n    // Raw value stats (not shown as percentage): HitChance, MaxHp, Attack, MainStat, Defense, Skill Levels\n    return !['hitChance', 'maxHp', 'attack', 'mainStat', 'defense', 'skillLevel1st', 'skillLevel2nd', 'skillLevel3rd', 'skillLevel4th', 'skillLevelAll'].includes(statId);\n}\n\n/**\n * Create stat comparison table HTML for equip modal\n */\nfunction createEquipStatComparisonTable(statChanges: EquipStatChanges): string {\n    const { directStats: { old: oldDirect, new: newDirect, diff: directDiff }, passiveGains } = statChanges;\n\n    // Use pre-calculated passive diff from calculateEquipStatChanges\n    const { diff: passiveDiff } = passiveGains;\n\n    // Filter direct stats to only show affected ones (where diff != 0)\n    const affectedDirectStats = Object.entries(directDiff).filter(([stat, diff]) => diff !== 0);\n\n    // Filter passive stats to only show affected ones\n    const affectedPassiveStats = Object.entries(passiveDiff).filter(([stat, diff]) => diff !== 0);\n\n    const hasDirectChanges = affectedDirectStats.length > 0;\n    const hasPassiveChanges = affectedPassiveStats.length > 0;\n\n    // Create direct stats table\n    const createDirectStatsTable = () => {\n        if (!hasDirectChanges) {\n            return '<div style=\"text-align: center; color: var(--text-secondary); padding: 20px;\">No direct stat changes</div>';\n        }\n\n        let rows = '';\n        affectedDirectStats.forEach(([stat, diffValue]) => {\n            const oldValue = oldDirect[stat] || 0;\n            const newValue = newDirect[stat] || 0;\n            const isPercent = isStatPercentage(stat);\n\n            const formatValue = (val: number): string => {\n                const displayValue = val.toFixed(2).replace(/\\.00$/, '');\n                return `${displayValue}${isPercent ? '%' : ''}`;\n            };\n\n            const oldClass = oldValue > 0 ? 'stat-value-negative' : 'stat-value-neutral';\n            const newClass = newValue > 0 ? 'stat-value-positive' : 'stat-value-neutral';\n            const diffClass = diffValue > 0 ? 'stat-value-positive' : diffValue < 0 ? 'stat-value-negative' : 'stat-value-neutral';\n\n            rows += `\n                <tr>\n                    <td>${formatStatForDisplay(stat)}</td>\n                    <td class=\"${oldClass}\">${formatValue(oldValue)}</td>\n                    <td class=\"${newClass}\">${formatValue(newValue)}</td>\n                    <td class=\"${diffClass}\">${diffValue > 0 ? '+' : diffValue < 0 ? '-' : ''}${formatValue(Math.abs(diffValue))}</td>\n                </tr>\n            `;\n        });\n\n        return `\n            <table class=\"stat-table\">\n                <thead>\n                    <tr>\n                        <th>Stat</th>\n                        <th>Losing</th>\n                        <th>Gaining</th>\n                        <th>Net Change</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    ${rows}\n                </tbody>\n            </table>\n        `;\n    };\n\n    // Create passive stats table\n    const createPassiveStatsTable = () => {\n        if (!hasPassiveChanges) {\n            return '<div style=\"text-align: center; color: var(--text-secondary); padding: 20px;\">No passive stat changes</div>';\n        }\n\n        let rows = '';\n        affectedPassiveStats.forEach(([stat, diffValue]) => {\n            const oldValue = passiveGains.old.statChanges[stat] || 0;\n            const newValue = passiveGains.new.statChanges[stat] || 0;\n            const isPercent = isStatPercentage(stat);\n\n            const formatValue = (val: number): string => {\n                const displayValue = val.toFixed(2).replace(/\\.00$/, '');\n                return `${displayValue}${isPercent ? '%' : ''}`;\n            };\n\n            const oldClass = oldValue > 0 ? 'stat-value-negative' : 'stat-value-neutral';\n            const newClass = newValue > 0 ? 'stat-value-positive' : 'stat-value-neutral';\n            const diffClass = diffValue > 0 ? 'stat-value-positive' : diffValue < 0 ? 'stat-value-negative' : 'stat-value-neutral';\n\n            rows += `\n                <tr>\n                    <td>${formatStatForDisplay(stat)}</td>\n                    <td class=\"${oldClass}\">${formatValue(oldValue)}</td>\n                    <td class=\"${newClass}\">${formatValue(newValue)}</td>\n                    <td class=\"${diffClass}\">${diffValue > 0 ? '+' : diffValue < 0 ? '-' : ''}${formatValue(Math.abs(diffValue))}</td>\n                </tr>\n            `;\n        });\n\n        return `\n            <table class=\"stat-table\">\n                <thead>\n                    <tr>\n                        <th>Passive Stat</th>\n                        <th>Losing</th>\n                        <th>Gaining</th>\n                        <th>Net Change</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    ${rows}\n                </tbody>\n            </table>\n        `;\n    };\n\n    return `\n        <div class=\"modal-tabs\">\n            <button class=\"modal-tab active\" data-tab=\"direct\" onclick=\"window.switchEquipModalTab('direct')\">\n                Direct Stats (${affectedDirectStats.length})\n            </button>\n            <button class=\"modal-tab\" data-tab=\"passive\" onclick=\"window.switchEquipModalTab('passive')\">\n                Passive Stats (${affectedPassiveStats.length})\n            </button>\n        </div>\n\n        <div class=\"modal-tab-content active\" id=\"modal-tab-direct\">\n            <div class=\"stat-comparison-table\">\n                ${createDirectStatsTable()}\n            </div>\n        </div>\n\n        <div class=\"modal-tab-content\" id=\"modal-tab-passive\">\n            <div class=\"stat-comparison-table\">\n                ${createPassiveStatsTable()}\n            </div>\n        </div>\n    `;\n}\n\n/**\n * Show equip confirmation modal\n * @param slotId - Equipment slot ID\n * @param newItem - Comparison item to equip\n * @returns Promise with user choice\n */\nexport function showEquipConfirmModal(\n    slotId: EquipmentSlotId,\n    newItem: ComparisonItem\n): Promise<'yes' | 'no' | 'cancel'> {\n    return new Promise((resolve) => {\n        // Remove any existing modal\n        const existingModal = document.getElementById('equip-comparison-modal');\n        if (existingModal) {\n            existingModal.remove();\n        }\n\n        // Calculate stat changes\n        const statChanges = calculateEquipStatChanges(slotId, newItem);\n\n        // Create modal overlay\n        const overlay = document.createElement('div');\n        overlay.id = 'equip-comparison-modal';\n        overlay.className = 'modal-overlay';\n\n        // Create modal box\n        const modalBox = document.createElement('div');\n        modalBox.className = 'modal-box';\n\n        // Get slot config for display name\n        const slotConfig = getSlotConfig(slotId);\n        const slotName = slotConfig?.name || slotId;\n\n        // Create title\n        const title = document.createElement('h2');\n        title.className = 'modal-title';\n        title.textContent = `Equip ${newItem.name}`;\n\n        // Create message\n        const message = document.createElement('p');\n        message.className = 'modal-message';\n        message.innerHTML = `\n            Are you sure you want to equip <strong>${newItem.name}</strong> to the <strong>${slotName}</strong> slot?<br>\n            <br>\n            This will:\n            <ul style=\"text-align: left; margin: 12px 0; padding-left: 24px;\">\n                <li>Subtract the stats of your currently equipped item from base stats</li>\n                <li>Add the stats of ${newItem.name} to base stats</li>\n                <li>Convert your old equipped item into a comparison item</li>\n            </ul>\n        `;\n\n        // Create stat comparison table\n        const tableContainer = document.createElement('div');\n        tableContainer.className = 'stat-comparison-table';\n        tableContainer.innerHTML = createEquipStatComparisonTable(statChanges);\n\n        // Create button container\n        const buttonContainer = document.createElement('div');\n        buttonContainer.className = 'modal-buttons';\n\n        // Create \"Equip Only - Don't Apply Stats\" button\n        const equipNoAdjustBtn = document.createElement('button');\n        equipNoAdjustBtn.className = 'modal-btn btn-no-adjust';\n        equipNoAdjustBtn.textContent = 'Equip Only - Don\\'t Apply Stats';\n        equipNoAdjustBtn.onclick = () => {\n            overlay.remove();\n            wrappedResolve('no');\n        };\n\n        // Create Yes button\n        const yesBtn = document.createElement('button');\n        yesBtn.className = 'modal-btn btn-yes';\n        yesBtn.textContent = 'Equip - Apply Stats';\n        yesBtn.onclick = () => {\n            overlay.remove();\n            wrappedResolve('yes');\n        };\n\n        // Create Cancel button\n        const cancelBtn = document.createElement('button');\n        cancelBtn.className = 'modal-btn btn-cancel';\n        cancelBtn.textContent = 'Cancel';\n        cancelBtn.onclick = () => {\n            overlay.remove();\n            wrappedResolve('cancel');\n        };\n\n        // Assemble modal\n        buttonContainer.appendChild(equipNoAdjustBtn);\n        buttonContainer.appendChild(yesBtn);\n        buttonContainer.appendChild(cancelBtn);\n\n        modalBox.appendChild(title);\n        modalBox.appendChild(message);\n        modalBox.appendChild(tableContainer);\n        modalBox.appendChild(buttonContainer);\n\n        overlay.appendChild(modalBox);\n        document.body.appendChild(overlay);\n\n        // Add tab switching function to window\n        (window as any).switchEquipModalTab = (tabName: 'direct' | 'passive') => {\n            // Update tab buttons\n            document.querySelectorAll('.modal-tab').forEach(tab => {\n                if (tab instanceof HTMLElement && tab.dataset.tab === tabName) {\n                    tab.classList.add('active');\n                } else {\n                    tab.classList.remove('active');\n                }\n            });\n\n            // Update tab content\n            document.querySelectorAll('.modal-tab-content').forEach(content => {\n                if (content instanceof HTMLElement && content.id === `modal-tab-${tabName}`) {\n                    content.classList.add('active');\n                } else {\n                    content.classList.remove('active');\n                }\n            });\n        };\n\n        // Clean up window function on modal close\n        const originalResolve = resolve;\n        const wrappedResolve = (value: 'yes' | 'no' | 'cancel') => {\n            delete (window as any).switchEquipModalTab;\n            originalResolve(value);\n        };\n\n        // Handle ESC key\n        const escHandler = (e: KeyboardEvent) => {\n            if (e.key === 'Escape') {\n                overlay.remove();\n                document.removeEventListener('keydown', escHandler);\n                wrappedResolve('cancel');\n            }\n        };\n        document.addEventListener('keydown', escHandler);\n\n        // Focus on Yes button by default\n        yesBtn.focus();\n    });\n}\n"],
  "mappings": "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",
  "names": []
}
