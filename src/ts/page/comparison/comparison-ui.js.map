{
  "version": 3,
  "sources": ["comparison-ui.ts"],
  "sourcesContent": ["/**\n * Comparison Equipment UI - Pure UI Module\n *\n * This module handles all HTML generation and UI event handling for the\n * equipment comparison tab, keeping it separate from business logic.\n *\n * Responsibilities:\n * - Generate all HTML for the comparison tab\n * - Attach event listeners\n * - Handle user interactions\n * - Render calculation results\n */\n\nimport {\n    getComparisonItems,\n    addComparisonItem,\n    updateComparisonItem,\n    removeComparisonItem,\n    addStatLine,\n    removeStatLine,\n    calculateAllItemsDamage,\n    calculateEquippedDamage,\n    EQUIPMENT_SLOTS,\n    generateDefaultItemName,\n    getSlotConfig,\n    showEquipConfirmModal\n} from './comparison';\nimport type { ComparisonItem, EquipmentSlotId, ComparisonStatLine } from '@ts/types/page/gear-lab/gear-lab.types';\nimport type { StatId } from '@ts/types/constants';\nimport { STAT } from '@ts/types/constants';\nimport { generateStatTypeOptionsHTML } from '@ts/page/equipment/equipment';\nimport { loadoutStore } from '@ts/store/loadout.store';\nimport { gearLabStore } from '@ts/store/gear-lab-store';\nimport { showToast } from '@ts/utils/notifications';\nimport { displayResults } from './results-display';\nimport { StatCalculationService } from '@ts/services/stat-calculation-service.js';\nimport type { EquipmentSlotData } from '@ts/types/page/equipment/equipment.types';\nimport { debounce } from '@ts/utils/event-emitter';\nimport { \n    hasEquipmentViewerData, \n    getItemsForSlot,\n    type ConvertedItem \n} from '@ts/services/equipment-viewer.service';\n\n// ============================================================================\n// STATE\n// ============================================================================\n\n/**\n * Current selected slot\n */\nlet currentSlot: EquipmentSlotId = 'head';\n\n/**\n * Currently active comparison item GUID\n */\nlet activeItemGuid: string | null = null;\n\n/**\n * Last deleted item for undo functionality\n */\nlet lastDeletedItem: { slotId: EquipmentSlotId; item: ComparisonItem } | null = null;\n\n/**\n * Undo timeout ID\n */\nlet undoTimeout: number | null = null;\n\n// ============================================================================\n// HTML GENERATION\n// ============================================================================\n\n/**\n * Generate slot selector options HTML\n */\nfunction generateSlotSelectorOptionsHTML(): string {\n    return Object.values(EQUIPMENT_SLOTS).map(slot =>\n        `<option value=\"${slot.id}\">${slot.name}</option>`\n    ).join('');\n}\n\n/**\n * Generate the complete HTML for the comparison tab\n */\nexport function generateComparisonHTML(): string {\n    return `\n        <!-- Slot Selector with Refresh Buttons -->\n        <div class=\"comparison-slot-selector-wrapper\">\n            <div class=\"comparison-slot-selector-inner\">\n                <div class=\"comparison-slot-selector-left\">\n                    <label for=\"comparison-slot-selector\" class=\"comparison-slot-label\">Equipment Slot</label>\n                    <select id=\"comparison-slot-selector\" class=\"comparison-slot-select\" aria-label=\"Select equipment slot to compare\">\n                        ${generateSlotSelectorOptionsHTML()}\n                    </select>\n                    <button id=\"refresh-from-viewer-btn\" class=\"comparison-refresh-btn\" title=\"Refresh this slot from Equipment Viewer\" aria-label=\"Refresh comparison items from Equipment Viewer\">\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                            <path fill-rule=\"evenodd\" d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z\"/>\n                            <path d=\"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z\"/>\n                        </svg>\n                        <span>Refresh</span>\n                    </button>\n                </div>\n                <button id=\"refresh-all-from-viewer-btn\" class=\"comparison-refresh-all-btn\" title=\"Refresh all slots from Equipment Viewer\" aria-label=\"Refresh all slots from Equipment Viewer\">\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                        <path fill-rule=\"evenodd\" d=\"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z\"/>\n                        <path d=\"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z\"/>\n                    </svg>\n                    <span>Refresh All Slots</span>\n                </button>\n            </div>\n        </div>\n\n        <!-- Two Column Layout with Improved Spacing -->\n        <div class=\"comparison-columns-wrapper\">\n            <!-- Equipped Item Card -->\n            <div class=\"comparison-column\">\n                <h3 class=\"comparison-column-header comparison-column-header--equipped\">Currently Equipped</h3>\n                <p class=\"equipped-description\">\n                    Equipped item stats are assumed to be included in your Base Stats tab inputs.\n                    To edit equipped items, go to the <a href=\"#/setup/equipment\" class=\"equipped-link\" data-navigable=\"true\">Equipment tab</a>.\n                </p>\n                <div class=\"equipped-item-card\">\n                    <div class=\"equipped-card-header\">\n                        <div class=\"equipped-card-title-row\">\n                            <span class=\"equipped-card-title\">Equipped Item</span>\n                            <span class=\"equipped-card-subtitle\">(stats in base setup)</span>\n                        </div>\n                    </div>\n                    <div class=\"equipped-inputs-row\">\n                        <div class=\"input-group equipped-input-group\">\n                            <label for=\"equipped-name\" class=\"equipped-label\">Name</label>\n                            <input type=\"text\" id=\"equipped-name\" value=\"Current Item\" aria-label=\"Equipped item name\" maxlength=\"50\" readonly>\n                        </div>\n                        <div class=\"input-group equipped-input-group\">\n                            <label for=\"equipped-attack\" class=\"equipped-label\">Attack</label>\n                            <input type=\"number\" id=\"equipped-attack\" value=\"0\" aria-label=\"Equipped item attack value\" readonly>\n                        </div>\n                        <div id=\"equipped-main-stat-container\" class=\"input-group equipped-input-group\" style=\"display: none;\">\n                            <label for=\"equipped-main-stat\" class=\"equipped-label\">Main Stat</label>\n                            <input type=\"number\" step=\"1\" id=\"equipped-main-stat\" value=\"0\" aria-label=\"Equipped item main stat value\" readonly>\n                        </div>\n                    </div>\n                    <div class=\"equipped-stats-header\">\n                        <label class=\"equipped-stats-label\">Additional Stats</label>\n                        <button id=\"equipped-add-stat-btn\" class=\"comparison-action-btn comparison-action-btn--add\" aria-label=\"Add stat to equipped item\" disabled style=\"opacity: 0.5; cursor: not-allowed;\">\n                            <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" aria-hidden=\"true\">\n                                <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"/>\n                            </svg>\n                            <span>Add Stat</span>\n                        </button>\n                    </div>\n                    <div id=\"equipped-stats-container\" class=\"equipped-stats-container\"></div>\n                </div>\n            </div>\n\n            <!-- Comparison Items Column -->\n            <div class=\"comparison-column\">\n                <h3 class=\"comparison-column-header comparison-column-header--comparison\">Comparison Items</h3>\n                <!-- Tab Navigation with Enhanced Accessibility -->\n                <div id=\"comparison-tabs-container\" class=\"comparison-tabs-container\" role=\"tablist\" aria-label=\"Comparison item tabs\">\n                    <button class=\"comparison-add-tab-btn\" data-type=\"add-button\" aria-label=\"Add new comparison item\">\n                        <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" aria-hidden=\"true\">\n                            <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"/>\n                        </svg>\n                        <span>Add Item</span>\n                    </button>\n                </div>\n                <!-- Comparison Items Content -->\n                <div id=\"comparison-items-container\" class=\"comparison-items-container\" role=\"presentation\"></div>\n            </div>\n        </div>\n\n        <!-- Calculate Button with Enhanced Styling -->\n        <button class=\"comparison-calculate-btn\" aria-label=\"Calculate damage for all comparison items\">\n            <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" aria-hidden=\"true\">\n                <path d=\"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 1 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z\"/>\n            </svg>\n            <span>Calculate All</span>\n        </button>\n\n        <!-- Results Section with Improved Visual Separation -->\n        <div class=\"comparison-results-section\">\n            <h3 class=\"comparison-results-title\">Comparison Results</h3>\n            <div id=\"results-container\" class=\"comparison-results-grid\">\n                <!-- Results will be populated by JavaScript -->\n            </div>\n            <div id=\"results-loading-spinner\" class=\"comparison-loading-spinner\" style=\"display: none;\" aria-live=\"polite\" aria-busy=\"false\">\n                <div class=\"spinner\"></div>\n                <p class=\"loading-text\">Calculating damage...</p>\n            </div>\n        </div>\n    `;\n}\n\n// ============================================================================\n// UI RENDERING\n// ============================================================================\n\n/**\n * Render the equipped item display\n */\nfunction renderEquippedItem(): void {\n    const equipmentData = loadoutStore.getEquipmentData();\n    const slotData = equipmentData[currentSlot];\n    const slotConfig = getSlotConfig(currentSlot);\n\n    // Update header\n    const nameInput = document.getElementById('equipped-name') as HTMLInputElement;\n    const attackInput = document.getElementById('equipped-attack') as HTMLInputElement;\n    const mainStatContainer = document.getElementById('equipped-main-stat-container') as HTMLElement;\n    const mainStatInput = document.getElementById('equipped-main-stat') as HTMLInputElement;\n\n    // Use slot data name or default\n    if (nameInput) nameInput.value = slotData?.name || 'Equipped Item';\n    if (attackInput) attackInput.value = slotData?.attack?.toString() || '0';\n\n    // Show/hide main stat input based on slot config\n    if (mainStatContainer && mainStatInput) {\n        if (slotConfig?.hasMainStat) {\n            mainStatContainer.style.display = '';\n            mainStatInput.value = slotData?.mainStat?.toString() || '0';\n        } else {\n            mainStatContainer.style.display = 'none';\n        }\n    }\n\n    // Render stat lines from actual equipped item\n    const statsContainer = document.getElementById('equipped-stats-container');\n    if (statsContainer) {\n        statsContainer.innerHTML = '';\n\n        // Show up to 3 stat lines from the equipped item (or more if added)\n        const statLines = slotData?.statLines || [];\n\n        // Show at least 3 rows (empty if no data), or more if user added more stats\n        const minRows = Math.max(3, statLines.length);\n        for (let i = 0; i < minRows; i++) {\n            const statLine = statLines[i];\n            const statDiv = document.createElement('div');\n            statDiv.className = 'equipped-stat-row';\n            statDiv.dataset.statIndex = i.toString();\n            statDiv.style.cssText = 'display: grid; grid-template-columns: 1fr 80px 32px; gap: 8px; margin-bottom: 6px; align-items: end;';\n            statDiv.innerHTML = `\n                <div class=\"input-group\">\n                    <label style=\"font-size: 0.8em;\">Stat</label>\n                    <select class=\"equipped-stat-type\" data-stat-index=\"${i}\" disabled style=\"opacity: 0.5; cursor: not-allowed;\">\n                        ${generateStatTypeOptionsHTML()}\n                    </select>\n                </div>\n                <div class=\"input-group\">\n                    <label style=\"font-size: 0.8em;\">Value</label>\n                    <input type=\"number\" step=\"0.1\" class=\"equipped-stat-value\" data-stat-index=\"${i}\" value=\"${statLine?.value || 0}\" readonly>\n                </div>\n                <button class=\"equipped-stat-remove\" data-stat-index=\"${i}\" aria-label=\"Remove stat line\" title=\"Remove stat line\" disabled style=\"opacity: 0.5; cursor: not-allowed;\">\n                    <svg viewBox=\"0 0 16 16\" fill=\"currentColor\">\n                        <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"/>\n                    </svg>\n                </button>\n            `;\n            statsContainer.appendChild(statDiv);\n\n            // Set the stat type select value if we have data\n            if (statLine) {\n                const typeSelect = statDiv.querySelector('.equipped-stat-type') as HTMLSelectElement;\n                if (typeSelect) typeSelect.value = statLine.type;\n            }\n        }\n    }\n\n    // No longer attaching event listeners since inputs are now readonly\n    // attachEquippedItemEventListeners();\n}\n\n/**\n * Render comparison items for the current slot\n */\nfunction renderComparisonItems(): void {\n    const items = getComparisonItems(currentSlot);\n    const tabsContainer = document.getElementById('comparison-tabs-container');\n    const itemsContainer = document.getElementById('comparison-items-container');\n\n    if (!tabsContainer || !itemsContainer) return;\n\n    // Clear existing items (preserve add button)\n    const addButton = tabsContainer.querySelector('[data-type=\"add-button\"]');\n    tabsContainer.innerHTML = '';\n    if (addButton) {\n        tabsContainer.appendChild(addButton);\n    }\n    itemsContainer.innerHTML = '';\n\n    // Show empty state if no items\n    if (items.length === 0) {\n        renderEmptyState(itemsContainer);\n        return;\n    }\n\n    // Render each item\n    items.forEach((item, index) => {\n        // Create tab\n        const tabButton = document.createElement('button');\n        tabButton.className = 'comparison-tab-button';\n        tabButton.dataset.guid = item.guid;\n        tabButton.setAttribute('role', 'tab');\n        tabButton.setAttribute('aria-selected', 'false');\n        tabButton.setAttribute('aria-controls', `comparison-item-${item.guid}`);\n        tabButton.onclick = () => switchToItem(item.guid);\n\n        const nameSpan = document.createElement('span');\n        nameSpan.className = 'tab-item-name';\n        nameSpan.textContent = item.name;\n\n        const removeButton = document.createElement('button');\n        removeButton.className = 'comparison-tab-remove';\n        removeButton.setAttribute('aria-label', `Remove ${item.name}`);\n        removeButton.onclick = (e) => {\n            e.stopPropagation();\n            deleteItem(item.guid);\n        };\n        removeButton.innerHTML = `\n            <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" aria-hidden=\"true\">\n                <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"/>\n            </svg>\n        `;\n\n        tabButton.appendChild(nameSpan);\n        tabButton.appendChild(removeButton);\n        tabsContainer.insertBefore(tabButton, addButton);\n\n        // Create item card\n        const itemCard = createItemCard(item, index + 1);\n        itemsContainer.appendChild(itemCard);\n    });\n\n    // Select first item by default\n    if (items.length > 0 && !activeItemGuid) {\n        switchToItem(items[0].guid);\n    } else if (activeItemGuid) {\n        switchToItem(activeItemGuid);\n    }\n}\n\n/**\n * Create an item card element\n */\nfunction createItemCard(item: ComparisonItem, itemNumber: number): HTMLElement {\n    const itemDiv = document.createElement('div');\n    itemDiv.id = `comparison-item-${item.guid}`;\n    itemDiv.dataset.guid = item.guid;\n    itemDiv.className = 'comparison-item-card';\n    itemDiv.style.display = 'none';\n    itemDiv.setAttribute('role', 'tabpanel');\n    itemDiv.setAttribute('aria-labelledby', `comparison-tab-${item.guid}`);\n\n    itemDiv.innerHTML = `\n        <div class=\"comparison-card-inner\">\n            <div class=\"comparison-card-header\">\n                <div class=\"comparison-inputs-row\">\n                    <div class=\"input-group comparison-input-group\">\n                        <label for=\"item-${item.guid}-name\">Name</label>\n                        <input type=\"text\" id=\"item-${item.guid}-name\" value=\"${item.name}\"\n                            maxlength=\"50\" aria-label=\"Item name\" data-guid=\"${item.guid}\">\n                    </div>\n                    <div class=\"input-group comparison-input-group\">\n                        <label for=\"item-${item.guid}-attack\">Attack</label>\n                        <input type=\"number\" id=\"item-${item.guid}-attack\" value=\"${item.attack}\"\n                            aria-label=\"Item attack value\" data-guid=\"${item.guid}\">\n                    </div>\n                </div>\n            </div>\n\n            <div id=\"item-${item.guid}-stats-container\" class=\"comparison-stats-container\"></div>\n\n            <div class=\"comparison-card-actions\">\n                <button class=\"comparison-action-btn comparison-action-btn--add\" aria-label=\"Add stat to item\" data-guid=\"${item.guid}\">\n                    <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" aria-hidden=\"true\">\n                        <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"/>\n                    </svg>\n                    <span>Add Stat</span>\n                </button>\n                <button class=\"comparison-action-btn comparison-action-btn--equip\" aria-label=\"Equip this item\" data-guid=\"${item.guid}\">\n                    <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" aria-hidden=\"true\">\n                        <path d=\"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 1 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z\"/>\n                    </svg>\n                    <span>Equip</span>\n                </button>\n            </div>\n        </div>\n    `;\n\n    // Render stat lines\n    const statsContainer = itemDiv.querySelector(`#item-${item.guid}-stats-container`) as HTMLElement;\n    if (statsContainer) {\n        item.statLines.forEach((statLine, index) => {\n            const statDiv = createStatLineElement(item.guid, statLine, index);\n            statsContainer.appendChild(statDiv);\n        });\n    }\n\n    // Attach event listeners using querySelector on the created element\n    // to ensure we find the elements in the updated DOM\n    attachItemEventListeners(itemDiv);\n\n    return itemDiv;\n}\n\n/**\n * Create a stat line element\n */\nfunction createStatLineElement(itemGuid: string, statLine: ComparisonStatLine, index: number): HTMLElement {\n    const statDiv = document.createElement('div');\n    statDiv.id = `item-${itemGuid}-stat-${index}`;\n    statDiv.className = 'comparison-stat-row';\n    statDiv.style.cssText = '--animation-order: ' + index;\n\n    statDiv.innerHTML = `\n        <div class=\"input-group comparison-stat-group\">\n            <label for=\"item-${itemGuid}-stat-${index}-type\" class=\"comparison-stat-label\">Stat Type</label>\n            <select id=\"item-${itemGuid}-stat-${index}-type\" aria-label=\"Stat type\" data-guid=\"${itemGuid}\" data-stat-index=\"${index}\">\n                ${generateStatTypeOptionsHTML()}\n            </select>\n        </div>\n        <div class=\"input-group comparison-stat-group\">\n            <label for=\"item-${itemGuid}-stat-${index}-value\" class=\"comparison-stat-label\">Value</label>\n            <input type=\"number\" step=\"0.1\" id=\"item-${itemGuid}-stat-${index}-value\" value=\"${statLine.value}\" aria-label=\"Stat value\" data-guid=\"${itemGuid}\" data-stat-index=\"${index}\">\n        </div>\n        <button class=\"comparison-stat-remove\" aria-label=\"Remove stat\" data-guid=\"${itemGuid}\" data-stat-index=\"${index}\">\n            <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" aria-hidden=\"true\">\n                <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"/>\n            </svg>\n        </button>\n    `;\n\n    // Set initial values\n    const typeSelect = statDiv.querySelector(`#item-${itemGuid}-stat-${index}-type`) as HTMLSelectElement;\n    const valueInput = statDiv.querySelector(`#item-${itemGuid}-stat-${index}-value`) as HTMLInputElement;\n\n    if (typeSelect) typeSelect.value = statLine.type;\n    if (valueInput) valueInput.value = statLine.value.toString();\n\n    // Attach event listeners\n    if (typeSelect) {\n        typeSelect.addEventListener('change', () => updateStatLineFromDOM(itemGuid, index));\n    }\n    if (valueInput) {\n        valueInput.addEventListener('input', () => updateStatLineFromDOM(itemGuid, index));\n    }\n\n    // Remove button\n    const removeButton = statDiv.querySelector('.comparison-stat-remove') as HTMLButtonElement;\n    if (removeButton) {\n        removeButton.onclick = () => deleteStatLine(itemGuid, index);\n    }\n\n    return statDiv;\n}\n\n/**\n * Render empty state\n */\nfunction renderEmptyState(container: HTMLElement): void {\n    container.innerHTML = `\n        <div class=\"comparison-empty-state\">\n            <div class=\"comparison-empty-icon\">\n                <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" aria-hidden=\"true\">\n                    <path d=\"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"/>\n                    <path d=\"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"/>\n                </svg>\n            </div>\n            <p class=\"comparison-empty-text\">No comparison items yet</p>\n            <p class=\"comparison-empty-subtext\">Add items to compare with your equipped gear</p>\n        </div>\n    `;\n}\n\n// ============================================================================\n// EVENT HANDLERS\n// ============================================================================\n\n/**\n * Attach event listeners to the comparison UI\n */\nfunction attachEventListeners(): void {\n    // Slot selector\n    const slotSelector = document.getElementById('comparison-slot-selector') as HTMLSelectElement;\n    if (slotSelector) {\n        slotSelector.addEventListener('change', (e) => {\n            const target = e.target as HTMLSelectElement;\n            switchSlot(target.value as EquipmentSlotId);\n        });\n    }\n\n    // Add item button\n    const addButton = document.querySelector('[data-type=\"add-button\"]') as HTMLButtonElement;\n    if (addButton) {\n        addButton.onclick = handleAddItem;\n    }\n\n    // Calculate button\n    const calculateButton = document.querySelector('.comparison-calculate-btn') as HTMLButtonElement;\n    if (calculateButton) {\n        calculateButton.onclick = handleCalculate;\n    }\n\n    // Refresh from Equipment Viewer button (single slot)\n    const refreshButton = document.getElementById('refresh-from-viewer-btn') as HTMLButtonElement;\n    if (refreshButton) {\n        refreshButton.onclick = handleRefreshFromViewer;\n    }\n\n    // Refresh All from Equipment Viewer button\n    const refreshAllButton = document.getElementById('refresh-all-from-viewer-btn') as HTMLButtonElement;\n    if (refreshAllButton) {\n        refreshAllButton.onclick = handleRefreshAllFromViewer;\n    }\n\n    // Update button visibility based on Equipment Viewer data\n    updateRefreshButtonVisibility();\n\n    loadoutStore.on('equipment-updated', debounce((update: { slotId: EquipmentSlotId, data: EquipmentSlotData }) => {\n        if (update.slotId === localStorage.getItem('lastSelectedComparisonSlot')) {\n            switchSlot(update.slotId);\n        }\n    }, 500));\n}\n\n/**\n * Attach event listeners to an item card\n */\nfunction attachItemEventListeners(itemDiv: HTMLElement): void {\n    const guid = itemDiv.dataset.guid;\n    if (!guid) return;\n\n    // Name input\n    const nameInput = itemDiv.querySelector(`#item-${guid}-name`) as HTMLInputElement;\n    if (nameInput) {\n        nameInput.addEventListener('input', () => {\n            updateItemName(guid, nameInput.value);\n            updateTabName(guid, nameInput.value);\n        });\n    }\n\n    // Attack input\n    const attackInput = itemDiv.querySelector(`#item-${guid}-attack`) as HTMLInputElement;\n    if (attackInput) {\n        attackInput.addEventListener('input', () => {\n            updateItemAttack(guid, parseFloat(attackInput.value) || 0);\n            triggerAutoCalculate();\n        });\n    }\n\n    // Add stat button\n    const addStatButton = itemDiv.querySelector(`[data-guid=\"${guid}\"].comparison-action-btn--add`) as HTMLButtonElement;\n    if (addStatButton) {\n        addStatButton.onclick = () => handleAddStatLine(guid);\n    }\n\n    // Equip button\n    const equipButton = itemDiv.querySelector(`[data-guid=\"${guid}\"].comparison-action-btn--equip`) as HTMLButtonElement;\n    if (equipButton) {\n        equipButton.onclick = () => handleEquipItem(guid);\n    }\n}\n\n/**\n * Handle add item button click\n */\nfunction handleAddItem(): void {\n    const items = getComparisonItems(currentSlot);\n    const defaultName = generateDefaultItemName(currentSlot, items.length);\n\n    const newItem = addComparisonItem(currentSlot, {\n        name: defaultName,\n        attack: 0,\n        mainStat: 0,\n        statLines: []\n    });\n\n    // Re-render items\n    renderComparisonItems();\n\n    // Switch to the new item\n    switchToItem(newItem.guid);\n\n    // Auto-calculate\n    triggerAutoCalculate();\n}\n\n/**\n * Update refresh button visibility based on Equipment Viewer data availability\n */\nfunction updateRefreshButtonVisibility(): void {\n    const hasData = hasEquipmentViewerData();\n    \n    const refreshButton = document.getElementById('refresh-from-viewer-btn') as HTMLButtonElement;\n    if (refreshButton) {\n        refreshButton.style.display = hasData ? '' : 'none';\n    }\n    \n    const refreshAllButton = document.getElementById('refresh-all-from-viewer-btn') as HTMLButtonElement;\n    if (refreshAllButton) {\n        refreshAllButton.style.display = hasData ? '' : 'none';\n    }\n}\n\n/**\n * Handle refresh from Equipment Viewer button click\n * Clears all comparison items and repopulates from Equipment Viewer\n */\nfunction handleRefreshFromViewer(): void {\n    if (!hasEquipmentViewerData()) {\n        showToast('No Equipment Viewer data found. Open Equipment Viewer and add some items first.', false);\n        return;\n    }\n\n    // Get items for current slot from Equipment Viewer\n    const viewerItems = getItemsForSlot(currentSlot);\n    \n    if (viewerItems.length === 0) {\n        showToast(`No items found for ${currentSlot} in Equipment Viewer.`, false);\n        return;\n    }\n\n    // Clear all existing comparison items for this slot\n    const existingItems = getComparisonItems(currentSlot);\n    for (const item of existingItems) {\n        removeComparisonItem(currentSlot, item.guid);\n    }\n\n    // Add items from Equipment Viewer (skip equipped items - they go to Equipment tab)\n    let addedCount = 0;\n    for (const viewerItem of viewerItems) {\n        // Skip equipped items - they belong in the Equipment tab\n        if (viewerItem.isEquipped) continue;\n\n        // Convert Equipment Viewer item to comparison item format\n        const statLines: ComparisonStatLine[] = viewerItem.stats.map(stat => ({\n            type: stat.type,\n            value: stat.value\n        }));\n\n        addComparisonItem(currentSlot, {\n            name: viewerItem.name,\n            attack: viewerItem.attack,\n            mainStat: 0, // Equipment Viewer doesn't track main stat separately\n            statLines\n        });\n        addedCount++;\n    }\n\n    // Re-render\n    renderComparisonItems();\n    \n    // Show feedback\n    showToast(`Loaded ${addedCount} item(s) from Equipment Viewer`, true);\n\n    // Auto-calculate if we added items\n    if (addedCount > 0) {\n        triggerAutoCalculate();\n    }\n}\n\n/**\n * Handle refresh all slots from Equipment Viewer button click\n * Clears and repopulates comparison items for ALL slots from Equipment Viewer\n */\nfunction handleRefreshAllFromViewer(): void {\n    if (!hasEquipmentViewerData()) {\n        showToast('No Equipment Viewer data found. Open Equipment Viewer and add some items first.', false);\n        return;\n    }\n\n    let totalAdded = 0;\n    let slotsUpdated = 0;\n\n    // Iterate through all equipment slots\n    for (const slotId of Object.keys(EQUIPMENT_SLOTS) as EquipmentSlotId[]) {\n        const viewerItems = getItemsForSlot(slotId);\n        \n        // Clear existing comparison items for this slot\n        const existingItems = getComparisonItems(slotId);\n        for (const item of existingItems) {\n            removeComparisonItem(slotId, item.guid);\n        }\n\n        // Add non-equipped items from Equipment Viewer\n        let slotAdded = 0;\n        for (const viewerItem of viewerItems) {\n            if (viewerItem.isEquipped) continue;\n\n            const statLines: ComparisonStatLine[] = viewerItem.stats.map(stat => ({\n                type: stat.type,\n                value: stat.value\n            }));\n\n            addComparisonItem(slotId, {\n                name: viewerItem.name,\n                attack: viewerItem.attack,\n                mainStat: 0,\n                statLines\n            });\n            slotAdded++;\n        }\n\n        if (slotAdded > 0) {\n            slotsUpdated++;\n            totalAdded += slotAdded;\n        }\n    }\n\n    // Re-render current slot\n    renderComparisonItems();\n    \n    // Show feedback\n    showToast(`Loaded ${totalAdded} item(s) across ${slotsUpdated} slot(s) from Equipment Viewer`, true);\n\n    // Auto-calculate if we added items\n    if (totalAdded > 0) {\n        triggerAutoCalculate();\n    }\n}\n\n/**\n * Convert equipped item to comparison item format\n * @param equippedItem - Equipment slot data\n * @returns Comparison item data without guid, or null if invalid\n */\nfunction convertEquippedToComparisonItem(equippedItem: EquipmentSlotData): Omit<ComparisonItem, 'guid'> | null {\n    if (!equippedItem?.name) return null;\n\n    return {\n        name: equippedItem.name,\n        attack: equippedItem.attack,\n        mainStat: equippedItem.mainStat || 0,\n        statLines: equippedItem.statLines?.map(sl => ({\n            type: sl.type as StatId,\n            value: sl.value\n        })) || []\n    };\n}\n\n/**\n * Handle add stat line button click\n */\nfunction handleAddStatLine(guid: string): void {\n    const item = getComparisonItems(currentSlot).find(i => i.guid === guid);\n    if (!item) return;\n\n    // Add empty stat line\n    addStatLine(currentSlot, guid, { type: 'attack', value: 0 });\n\n    // Re-render the item's stat lines\n    renderItemStatLines(guid);\n\n    // Auto-calculate\n    triggerAutoCalculate();\n}\n\n/**\n * Handle equip button click\n */\nasync function handleEquipItem(guid: string): Promise<void> {\n    const item = getComparisonItems(currentSlot).find(i => i.guid === guid);\n    if (!item) return;\n\n    // Show equip confirmation modal\n    const userChoice = await showEquipConfirmModal(currentSlot, item);\n\n    if (userChoice === 'cancel') {\n        return;\n    }\n\n    // Get currently equipped item data\n    const equipmentData = loadoutStore.getEquipmentData();\n    const equippedItem = equipmentData[currentSlot];\n\n    // Convert old equipped item to comparison item and add to list\n    if (equippedItem) {\n        const oldItemAsComparison = convertEquippedToComparisonItem(equippedItem);\n        if (oldItemAsComparison) {\n            addComparisonItem(currentSlot, oldItemAsComparison);\n        }\n    }\n\n    if (userChoice === 'yes') {\n        // Apply stats - need to subtract old and add new\n        const baseStats = loadoutStore.getBaseStats();\n        const service = new StatCalculationService(baseStats);\n\n        // Subtract old equipped item stats\n        if (equippedItem) {\n            service.subtract(STAT.ATTACK.id, equippedItem.attack);\n            service.subtract(STAT.PRIMARY_MAIN_STAT.id, equippedItem.mainStat || 0);\n\n            equippedItem.statLines?.forEach(statLine => {\n                service.subtract(statLine.type, statLine.value);\n            });\n        }\n\n        // Add new item stats\n        service.add(STAT.ATTACK.id, item.attack);\n        service.add(STAT.PRIMARY_MAIN_STAT.id, item.mainStat);\n\n        item.statLines.forEach(statLine => {\n            service.add(statLine.type, statLine.value);\n        });\n\n        // Update base stats in loadoutStore\n        loadoutStore.updateBaseStats(service.getStats());\n    }\n\n    // Update equipment slot with new item data\n    loadoutStore.updateEquipment(currentSlot, {\n        name: item.name,\n        attack: item.attack,\n        mainStat: item.mainStat,\n        statLines: item.statLines.map(sl => ({\n            type: sl.type,\n            value: sl.value\n        }))\n    });\n\n    // Remove the comparison item we just equipped\n    removeComparisonItem(currentSlot, guid);\n\n    // Re-render\n    renderComparisonItems();\n    renderEquippedItem();\n\n    // Trigger recalculation\n    handleCalculate();\n\n    loadoutStore.emit('item-equipped');\n    showToast(`Equipped ${item.name}`, true);\n}\n\n/**\n * Handle calculate button click\n */\nfunction handleCalculate(): void {\n    const resultsContainer = document.getElementById('results-container');\n    const loadingSpinner = document.getElementById('results-loading-spinner');\n\n    if (!resultsContainer || !loadingSpinner) return;\n\n    // Show loading spinner, hide results\n    loadingSpinner.style.display = 'flex';\n    loadingSpinner.setAttribute('aria-busy', 'true');\n    resultsContainer.style.display = 'none';\n\n    // Use double requestAnimationFrame to ensure spinner is rendered before blocking calculation\n    requestAnimationFrame(() => {\n        requestAnimationFrame(() => {\n            try {\n                // Calculate results\n                const results = calculateAllItemsDamage(currentSlot);\n                const equippedResult = calculateEquippedDamage(currentSlot);\n\n                // Clear results container\n                resultsContainer.innerHTML = '';\n\n                // Extract equipped damage values for comparison\n                const equippedDamageValues = equippedResult ? {\n                    dpsBoss: 0,\n                    expectedDamageBoss: 0,\n                    dpsNormal: 0,\n                    expectedDamageNormal: 0\n                } : null;\n\n                // Calculate equipped damage values from the equipped result stats\n                if (equippedResult && equippedDamageValues) {\n                    const service = new StatCalculationService(equippedResult.stats);\n                    const bossResults = service.compute('boss');\n                    const normalResults = service.compute('normal');\n                    equippedDamageValues.dpsBoss = bossResults.dps;\n                    equippedDamageValues.expectedDamageBoss = bossResults.expectedDamage;\n                    equippedDamageValues.dpsNormal = normalResults.dps;\n                    equippedDamageValues.expectedDamageNormal = normalResults.expectedDamage;\n                }\n\n                // Render equipped result (no comparison needed)\n                if (equippedResult) {\n                    resultsContainer.innerHTML += displayResults(equippedResult.name, equippedResult.stats, 'equipped', true, null);\n                }\n\n                // Render comparison item results with equipped damage values for comparison\n                results.forEach(result => {\n                    resultsContainer.innerHTML += displayResults(\n                        result.name,\n                        result.stats,\n                        result.guid,\n                        false,\n                        equippedDamageValues,\n                        result.passiveGains\n                    );\n                });\n\n                // Hide loading spinner, show results\n                loadingSpinner.style.display = 'none';\n                loadingSpinner.setAttribute('aria-busy', 'false');\n                resultsContainer.style.display = 'grid';\n            } catch (error) {\n                console.error('Calculation failed:', error);\n                loadingSpinner.style.display = 'none';\n                loadingSpinner.setAttribute('aria-busy', 'false');\n                resultsContainer.style.display = 'grid';\n                resultsContainer.innerHTML = `\n                    <div class=\"calculation-error\" style=\"grid-column: 1 / -1; padding: var(--comp-space-lg); text-align: center;\">\n                        <p style=\"color: var(--text-secondary); margin: 0;\">Calculation failed. Please try again.</p>\n                    </div>\n                `;\n            }\n        });\n    });\n}\n\n/**\n * Trigger auto-calculate with debounce\n */\nlet autoCalculateTimeout: number | null = null;\nfunction triggerAutoCalculate(): void {\n    if (autoCalculateTimeout) {\n        clearTimeout(autoCalculateTimeout);\n    }\n\n    autoCalculateTimeout = window.setTimeout(() => {\n        handleCalculate();\n    }, 500);\n}\n\n/**\n * Switch to a different slot\n */\nfunction switchSlot(slotId: EquipmentSlotId): void {\n    // Save current slot selection\n    localStorage.setItem('lastSelectedComparisonSlot', slotId);\n\n    // Update current slot\n    currentSlot = slotId;\n    activeItemGuid = null;\n\n    // Update selector\n    const slotSelector = document.getElementById('comparison-slot-selector') as HTMLSelectElement;\n    if (slotSelector) {\n        slotSelector.value = slotId;\n    }\n\n    // Re-render\n    renderEquippedItem();\n    renderComparisonItems();\n\n    // Auto-calculate results for new slot\n    handleCalculate();\n}\n\n/**\n * Switch to a specific item tab\n */\nfunction switchToItem(guid: string): void {\n    activeItemGuid = guid;\n\n    // Hide all items\n    const allItems = document.querySelectorAll('.comparison-item-card');\n    allItems.forEach(item => {\n        (item as HTMLElement).style.display = 'none';\n    });\n\n    // Deactivate all tabs\n    const allTabs = document.querySelectorAll('.comparison-tab-button');\n    allTabs.forEach(tab => {\n        tab.classList.remove('active');\n        tab.setAttribute('aria-selected', 'false');\n    });\n\n    // Show selected item\n    const selectedItem = document.getElementById(`comparison-item-${guid}`);\n    if (selectedItem) {\n        selectedItem.style.display = 'block';\n    }\n\n    // Activate selected tab\n    const selectedTab = document.querySelector(`[data-guid=\"${guid}\"].comparison-tab-button`);\n    if (selectedTab) {\n        selectedTab.classList.add('active');\n        selectedTab.setAttribute('aria-selected', 'true');\n    }\n}\n\n/**\n * Delete an item\n */\nfunction deleteItem(guid: string): void {\n    const items = getComparisonItems(currentSlot);\n    const item = items.find(i => i.guid === guid);\n    if (!item) return;\n\n    // Store for undo\n    lastDeletedItem = { slotId: currentSlot, item };\n\n    // Remove from store\n    removeComparisonItem(currentSlot, guid);\n\n    // Clear any existing undo timeout\n    if (undoTimeout) {\n        clearTimeout(undoTimeout);\n    }\n\n    // Re-render\n    renderComparisonItems();\n\n    // Show undo button\n    showUndoButton(item.name);\n\n    // Set undo timeout\n    undoTimeout = window.setTimeout(() => {\n        hideUndoButton();\n        lastDeletedItem = null;\n    }, 10000);\n}\n\n/**\n * Show the undo button\n */\nfunction showUndoButton(itemName: string): void {\n    // Remove existing undo button if present\n    hideUndoButton();\n\n    // Create undo button\n    const undoButton = document.createElement('button');\n    undoButton.id = 'comparison-undo-btn';\n    undoButton.className = 'comparison-undo-btn';\n    undoButton.innerHTML = `\n        <svg viewBox=\"0 0 16 16\" fill=\"currentColor\" aria-hidden=\"true\">\n            <path fill-rule=\"evenodd\" d=\"M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z\"/>\n            <path d=\"M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z\"/>\n        </svg>\n        <span>Undo</span>\n    `;\n    undoButton.onclick = handleUndo;\n\n    // Find a good place to insert it - after the calculate button\n    const calculateButton = document.querySelector('.comparison-calculate-btn');\n    if (calculateButton && calculateButton.parentElement) {\n        calculateButton.parentElement.insertBefore(undoButton, calculateButton.nextSibling);\n    }\n}\n\n/**\n * Hide the undo button\n */\nfunction hideUndoButton(): void {\n    const undoButton = document.getElementById('comparison-undo-btn');\n    if (undoButton) {\n        undoButton.remove();\n    }\n}\n\n/**\n * Handle undo button click\n */\nfunction handleUndo(): void {\n    if (!lastDeletedItem) return;\n\n    // Restore the item\n    addComparisonItem(lastDeletedItem.slotId, lastDeletedItem.item);\n\n    // Switch to that slot if different\n    if (lastDeletedItem.slotId !== currentSlot) {\n        switchSlot(lastDeletedItem.slotId);\n    }\n\n    // Clear the deleted item and timeout\n    lastDeletedItem = null;\n    if (undoTimeout) {\n        clearTimeout(undoTimeout);\n        undoTimeout = null;\n    }\n\n    // Hide the undo button\n    hideUndoButton();\n\n    // Re-render\n    renderComparisonItems();\n\n    // Show confirmation\n    showToast('Item restored', true);\n}\n\n/**\n * Delete a stat line\n */\nfunction deleteStatLine(guid: string, statIndex: number): void {\n    removeStatLine(currentSlot, guid, statIndex);\n\n    // Re-render the item's stat lines\n    renderItemStatLines(guid);\n\n    // Auto-calculate\n    triggerAutoCalculate();\n}\n\n/**\n * Update item name\n */\nfunction updateItemName(guid: string, name: string): void {\n    updateComparisonItem(currentSlot, guid, { name });\n}\n\n/**\n * Update item attack\n */\nfunction updateItemAttack(guid: string, attack: number): void {\n    updateComparisonItem(currentSlot, guid, { attack });\n}\n\n/**\n * Update stat line from DOM\n */\nfunction updateStatLineFromDOM(guid: string, statIndex: number): void {\n    // Find the stat line element and use scoped queries\n    const statLineElement = document.getElementById(`item-${guid}-stat-${statIndex}`);\n    if (!statLineElement) return;\n\n    const typeSelect = statLineElement.querySelector(`#item-${guid}-stat-${statIndex}-type`) as HTMLSelectElement;\n    const valueInput = statLineElement.querySelector(`#item-${guid}-stat-${statIndex}-value`) as HTMLInputElement;\n\n    if (!typeSelect || !valueInput) return;\n\n    const item = getComparisonItems(currentSlot).find(i => i.guid === guid);\n    if (!item) return;\n\n    // Update the stat line in the array\n    const updatedStatLines = [...item.statLines];\n    updatedStatLines[statIndex] = {\n        type: typeSelect.value as StatId,\n        value: parseFloat(valueInput.value) || 0\n    };\n\n    updateComparisonItem(currentSlot, guid, { statLines: updatedStatLines });\n}\n\n/**\n * Update tab name\n */\nfunction updateTabName(guid: string, name: string): void {\n    const tab = document.querySelector(`[data-guid=\"${guid}\"].comparison-tab-button`);\n    if (tab) {\n        const nameSpan = tab.querySelector('.tab-item-name');\n        if (nameSpan) {\n            nameSpan.textContent = name;\n        }\n    }\n}\n\n/**\n * Render stat lines for a specific item\n */\nfunction renderItemStatLines(guid: string): void {\n    const item = getComparisonItems(currentSlot).find(i => i.guid === guid);\n    if (!item) return;\n\n    const statsContainer = document.getElementById(`item-${guid}-stats-container`) as HTMLElement;\n    if (!statsContainer) return;\n\n    statsContainer.innerHTML = '';\n\n    item.statLines.forEach((statLine, index) => {\n        const statDiv = createStatLineElement(guid, statLine, index);\n        statsContainer.appendChild(statDiv);\n    });\n}\n\n// ============================================================================\n// INITIALIZATION\n// ============================================================================\n\n/**\n * Initialize the comparison UI\n */\nexport function initializeComparisonUI(): void {\n    const container = document.getElementById('optimization-item-comparison');\n    if (!container) {\n        console.error('Comparison container not found');\n        return;\n    }\n\n    // Generate HTML\n    container.innerHTML = generateComparisonHTML();\n\n    // Load saved slot selection\n    const savedSlot = localStorage.getItem('lastSelectedComparisonSlot') as EquipmentSlotId;\n    if (savedSlot && EQUIPMENT_SLOTS[savedSlot]) {\n        currentSlot = savedSlot;\n    }\n\n    // Update slot selector\n    const slotSelector = document.getElementById('comparison-slot-selector') as HTMLSelectElement;\n    if (slotSelector) {\n        slotSelector.value = currentSlot;\n    }\n\n    // Attach event listeners\n    attachEventListeners();\n\n    // Render initial state\n    renderEquippedItem();\n    renderComparisonItems();\n\n    // Auto-calculate results on initialization\n    handleCalculate();\n}\n\n/**\n * Check for pending slot navigation (call when Item Comparison tab is shown)\n */\nexport function checkPendingSlotNavigation(): void {\n    const storedSlot = sessionStorage.getItem('selectedEquipmentSlot') as EquipmentSlotId;\n    if (storedSlot && EQUIPMENT_SLOTS[storedSlot]) {\n        sessionStorage.removeItem('selectedEquipmentSlot');\n        switchSlot(storedSlot);\n    } else {\n        // No pending navigation, just refresh results\n        handleCalculate();\n    }\n}\n\n// Export for global access\n(window as any).checkPendingSlotNavigation = checkPendingSlotNavigation;\n"],
  "mappings": "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",
  "names": []
}
