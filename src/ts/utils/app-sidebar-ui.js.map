{
  "version": 3,
  "sources": ["app-sidebar-ui.ts"],
  "sourcesContent": ["/**\r\n * App Sidebar UI Generation\r\n *\r\n * This file handles all HTML generation for the main application sidebar navigation.\r\n */\r\n\r\nimport { StatCalculationService } from \"@ts/services/stat-calculation-service\";\r\nimport { loadoutStore } from \"@ts/store/loadout.store\";\r\nimport { formatDPS } from \"./formatters\";\r\nimport { debounce } from \"./event-emitter\";\r\n\r\n// ============================================================================\r\n// HTML GENERATION\r\n// ============================================================================\r\n\r\n/**\r\n * Generate HTML for a submenu item\r\n */\r\nfunction generateSubmenuItem(page: string, tab: string, label: string): string {\r\n    const displayStyle = tab === 'stat-breakdown' || tab === 'artifacts' ? 'style=\"display: none;\"' : '';\r\n    return `<button ${displayStyle} class=\"sidebar-submenu-item\" data-tab=\"${tab}\" onclick=\"navigateToTab('${page}', '${tab}')\">${label}</button>`;\r\n}\r\n\r\n/**\r\n * Generate HTML for a navigation section with submenu\r\n */\r\nfunction generateNavSection(\r\n    pageId: string,\r\n    icon: string,\r\n    label: string,\r\n    submenus: Array<{ tab: string; label: string }>\r\n): string {\r\n    const submenuItems = submenus\r\n        .map(({ tab, label }) => generateSubmenuItem(pageId, tab, label))\r\n        .join('\\n                ');\r\n\r\n    return `\r\n            <!-- ${label} Section -->\r\n            <button class=\"sidebar-nav-item\" data-page=\"${pageId}\" onclick=\"toggleSubMenu('${pageId}')\">\r\n                <span class=\"sidebar-icon\">${icon}</span>\r\n                <span>${label}</span>\r\n                <span class=\"submenu-arrow\">\u25BC</span>\r\n            </button>\r\n            <div class=\"sidebar-submenu\" id=\"submenu-${pageId}\">\r\n                ${submenuItems}\r\n            </div>`;\r\n}\r\n\r\n/**\r\n * Generate the complete HTML for the app sidebar\r\n */\r\nexport function generateAppSidebarHTML(): string {\r\n    return `\r\n        <nav class=\"sidebar-nav\">\r\n            ${generateNavSection('setup', '\uD83C\uDFAE', 'Loadout', [\r\n        { tab: 'base-stats', label: 'Base Stats' },\r\n        { tab: 'equipment', label: 'Equipment' },\r\n        { tab: 'weapon-levels', label: 'Weapon Levels' },\r\n        { tab: 'companions', label: 'Companions' },\r\n        { tab: 'artifacts', label: 'Artifacts' }\r\n    ])}\r\n\r\n            ${generateNavSection('optimization', '\uD83E\uDDEA', 'Gear Lab', [\r\n        { tab: 'item-comparison', label: 'Item Comparison' },\r\n        { tab: 'inner-ability', label: 'Inner Ability' },\r\n        { tab: 'artifact-potential', label: 'Artifact Potential' },\r\n        { tab: 'scroll-optimizer', label: 'Scrolling' },\r\n        { tab: 'cube-potential', label: 'Cube Potential' },\r\n        { tab: 'stat-breakdown', label: 'Stat Breakdown' }\r\n    ])}\r\n\r\n            ${generateNavSection('predictions', '\uD83D\uDCCA', 'Stat Hub', [\r\n        { tab: 'stat-tables', label: 'Stat Predictions' },\r\n        { tab: 'equivalency', label: 'Stat Equivalency' }\r\n    ])}\r\n        </nav>\r\n\r\n        <div class=\"sidebar-footer\">\r\n            <div class=\"sidebar-dps-summary\">\r\n                <span class=\"sidebar-dps-label\">Current DPS</span>\r\n                <span id=\"sidebar-dps-value\" class=\"sidebar-dps-value\">-</span>\r\n            </div>\r\n            <div class=\"sidebar-footer-actions\">\r\n                <button onclick=\"exportData()\" class=\"sidebar-footer-btn\">\r\n                    <span>\uD83D\uDCCB</span>\r\n                    <span>Copy</span>\r\n                </button>\r\n                <button onclick=\"importData()\" class=\"sidebar-footer-btn\">\r\n                    <span>\uD83D\uDCE5</span>\r\n                    <span>Paste</span>\r\n                </button>\r\n            </div>\r\n            <button onclick=\"toggleTheme()\" id=\"theme-toggle-sidebar\" class=\"sidebar-footer-btn\" style=\"display: none !important;\">\r\n                <span id=\"theme-icon-sidebar\">\uD83C\uDF19</span>import { StatCalculationService } from '@ts/services/stat-calculation-service.js';\r\n\r\n                <span>Toggle Theme</span>\r\n            </button>\r\n            <a href=\"https://paypal.me/freakehms\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"sidebar-footer-btn donate-btn\">\r\n                <span>\uD83D\uDC9D</span>\r\n                <span>Support</span>\r\n            </a>\r\n        </div>`;\r\n}\r\n\r\n// ============================================================================\r\n// INITIALIZATION\r\n// ============================================================================\r\n\r\n/**\r\n * Initialize the app sidebar UI\r\n */\r\nexport function initializeAppSidebarUI(): void {\r\n    const container = document.getElementById('app-sidebar');\r\n    if (!container) {\r\n        console.error('App sidebar container not found');\r\n        return;\r\n    }\r\n\r\n    // Generate HTML\r\n    container.innerHTML = generateAppSidebarHTML();\r\n\r\n    attachAppSidebarEventListeners();\r\n}\r\n\r\n/**\r\n * Attach event listeners for app sidebar UI\r\n */\r\nexport function attachAppSidebarEventListeners(): void {\r\n    loadoutStore.on('data:initialized', (_) => {\r\n        updateDps();\r\n    });\r\n\r\n    loadoutStore.on('stat:changed', debounce((_) => {\r\n        updateDps();\r\n    }, 1500));\r\n}\r\n\r\nfunction updateDps(): void {\r\n    const statCalculationService = new StatCalculationService(loadoutStore.getBaseStats());\r\n    const dpsValue = document.getElementById(`sidebar-dps-value`) as HTMLSpanElement;\r\n    dpsValue.innerText = formatDPS(statCalculationService.baseBossDPS);\r\n}"],
  "mappings": "AAMA,SAAS,8BAA8B;AACvC,SAAS,oBAAoB;AAC7B,SAAS,iBAAiB;AAC1B,SAAS,gBAAgB;AASzB,SAAS,oBAAoB,MAAc,KAAa,OAAuB;AAC3E,QAAM,eAAe,QAAQ,oBAAoB,QAAQ,cAAc,2BAA2B;AAClG,SAAO,WAAW,YAAY,2CAA2C,GAAG,6BAA6B,IAAI,OAAO,GAAG,OAAO,KAAK;AACvI;AAKA,SAAS,mBACL,QACA,MACA,OACA,UACM;AACN,QAAM,eAAe,SAChB,IAAI,CAAC,EAAE,KAAK,OAAAA,OAAM,MAAM,oBAAoB,QAAQ,KAAKA,MAAK,CAAC,EAC/D,KAAK,oBAAoB;AAE9B,SAAO;AAAA,mBACQ,KAAK;AAAA,0DACkC,MAAM,6BAA6B,MAAM;AAAA,6CACtD,IAAI;AAAA,wBACzB,KAAK;AAAA;AAAA;AAAA,uDAG0B,MAAM;AAAA,kBAC3C,YAAY;AAAA;AAE9B;AAKO,SAAS,yBAAiC;AAC7C,SAAO;AAAA;AAAA,cAEG,mBAAmB,SAAS,aAAM,WAAW;AAAA,IACnD,EAAE,KAAK,cAAc,OAAO,aAAa;AAAA,IACzC,EAAE,KAAK,aAAa,OAAO,YAAY;AAAA,IACvC,EAAE,KAAK,iBAAiB,OAAO,gBAAgB;AAAA,IAC/C,EAAE,KAAK,cAAc,OAAO,aAAa;AAAA,IACzC,EAAE,KAAK,aAAa,OAAO,YAAY;AAAA,EAC3C,CAAC,CAAC;AAAA;AAAA,cAEQ,mBAAmB,gBAAgB,aAAM,YAAY;AAAA,IAC3D,EAAE,KAAK,mBAAmB,OAAO,kBAAkB;AAAA,IACnD,EAAE,KAAK,iBAAiB,OAAO,gBAAgB;AAAA,IAC/C,EAAE,KAAK,sBAAsB,OAAO,qBAAqB;AAAA,IACzD,EAAE,KAAK,oBAAoB,OAAO,YAAY;AAAA,IAC9C,EAAE,KAAK,kBAAkB,OAAO,iBAAiB;AAAA,IACjD,EAAE,KAAK,kBAAkB,OAAO,iBAAiB;AAAA,EACrD,CAAC,CAAC;AAAA;AAAA,cAEQ,mBAAmB,eAAe,aAAM,YAAY;AAAA,IAC1D,EAAE,KAAK,eAAe,OAAO,mBAAmB;AAAA,IAChD,EAAE,KAAK,eAAe,OAAO,mBAAmB;AAAA,EACpD,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA4BN;AASO,SAAS,yBAA+B;AAC3C,QAAM,YAAY,SAAS,eAAe,aAAa;AACvD,MAAI,CAAC,WAAW;AACZ,YAAQ,MAAM,iCAAiC;AAC/C;AAAA,EACJ;AAGA,YAAU,YAAY,uBAAuB;AAE7C,iCAA+B;AACnC;AAKO,SAAS,iCAAuC;AACnD,eAAa,GAAG,oBAAoB,CAAC,MAAM;AACvC,cAAU;AAAA,EACd,CAAC;AAED,eAAa,GAAG,gBAAgB,SAAS,CAAC,MAAM;AAC5C,cAAU;AAAA,EACd,GAAG,IAAI,CAAC;AACZ;AAEA,SAAS,YAAkB;AACvB,QAAM,yBAAyB,IAAI,uBAAuB,aAAa,aAAa,CAAC;AACrF,QAAM,WAAW,SAAS,eAAe,mBAAmB;AAC5D,WAAS,YAAY,UAAU,uBAAuB,WAAW;AACrE;",
  "names": ["label"]
}
