{
  "version": 3,
  "sources": ["tabs.ts"],
  "sourcesContent": ["// Tab switching functionality\n\nimport { resetSubTabsToDefault, updateSubmenuActiveStates } from '@core/router.js';\n\ndeclare global {\n    interface Window {\n        switchTab: (group: TabGroup, tabName: string) => void;\n        switchTabAndUpdateURL: (group: TabGroup, tabName: string, clickEvent: MouseEvent) => void;\n    }\n}\n\ntype TabGroup = 'setup' | 'analysis' | 'predictions';\ntype PageName = 'setup' | 'optimization' | 'predictions';\n\nconst pageNameMap: Record<TabGroup, PageName> = {\n    'setup': 'setup',\n    'analysis': 'optimization',\n    'predictions': 'predictions'\n};\n\nwindow.switchTab = switchTab;\nwindow.switchTabAndUpdateURL = switchTabAndUpdateURL;\n\n// Tab switching function (for programmatic use only - does NOT update URL)\nexport function switchTab(group: TabGroup, tabName: string): void {\n    _performTabSwitch(group, tabName);\n}\n\n// Tab switching function for user interactions (updates URL)\nexport function switchTabAndUpdateURL(group: TabGroup, tabName: string, clickEvent: MouseEvent): void {\n    _performTabSwitch(group, tabName, clickEvent);\n\n    // Update URL hash to reflect the new tab state\n    // Only update if this is a genuine user click (isTrusted event)\n    if (clickEvent.isTrusted) {\n        const pageName = pageNameMap[group];\n        if (pageName) {\n            // Update hash\n            const currentHash = window.location.hash;\n            const newHash = `#/${pageName}/${tabName}`;\n            if (currentHash !== newHash) {\n                window.location.hash = newHash;\n            }\n        }\n    }\n}\n\n// Internal tab switching logic (shared between both functions)\nfunction _performTabSwitch(group: TabGroup, tabName: string, clickEvent?: MouseEvent): void {\n    // Get all tab contents and buttons within the group\n    const targetElement = document.getElementById(`${group}-${tabName}`);\n    const tabContents = targetElement\n        ? Array.from(document.querySelectorAll<HTMLElement>(`[id^=\"${group}-\"]`))\n        : [];\n\n    // Find the button group more robustly - search in common container patterns\n    let tabButtons: HTMLElement[] = [];\n    const clickedButton = clickEvent?.currentTarget instanceof HTMLElement\n        ? clickEvent.currentTarget\n        : null;\n\n    if (clickedButton) {\n        // If we have an event, get siblings from the same parent\n        const parent = clickedButton.parentElement;\n        if (parent) {\n            tabButtons = Array.from(parent.children).filter((child): child is HTMLElement =>\n                child instanceof HTMLElement && (\n                    child.classList.contains('tab-button') ||\n                    child.classList.contains('optimization-tab-button')\n                )\n            );\n        }\n    } else {\n        // Fallback: search all buttons in the page that match this group\n        tabButtons = Array.from(document.querySelectorAll('.tab-button, .optimization-tab-button')).filter((btn): btn is HTMLElement => {\n            const onclickAttr = btn.getAttribute('onclick');\n            return onclickAttr && onclickAttr.includes(`'${group}'`);\n        });\n    }\n\n    // Hide all tab contents in this group (support both old and new classes)\n    tabContents.forEach((content) => {\n        if (content.classList.contains('tab-content') || content.classList.contains('optimization-tab-content')) {\n            content.classList.remove('active');\n        }\n    });\n\n    // Remove active class from all buttons in this group\n    tabButtons.forEach((button) => {\n        button.classList.remove('active');\n    });\n\n    // Show the selected tab content\n    const selectedTab = document.getElementById(`${group}-${tabName}`);\n    if (selectedTab) {\n        selectedTab.classList.add('active');\n    }\n\n    // Add active class to clicked button (if we have one)\n    if (clickedButton) {\n        clickedButton.classList.add('active');\n    } else {\n        // If no event, find and activate the button by matching onclick attribute\n        tabButtons.forEach((btn) => {\n            const onclickAttr = btn.getAttribute('onclick');\n            if (onclickAttr && onclickAttr.includes(`'${tabName}'`)) {\n                btn.classList.add('active');\n            }\n        });\n    }\n\n    // Reset sub-tabs to their default state\n    const pageName = pageNameMap[group];\n    if (pageName) {\n        resetSubTabsToDefault(pageName, tabName);\n        // Update sidebar to reflect the newly selected tab\n        updateSubmenuActiveStates(pageName, tabName);\n    }\n}\n"],
  "mappings": "AAEA,SAAS,uBAAuB,iCAAiC;AAYjE,MAAM,cAA0C;AAAA,EAC5C,SAAS;AAAA,EACT,YAAY;AAAA,EACZ,eAAe;AACnB;AAEA,OAAO,YAAY;AACnB,OAAO,wBAAwB;AAGxB,SAAS,UAAU,OAAiB,SAAuB;AAC9D,oBAAkB,OAAO,OAAO;AACpC;AAGO,SAAS,sBAAsB,OAAiB,SAAiB,YAA8B;AAClG,oBAAkB,OAAO,SAAS,UAAU;AAI5C,MAAI,WAAW,WAAW;AACtB,UAAM,WAAW,YAAY,KAAK;AAClC,QAAI,UAAU;AAEV,YAAM,cAAc,OAAO,SAAS;AACpC,YAAM,UAAU,KAAK,QAAQ,IAAI,OAAO;AACxC,UAAI,gBAAgB,SAAS;AACzB,eAAO,SAAS,OAAO;AAAA,MAC3B;AAAA,IACJ;AAAA,EACJ;AACJ;AAGA,SAAS,kBAAkB,OAAiB,SAAiB,YAA+B;AAExF,QAAM,gBAAgB,SAAS,eAAe,GAAG,KAAK,IAAI,OAAO,EAAE;AACnE,QAAM,cAAc,gBACd,MAAM,KAAK,SAAS,iBAA8B,SAAS,KAAK,KAAK,CAAC,IACtE,CAAC;AAGP,MAAI,aAA4B,CAAC;AACjC,QAAM,gBAAgB,YAAY,yBAAyB,cACrD,WAAW,gBACX;AAEN,MAAI,eAAe;AAEf,UAAM,SAAS,cAAc;AAC7B,QAAI,QAAQ;AACR,mBAAa,MAAM,KAAK,OAAO,QAAQ,EAAE;AAAA,QAAO,CAAC,UAC7C,iBAAiB,gBACb,MAAM,UAAU,SAAS,YAAY,KACrC,MAAM,UAAU,SAAS,yBAAyB;AAAA,MAE1D;AAAA,IACJ;AAAA,EACJ,OAAO;AAEH,iBAAa,MAAM,KAAK,SAAS,iBAAiB,uCAAuC,CAAC,EAAE,OAAO,CAAC,QAA4B;AAC5H,YAAM,cAAc,IAAI,aAAa,SAAS;AAC9C,aAAO,eAAe,YAAY,SAAS,IAAI,KAAK,GAAG;AAAA,IAC3D,CAAC;AAAA,EACL;AAGA,cAAY,QAAQ,CAAC,YAAY;AAC7B,QAAI,QAAQ,UAAU,SAAS,aAAa,KAAK,QAAQ,UAAU,SAAS,0BAA0B,GAAG;AACrG,cAAQ,UAAU,OAAO,QAAQ;AAAA,IACrC;AAAA,EACJ,CAAC;AAGD,aAAW,QAAQ,CAAC,WAAW;AAC3B,WAAO,UAAU,OAAO,QAAQ;AAAA,EACpC,CAAC;AAGD,QAAM,cAAc,SAAS,eAAe,GAAG,KAAK,IAAI,OAAO,EAAE;AACjE,MAAI,aAAa;AACb,gBAAY,UAAU,IAAI,QAAQ;AAAA,EACtC;AAGA,MAAI,eAAe;AACf,kBAAc,UAAU,IAAI,QAAQ;AAAA,EACxC,OAAO;AAEH,eAAW,QAAQ,CAAC,QAAQ;AACxB,YAAM,cAAc,IAAI,aAAa,SAAS;AAC9C,UAAI,eAAe,YAAY,SAAS,IAAI,OAAO,GAAG,GAAG;AACrD,YAAI,UAAU,IAAI,QAAQ;AAAA,MAC9B;AAAA,IACJ,CAAC;AAAA,EACL;AAGA,QAAM,WAAW,YAAY,KAAK;AAClC,MAAI,UAAU;AACV,0BAAsB,UAAU,OAAO;AAEvC,8BAA0B,UAAU,OAAO;AAAA,EAC/C;AACJ;",
  "names": []
}
