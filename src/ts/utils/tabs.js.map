{
  "version": 3,
  "sources": ["tabs.ts"],
  "sourcesContent": ["// Tab switching functionality\r\n\r\nimport { resetSubTabsToDefault, updateSubmenuActiveStates } from '@core/router.js';\r\n\r\ndeclare global {\r\n    interface Window {\r\n        switchTab: (group: TabGroup, tabName: string) => void;\r\n        switchTabAndUpdateURL: (group: TabGroup, tabName: string, clickEvent: MouseEvent) => void;\r\n    }\r\n}\r\n\r\ntype TabGroup = 'setup' | 'analysis' | 'predictions';\r\ntype PageName = 'setup' | 'optimization' | 'predictions';\r\n\r\nconst pageNameMap: Record<TabGroup, PageName> = {\r\n    'setup': 'setup',\r\n    'analysis': 'optimization',\r\n    'predictions': 'predictions'\r\n};\r\n\r\nwindow.switchTab = switchTab;\r\nwindow.switchTabAndUpdateURL = switchTabAndUpdateURL;\r\n\r\n// Tab switching function (for programmatic use only - does NOT update URL)\r\nexport function switchTab(group: TabGroup, tabName: string): void {\r\n    _performTabSwitch(group, tabName);\r\n}\r\n\r\n// Tab switching function for user interactions (updates URL)\r\nexport function switchTabAndUpdateURL(group: TabGroup, tabName: string, clickEvent: MouseEvent): void {\r\n    _performTabSwitch(group, tabName, clickEvent);\r\n\r\n    // Update URL hash to reflect the new tab state\r\n    // Only update if this is a genuine user click (isTrusted event)\r\n    if (clickEvent.isTrusted) {\r\n        const pageName = pageNameMap[group];\r\n        if (pageName) {\r\n            // Update hash\r\n            const currentHash = window.location.hash;\r\n            const newHash = `#/${pageName}/${tabName}`;\r\n            if (currentHash !== newHash) {\r\n                window.location.hash = newHash;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// Internal tab switching logic (shared between both functions)\r\nfunction _performTabSwitch(group: TabGroup, tabName: string, clickEvent?: MouseEvent): void {\r\n    // Get all tab contents and buttons within the group\r\n    const targetElement = document.getElementById(`${group}-${tabName}`);\r\n    const tabContents = targetElement\r\n        ? Array.from(document.querySelectorAll<HTMLElement>(`[id^=\"${group}-\"]`))\r\n        : [];\r\n\r\n    // Find the button group more robustly - search in common container patterns\r\n    let tabButtons: HTMLElement[] = [];\r\n    const clickedButton = clickEvent?.currentTarget instanceof HTMLElement\r\n        ? clickEvent.currentTarget\r\n        : null;\r\n\r\n    if (clickedButton) {\r\n        // If we have an event, get siblings from the same parent\r\n        const parent = clickedButton.parentElement;\r\n        if (parent) {\r\n            tabButtons = Array.from(parent.children).filter((child): child is HTMLElement =>\r\n                child instanceof HTMLElement && (\r\n                    child.classList.contains('tab-button') ||\r\n                    child.classList.contains('optimization-tab-button')\r\n                )\r\n            );\r\n        }\r\n    } else {\r\n        // Fallback: search all buttons in the page that match this group\r\n        tabButtons = Array.from(document.querySelectorAll('.tab-button, .optimization-tab-button')).filter((btn): btn is HTMLElement => {\r\n            const onclickAttr = btn.getAttribute('onclick');\r\n            return onclickAttr && onclickAttr.includes(`'${group}'`);\r\n        });\r\n    }\r\n\r\n    // Hide all tab contents in this group (support both old and new classes)\r\n    tabContents.forEach((content) => {\r\n        if (content.classList.contains('tab-content') || content.classList.contains('optimization-tab-content')) {\r\n            content.classList.remove('active');\r\n        }\r\n    });\r\n\r\n    // Remove active class from all buttons in this group\r\n    tabButtons.forEach((button) => {\r\n        button.classList.remove('active');\r\n    });\r\n\r\n    // Show the selected tab content\r\n    const selectedTab = document.getElementById(`${group}-${tabName}`);\r\n    if (selectedTab) {\r\n        selectedTab.classList.add('active');\r\n    }\r\n\r\n    // Add active class to clicked button (if we have one)\r\n    if (clickedButton) {\r\n        clickedButton.classList.add('active');\r\n    } else {\r\n        // If no event, find and activate the button by matching onclick attribute\r\n        tabButtons.forEach((btn) => {\r\n            const onclickAttr = btn.getAttribute('onclick');\r\n            if (onclickAttr && onclickAttr.includes(`'${tabName}'`)) {\r\n                btn.classList.add('active');\r\n            }\r\n        });\r\n    }\r\n\r\n    // Reset sub-tabs to their default state\r\n    const pageName = pageNameMap[group];\r\n    if (pageName) {\r\n        resetSubTabsToDefault(pageName, tabName);\r\n        // Update sidebar to reflect the newly selected tab\r\n        updateSubmenuActiveStates(pageName, tabName);\r\n    }\r\n}\r\n"],
  "mappings": "AAEA,SAAS,uBAAuB,iCAAiC;AAYjE,MAAM,cAA0C;AAAA,EAC5C,SAAS;AAAA,EACT,YAAY;AAAA,EACZ,eAAe;AACnB;AAEA,OAAO,YAAY;AACnB,OAAO,wBAAwB;AAGxB,SAAS,UAAU,OAAiB,SAAuB;AAC9D,oBAAkB,OAAO,OAAO;AACpC;AAGO,SAAS,sBAAsB,OAAiB,SAAiB,YAA8B;AAClG,oBAAkB,OAAO,SAAS,UAAU;AAI5C,MAAI,WAAW,WAAW;AACtB,UAAM,WAAW,YAAY,KAAK;AAClC,QAAI,UAAU;AAEV,YAAM,cAAc,OAAO,SAAS;AACpC,YAAM,UAAU,KAAK,QAAQ,IAAI,OAAO;AACxC,UAAI,gBAAgB,SAAS;AACzB,eAAO,SAAS,OAAO;AAAA,MAC3B;AAAA,IACJ;AAAA,EACJ;AACJ;AAGA,SAAS,kBAAkB,OAAiB,SAAiB,YAA+B;AAExF,QAAM,gBAAgB,SAAS,eAAe,GAAG,KAAK,IAAI,OAAO,EAAE;AACnE,QAAM,cAAc,gBACd,MAAM,KAAK,SAAS,iBAA8B,SAAS,KAAK,KAAK,CAAC,IACtE,CAAC;AAGP,MAAI,aAA4B,CAAC;AACjC,QAAM,gBAAgB,YAAY,yBAAyB,cACrD,WAAW,gBACX;AAEN,MAAI,eAAe;AAEf,UAAM,SAAS,cAAc;AAC7B,QAAI,QAAQ;AACR,mBAAa,MAAM,KAAK,OAAO,QAAQ,EAAE;AAAA,QAAO,CAAC,UAC7C,iBAAiB,gBACb,MAAM,UAAU,SAAS,YAAY,KACrC,MAAM,UAAU,SAAS,yBAAyB;AAAA,MAE1D;AAAA,IACJ;AAAA,EACJ,OAAO;AAEH,iBAAa,MAAM,KAAK,SAAS,iBAAiB,uCAAuC,CAAC,EAAE,OAAO,CAAC,QAA4B;AAC5H,YAAM,cAAc,IAAI,aAAa,SAAS;AAC9C,aAAO,eAAe,YAAY,SAAS,IAAI,KAAK,GAAG;AAAA,IAC3D,CAAC;AAAA,EACL;AAGA,cAAY,QAAQ,CAAC,YAAY;AAC7B,QAAI,QAAQ,UAAU,SAAS,aAAa,KAAK,QAAQ,UAAU,SAAS,0BAA0B,GAAG;AACrG,cAAQ,UAAU,OAAO,QAAQ;AAAA,IACrC;AAAA,EACJ,CAAC;AAGD,aAAW,QAAQ,CAAC,WAAW;AAC3B,WAAO,UAAU,OAAO,QAAQ;AAAA,EACpC,CAAC;AAGD,QAAM,cAAc,SAAS,eAAe,GAAG,KAAK,IAAI,OAAO,EAAE;AACjE,MAAI,aAAa;AACb,gBAAY,UAAU,IAAI,QAAQ;AAAA,EACtC;AAGA,MAAI,eAAe;AACf,kBAAc,UAAU,IAAI,QAAQ;AAAA,EACxC,OAAO;AAEH,eAAW,QAAQ,CAAC,QAAQ;AACxB,YAAM,cAAc,IAAI,aAAa,SAAS;AAC9C,UAAI,eAAe,YAAY,SAAS,IAAI,OAAO,GAAG,GAAG;AACrD,YAAI,UAAU,IAAI,QAAQ;AAAA,MAC9B;AAAA,IACJ,CAAC;AAAA,EACL;AAGA,QAAM,WAAW,YAAY,KAAK;AAClC,MAAI,UAAU;AACV,0BAAsB,UAAU,OAAO;AAEvC,8BAA0B,UAAU,OAAO;AAAA,EAC/C;AACJ;",
  "names": []
}
