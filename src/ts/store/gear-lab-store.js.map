{
  "version": 3,
  "sources": ["gear-lab-store.ts"],
  "sourcesContent": ["/**\r\n * Centralized store for Gear Lab data\r\n * Handles loading, saving, and migrating inner ability preset configuration\r\n *\r\n * DATA FLOW:\r\n * 1. User changes preset input\r\n * 2. Event listener fires UI handler\r\n * 3. UI handler calls gearLabStore.updatePreset()\r\n * 4. Store updates memory + saves to localStorage (immediate write)\r\n */\r\n\r\nimport type {\r\n    GearLabData,\r\n    InnerAbilityPreset,\r\n    InnerAbilityLine,\r\n    LegacyHeroPowerPresets,\r\n    LegacyCubePotentialData,\r\n    CubeSlotId,\r\n    PotentialType,\r\n    PotentialLine,\r\n    PotentialSet,\r\n    CubeSlotData,\r\n    AllCubeSlotData,\r\n    Rarity,\r\n    EquipmentSlotId,\r\n    EquipmentSlotData,\r\n    AllEquipmentSlotData,\r\n    LegacyEquipmentSlotData,\r\n    ComparisonItem,\r\n    ComparisonEquipment,\r\n    ComparisonStatLine,\r\n    LegacyComparisonItem\r\n} from '@ts/types/page/gear-lab/gear-lab.types';\r\nimport { DEFAULT_GEAR_LAB_DATA, EMPTY_POTENTIAL_LINE, EMPTY_POTENTIAL_SET, VALID_EQUIPMENT_SLOTS } from '@ts/types/page/gear-lab/gear-lab.types';\r\nimport { INNER_ABILITY_DISPLAY_NAME_TO_ID } from '@ts/page/inner-ability/inner-ability';\r\nimport { STAT, type StatId } from '@ts/types/constants';\r\n\r\nexport class GearLabStore {\r\n    private data: GearLabData;\r\n    private isInitialized: boolean = false;\r\n\r\n    // ========================================================================\r\n    // CONSTRUCTOR\r\n    // ========================================================================\r\n\r\n    constructor() {\r\n        // Initialize with default data - will be populated by initialize()\r\n        this.data = JSON.parse(JSON.stringify(DEFAULT_GEAR_LAB_DATA));\r\n    }\r\n\r\n    // ========================================================================\r\n    // INITIALIZATION\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Initialize store - loads from localStorage, handles migration\r\n     * Call this at the top of the application initialization\r\n     *\r\n     * @returns Promise that resolves when initialization is complete\r\n     */\r\n    async initialize(): Promise<void> {\r\n        if (this.isInitialized) {\r\n            console.warn('GearLabStore already initialized');\r\n            return;\r\n        }\r\n\r\n        // 1. Try loading from new 'gear-lab-data' key\r\n        const newData = localStorage.getItem('gear-lab-data');\r\n\r\n        if (newData) {\r\n            try {\r\n                this.data = JSON.parse(newData);\r\n                console.log('GearLabStore: Loaded from new format (gear-lab-data)');\r\n            } catch (e) {\r\n                console.error('GearLabStore: Failed to parse gear-lab-data, falling back to migration', e);\r\n                this.migrateFromLegacy();\r\n            }\r\n        } else {\r\n            // 2. If new key doesn't exist, migrate from old 'heroPowerPresets' key\r\n            this.migrateFromLegacy();\r\n        }\r\n\r\n        // 3. Validate and fill in missing fields with defaults\r\n        this.validateAndFillDefaults();\r\n\r\n        this.isInitialized = true;\r\n        console.log('GearLabStore: Initialization complete', this.data);\r\n    }\r\n\r\n    /**\r\n     * Migrate data from legacy localStorage keys to new format\r\n     */\r\n    private migrateFromLegacy(): void {\r\n        console.log('GearLabStore: Migrating from legacy format...');\r\n\r\n        // Migrate Inner Ability from heroPowerPresets\r\n        const legacyInnerAbilityStr = localStorage.getItem('heroPowerPresets');\r\n        if (legacyInnerAbilityStr) {\r\n            try {\r\n                const legacy: LegacyHeroPowerPresets = JSON.parse(legacyInnerAbilityStr);\r\n\r\n                // Migrate each preset\r\n                Object.entries(legacy).forEach(([key, preset]) => {\r\n                    const presetId = parseInt(key);\r\n                    if (presetId >= 1 && presetId <= 10) {\r\n                        // Migrate lines to include statId field\r\n                        const migratedLines = (preset.lines || []).map((line: any) => ({\r\n                            stat: line.stat || '',\r\n                            statId: line.stat ? INNER_ABILITY_DISPLAY_NAME_TO_ID[line.stat] || '' : '',\r\n                            value: line.value || 0\r\n                        }));\r\n\r\n                        this.data.innerAbility.presets[presetId] = {\r\n                            id: presetId,\r\n                            isEquipped: preset.isEquipped || false,\r\n                            lines: migratedLines\r\n                        };\r\n                    }\r\n                });\r\n\r\n                console.log('GearLabStore: Inner Ability migration complete');\r\n\r\n                // Clean up old localStorage key after successful migration\r\n                localStorage.removeItem('heroPowerPresets');\r\n                console.log('GearLabStore: Deleted heroPowerPresets key');\r\n            } catch (error) {\r\n                console.error('GearLabStore: Failed to migrate heroPowerPresets:', error);\r\n            }\r\n        } else {\r\n            console.log('GearLabStore: No legacy heroPowerPresets found');\r\n        }\r\n\r\n        // Migrate Cube Potential from old state.js format\r\n        this.migrateCubePotentialFromLegacy();\r\n\r\n        // Migrate Equipment Slots from old format\r\n        this.migrateEquipmentSlotsFromLegacy();\r\n\r\n        // Migrate Comparison Items from old format\r\n        this.migrateComparisonItemsFromLegacy();\r\n\r\n        console.log('GearLabStore: Migration complete, saving to new format...');\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Migrate comparison items from legacy comparison-state.js format\r\n     */\r\n    private migrateComparisonItemsFromLegacy(): void {\r\n        // Try to read from localStorage with keys 'comparisonItems.{slotId}'\r\n        const slotIds: EquipmentSlotId[] = ['head', 'cape', 'chest', 'shoulders', 'legs', 'belt', 'gloves', 'boots', 'ring', 'neck', 'eye-accessory'];\r\n\r\n        let migratedCount = 0;\r\n\r\n        slotIds.forEach(slotId => {\r\n            const legacyKey = `comparisonItems.${slotId}`;\r\n            const legacyDataStr = localStorage.getItem(legacyKey);\r\n\r\n            if (legacyDataStr) {\r\n                try {\r\n                    const legacyItems: LegacyComparisonItem[] = JSON.parse(legacyDataStr);\r\n\r\n                    // Migrate each item to new format\r\n                    legacyItems.forEach(legacyItem => {\r\n                        // Convert legacy stats format to new statLines format\r\n                        const statLines: ComparisonStatLine[] = (legacyItem.stats || []).map(stat => ({\r\n                            type: stat.type as StatId,\r\n                            value: parseFloat(stat.value) || 0\r\n                        }));\r\n\r\n                        const newItem: Omit<ComparisonItem, 'guid'> = {\r\n                            name: legacyItem.name || 'Item',\r\n                            attack: legacyItem.attack || 0,\r\n                            mainStat: 0,  // Legacy format didn't track main stat separately\r\n                            statLines\r\n                        };\r\n\r\n                        // Add to comparison equipment (will generate new GUID)\r\n                        this.addComparisonItem(slotId, newItem);\r\n                        migratedCount++;\r\n                    });\r\n\r\n                    console.log(`GearLabStore: Migrated ${legacyItems.length} comparison items for slot ${slotId}`);\r\n\r\n                    // Clean up old localStorage key after successful migration\r\n                    localStorage.removeItem(legacyKey);\r\n                    console.log(`GearLabStore: Deleted ${legacyKey} key`);\r\n\r\n                } catch (error) {\r\n                    console.error(`GearLabStore: Failed to migrate comparison items for ${slotId}:`, error);\r\n                }\r\n            }\r\n        });\r\n\r\n        if (migratedCount > 0) {\r\n            console.log(`GearLabStore: Total ${migratedCount} comparison items migrated`);\r\n        } else {\r\n            console.log('GearLabStore: No legacy comparison items found');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Migrate cube potential data from legacy format\r\n     */\r\n    private migrateCubePotentialFromLegacy(): void {\r\n        // Try to read from localStorage with key 'cubePotentialData'\r\n        const legacyDataStr = localStorage.getItem('cubePotentialData');\r\n        if (!legacyDataStr) {\r\n            console.log('GearLabStore: No legacy cubePotentialData found in localStorage');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const legacyCubeData: LegacyCubePotentialData = JSON.parse(legacyDataStr);\r\n\r\n            // Migrate each slot\r\n            Object.entries(legacyCubeData).forEach(([slotId, slotData]) => {\r\n                // Validate slotId is a valid CubeSlotId\r\n                if (this.isValidCubeSlotId(slotId)) {\r\n                    this.data.cubePotential[slotId as CubeSlotId] = {\r\n                        regular: {\r\n                            rarity: slotData.regular.rarity || 'normal',\r\n                            rollCount: slotData.regular.rollCount || 0,\r\n                            setA: this.validatePotentialSet(slotData.regular.setA),\r\n                            setB: this.validatePotentialSet(slotData.regular.setB)\r\n                        },\r\n                        bonus: {\r\n                            rarity: slotData.bonus.rarity || 'normal',\r\n                            rollCount: slotData.bonus.rollCount || 0,\r\n                            setA: this.validatePotentialSet(slotData.bonus.setA),\r\n                            setB: this.validatePotentialSet(slotData.bonus.setB)\r\n                        }\r\n                    };\r\n                }\r\n            });\r\n\r\n            console.log('GearLabStore: Cube potential migration complete');\r\n\r\n            // Clean up old localStorage key after successful migration\r\n            localStorage.removeItem('cubePotentialData');\r\n            console.log('GearLabStore: Deleted cubePotentialData key');\r\n        } catch (error) {\r\n            console.error('GearLabStore: Failed to migrate cube potential:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Migrate equipment slot data from legacy format\r\n     */\r\n    private migrateEquipmentSlotsFromLegacy(): void {\r\n        // Try to read from localStorage with key 'equipmentSlots'\r\n        const legacyDataStr = localStorage.getItem('equipmentSlots');\r\n        if (!legacyDataStr) {\r\n            console.log('GearLabStore: No legacy equipmentSlots found in localStorage');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const legacyData: Record<string, LegacyEquipmentSlotData> = JSON.parse(legacyDataStr);\r\n\r\n            // Migrate each slot\r\n            Object.entries(legacyData).forEach(([slotId, slotData]) => {\r\n                // Validate slotId is a valid EquipmentSlotId\r\n                if (this.isValidEquipmentSlotId(slotId)) {\r\n                    this.data.equipmentSlots[slotId as EquipmentSlotId] = {\r\n                        attack: typeof slotData.attack === 'number' ? slotData.attack : 0,\r\n                        mainStat: typeof slotData.mainStat === 'number' ? slotData.mainStat : 0,\r\n                        damageAmp: typeof slotData.damageAmp === 'number' ? slotData.damageAmp : 0\r\n                    };\r\n                }\r\n            });\r\n\r\n            console.log('GearLabStore: Equipment slots migration complete');\r\n\r\n            // Clean up old localStorage key after successful migration\r\n            localStorage.removeItem('equipmentSlots');\r\n            console.log('GearLabStore: Deleted equipmentSlots key');\r\n        } catch (error) {\r\n            console.error('GearLabStore: Failed to migrate equipment slots:', error);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Validate if a string is a valid EquipmentSlotId\r\n     */\r\n    private isValidEquipmentSlotId(slotId: string): boolean {\r\n        return VALID_EQUIPMENT_SLOTS.includes(slotId as EquipmentSlotId);\r\n    }\r\n\r\n    /**\r\n     * Validate if a string is a valid CubeSlotId\r\n     */\r\n    private isValidCubeSlotId(slotId: string): boolean {\r\n        const validSlots: CubeSlotId[] = ['helm', 'cape', 'chest', 'shoulder', 'legs', 'belt', 'gloves', 'boots', 'ring', 'necklace', 'eye-accessory'];\r\n        return validSlots.includes(slotId as CubeSlotId);\r\n    }\r\n\r\n    /**\r\n     * Validate and sanitize a potential set\r\n     */\r\n    private validatePotentialSet(set: any): PotentialSet {\r\n        return {\r\n            line1: this.validatePotentialLine(set?.line1),\r\n            line2: this.validatePotentialLine(set?.line2),\r\n            line3: this.validatePotentialLine(set?.line3)\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Validate and sanitize a potential line\r\n     */\r\n    private validatePotentialLine(line: any): PotentialLine {\r\n        if (!line || typeof line.stat !== 'string') {\r\n            return { ...EMPTY_POTENTIAL_LINE };\r\n        }\r\n        return {\r\n            stat: line.stat || '',\r\n            value: typeof line.value === 'number' ? line.value : 0,\r\n            prime: Boolean(line.prime)\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Validate data structure and fill missing fields with defaults\r\n     */\r\n    private validateAndFillDefaults(): void {\r\n        const defaults = DEFAULT_GEAR_LAB_DATA;\r\n\r\n        // Validate innerAbility.presets\r\n        if (!this.data.innerAbility?.presets) {\r\n            this.data.innerAbility = {\r\n                presets: { ...defaults.innerAbility.presets }\r\n            };\r\n        }\r\n\r\n        // Ensure all presets 1-10 exist\r\n        for (let i = 1; i <= 10; i++) {\r\n            if (!this.data.innerAbility.presets[i]) {\r\n                this.data.innerAbility.presets[i] = {\r\n                    id: i,\r\n                    isEquipped: false,\r\n                    lines: []\r\n                };\r\n            } else {\r\n                // Validate preset structure\r\n                const preset = this.data.innerAbility.presets[i];\r\n                if (typeof preset.id !== 'number') preset.id = i;\r\n                if (typeof preset.isEquipped !== 'boolean') preset.isEquipped = false;\r\n                if (!Array.isArray(preset.lines)) preset.lines = [];\r\n            }\r\n        }\r\n\r\n        // Ensure only one preset is equipped\r\n        const equippedPresets = Object.values(this.data.innerAbility.presets)\r\n            .filter(p => p.isEquipped);\r\n\r\n        if (equippedPresets.length > 1) {\r\n            // Keep only the first equipped preset\r\n            equippedPresets.slice(1).forEach(p => p.isEquipped = false);\r\n            console.warn('GearLabStore: Multiple presets equipped, keeping only first');\r\n        }\r\n\r\n        // Validate cubePotential\r\n        if (!this.data.cubePotential) {\r\n            this.data.cubePotential = { ...defaults.cubePotential };\r\n        }\r\n\r\n        // Ensure all cube slots exist with valid data\r\n        const validSlots: CubeSlotId[] = ['helm', 'cape', 'chest', 'shoulder', 'legs', 'belt', 'gloves', 'boots', 'ring', 'necklace', 'eye-accessory'];\r\n        validSlots.forEach(slotId => {\r\n            if (!this.data.cubePotential[slotId]) {\r\n                this.data.cubePotential[slotId] = { ...defaults.cubePotential[slotId] };\r\n            } else {\r\n                // Validate slot data structure\r\n                const slot = this.data.cubePotential[slotId];\r\n                ['regular', 'bonus'].forEach((potentialType: PotentialType) => {\r\n                    if (!slot[potentialType]) {\r\n                        slot[potentialType] = { ...defaults.cubePotential[slotId][potentialType] };\r\n                    } else {\r\n                        const typeData = slot[potentialType];\r\n                        // Validate rarity\r\n                        if (!this.isValidRarity(typeData.rarity)) {\r\n                            typeData.rarity = 'normal';\r\n                        }\r\n                        // Validate rollCount\r\n                        if (typeof typeData.rollCount !== 'number') {\r\n                            typeData.rollCount = 0;\r\n                        }\r\n                        // Validate sets\r\n                        typeData.setA = this.validatePotentialSet(typeData.setA);\r\n                        typeData.setB = this.validatePotentialSet(typeData.setB);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        // Validate equipmentSlots\r\n        if (!this.data.equipmentSlots) {\r\n            this.data.equipmentSlots = { ...defaults.equipmentSlots };\r\n        }\r\n\r\n        // Ensure all equipment slots exist with valid data\r\n        VALID_EQUIPMENT_SLOTS.forEach(slotId => {\r\n            if (!this.data.equipmentSlots[slotId]) {\r\n                this.data.equipmentSlots[slotId] = { ...defaults.equipmentSlots[slotId] };\r\n            } else {\r\n                // Validate slot data structure\r\n                const slot = this.data.equipmentSlots[slotId];\r\n                if (typeof slot.attack !== 'number') slot.attack = 0;\r\n                if (typeof slot.mainStat !== 'number') slot.mainStat = 0;\r\n                if (typeof slot.damageAmp !== 'number') slot.damageAmp = 0;\r\n            }\r\n        });\r\n\r\n        // Validate comparisonEquipment\r\n        if (!this.data.comparisonEquipment) {\r\n            this.data.comparisonEquipment = { ...defaults.comparisonEquipment };\r\n        }\r\n\r\n        // Ensure all comparison equipment slots exist with valid arrays\r\n        VALID_EQUIPMENT_SLOTS.forEach(slotId => {\r\n            if (!Array.isArray(this.data.comparisonEquipment[slotId])) {\r\n                this.data.comparisonEquipment[slotId] = [];\r\n            } else {\r\n                // Validate each item in the array\r\n                this.data.comparisonEquipment[slotId] = this.data.comparisonEquipment[slotId].filter(item => {\r\n                    // Validate item structure\r\n                    if (typeof item.guid !== 'string' || !item.guid) return false;\r\n                    if (typeof item.name !== 'string') return false;\r\n                    if (typeof item.attack !== 'number') return false;\r\n                    if (typeof item.mainStat !== 'number') return false;\r\n                    if (!Array.isArray(item.statLines)) return false;\r\n\r\n                    // Validate stat lines\r\n                    item.statLines = item.statLines.filter(statLine => {\r\n                        return typeof statLine.type === 'string' && typeof statLine.value === 'number';\r\n                    });\r\n\r\n                    return true;\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Validate if a string is a valid Rarity\r\n     */\r\n    private isValidRarity(rarity: any): rarity is Rarity {\r\n        const validRarities: Rarity[] = ['normal', 'rare', 'epic', 'unique', 'legendary', 'mystic'];\r\n        return validRarities.includes(rarity);\r\n    }\r\n\r\n    // ========================================================================\r\n    // GETTERS - Return pre-hydrated data with safe defaults\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Get all inner ability presets\r\n     * @returns All 10 presets as a record\r\n     */\r\n    getInnerAbilityPresets(): Record<number, InnerAbilityPreset> {\r\n        return JSON.parse(JSON.stringify(this.data.innerAbility.presets));\r\n    }\r\n\r\n    /**\r\n     * Get a single preset\r\n     * @param id - Preset ID (1-10)\r\n     * @returns Preset data or null if not found\r\n     */\r\n    getPreset(id: number): InnerAbilityPreset | null {\r\n        const preset = this.data.innerAbility.presets[id];\r\n        return preset ? JSON.parse(JSON.stringify(preset)) : null;\r\n    }\r\n\r\n    /**\r\n     * Get the currently equipped preset ID\r\n     * @returns Equipped preset ID (1-10) or null if none equipped\r\n     */\r\n    getEquippedPresetId(): number | null {\r\n        const equipped = Object.values(this.data.innerAbility.presets)\r\n            .find(p => p.isEquipped);\r\n        return equipped ? equipped.id : null;\r\n    }\r\n\r\n    /**\r\n     * Get all data (for export/debugging)\r\n     * @returns Deep clone of gear lab data\r\n     */\r\n    getAllData(): GearLabData {\r\n        return JSON.parse(JSON.stringify(this.data));\r\n    }\r\n\r\n    // ========================================================================\r\n    // SETTERS - Partial updates with immediate save\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Update a preset\r\n     * @param id - Preset ID (1-10)\r\n     * @param data - Partial preset data to update\r\n     */\r\n    updatePreset(id: number, data: Partial<InnerAbilityPreset>): void {\r\n        if (id < 1 || id > 10) {\r\n            console.error(`GearLabStore: Invalid preset ID ${id}`);\r\n            return;\r\n        }\r\n\r\n        if (!this.data.innerAbility.presets[id]) {\r\n            this.data.innerAbility.presets[id] = {\r\n                id,\r\n                isEquipped: false,\r\n                lines: []\r\n            };\r\n        }\r\n\r\n        // Merge update with existing preset\r\n        this.data.innerAbility.presets[id] = {\r\n            ...this.data.innerAbility.presets[id],\r\n            ...data,\r\n            id  // Ensure id cannot be changed\r\n        };\r\n\r\n        // Ensure only one preset is equipped\r\n        if (data.isEquipped === true) {\r\n            for (let i = 1; i <= 10; i++) {\r\n                if (i !== id) {\r\n                    this.data.innerAbility.presets[i].isEquipped = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Update a single line in a preset\r\n     * @param presetId - Preset ID (1-10)\r\n     * @param lineIndex - Line index (0-5)\r\n     * @param line - Line data\r\n     */\r\n    updatePresetLine(presetId: number, lineIndex: number, line: InnerAbilityLine): void {\r\n        if (presetId < 1 || presetId > 10) {\r\n            console.error(`GearLabStore: Invalid preset ID ${presetId}`);\r\n            return;\r\n        }\r\n\r\n        if (lineIndex < 0 || lineIndex > 5) {\r\n            console.error(`GearLabStore: Invalid line index ${lineIndex}`);\r\n            return;\r\n        }\r\n\r\n        const preset = this.data.innerAbility.presets[presetId];\r\n        if (!preset) {\r\n            console.error(`GearLabStore: Preset ${presetId} not found`);\r\n            return;\r\n        }\r\n\r\n        // Ensure lines array exists and has enough space\r\n        if (!preset.lines) {\r\n            preset.lines = [];\r\n        }\r\n\r\n        // Extend array if needed\r\n        while (preset.lines.length <= lineIndex) {\r\n            preset.lines.push({ stat: '', statId: '', value: 0 });\r\n        }\r\n\r\n        // Populate statId based on stat name using the mapping\r\n        const statId = line.stat ? INNER_ABILITY_DISPLAY_NAME_TO_ID[line.stat] || '' : '';\r\n        preset.lines[lineIndex] = { ...line, statId };\r\n\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Set which preset is equipped\r\n     * @param id - Preset ID to equip (1-10), or null to unequip all\r\n     */\r\n    setEquippedPreset(id: number | null): void {\r\n        if (id !== null && (id < 1 || id > 10)) {\r\n            console.error(`GearLabStore: Invalid preset ID ${id}`);\r\n            return;\r\n        }\r\n\r\n        // Unequip all presets\r\n        for (let i = 1; i <= 10; i++) {\r\n            this.data.innerAbility.presets[i].isEquipped = false;\r\n        }\r\n\r\n        // Equip the specified preset\r\n        if (id !== null) {\r\n            this.data.innerAbility.presets[id].isEquipped = true;\r\n        }\r\n\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    // ========================================================================\r\n    // CUBE POTENTIAL GETTERS\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Get all cube slot data\r\n     * @returns Deep clone of all cube slot data\r\n     */\r\n    getCubeSlotData(): AllCubeSlotData {\r\n        return JSON.parse(JSON.stringify(this.data.cubePotential));\r\n    }\r\n\r\n    /**\r\n     * Get data for a specific cube slot\r\n     * @param slotId - Equipment slot ID\r\n     * @returns Cube slot data or null if not found\r\n     */\r\n    getCubeSlot(slotId: CubeSlotId): CubeSlotData | null {\r\n        const slot = this.data.cubePotential[slotId];\r\n        return slot ? JSON.parse(JSON.stringify(slot)) : null;\r\n    }\r\n\r\n    // ========================================================================\r\n    // CUBE POTENTIAL SETTERS\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Update rarity for a slot's potential type\r\n     * @param slotId - Equipment slot ID\r\n     * @param potentialType - 'regular' or 'bonus'\r\n     * @param rarity - New rarity value\r\n     */\r\n    updateCubeRarity(slotId: CubeSlotId, potentialType: PotentialType, rarity: Rarity): void {\r\n        if (!this.data.cubePotential[slotId]) {\r\n            console.error(`GearLabStore: Invalid slot ID ${slotId}`);\r\n            return;\r\n        }\r\n\r\n        this.data.cubePotential[slotId][potentialType].rarity = rarity;\r\n        // Reset roll count when rarity changes\r\n        this.data.cubePotential[slotId][potentialType].rollCount = 0;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Update roll count for a slot's potential type\r\n     * @param slotId - Equipment slot ID\r\n     * @param potentialType - 'regular' or 'bonus'\r\n     * @param rollCount - New roll count value\r\n     */\r\n    updateCubeRollCount(slotId: CubeSlotId, potentialType: PotentialType, rollCount: number): void {\r\n        if (!this.data.cubePotential[slotId]) {\r\n            console.error(`GearLabStore: Invalid slot ID ${slotId}`);\r\n            return;\r\n        }\r\n\r\n        this.data.cubePotential[slotId][potentialType].rollCount = rollCount;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Update a potential line for a slot's potential type and set\r\n     * @param slotId - Equipment slot ID\r\n     * @param potentialType - 'regular' or 'bonus'\r\n     * @param setName - 'setA' or 'setB'\r\n     * @param lineNumber - Line number (1, 2, or 3)\r\n     * @param line - Line data\r\n     */\r\n    updateCubeLine(\r\n        slotId: CubeSlotId,\r\n        potentialType: PotentialType,\r\n        setName: 'setA' | 'setB',\r\n        lineNumber: 1 | 2 | 3,\r\n        line: PotentialLine\r\n    ): void {\r\n        if (!this.data.cubePotential[slotId]) {\r\n            console.error(`GearLabStore: Invalid slot ID ${slotId}`);\r\n            return;\r\n        }\r\n\r\n        const lineKey = `line${lineNumber}` as keyof PotentialSet;\r\n        this.data.cubePotential[slotId][potentialType][setName][lineKey] = line;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Update an entire potential set for a slot's potential type\r\n     * @param slotId - Equipment slot ID\r\n     * @param potentialType - 'regular' or 'bonus'\r\n     * @param setName - 'setA' or 'setB'\r\n     * @param set - Complete potential set\r\n     */\r\n    updateCubeSet(\r\n        slotId: CubeSlotId,\r\n        potentialType: PotentialType,\r\n        setName: 'setA' | 'setB',\r\n        set: PotentialSet\r\n    ): void {\r\n        if (!this.data.cubePotential[slotId]) {\r\n            console.error(`GearLabStore: Invalid slot ID ${slotId}`);\r\n            return;\r\n        }\r\n\r\n            this.data.cubePotential[slotId][potentialType][setName] = set;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    // ========================================================================\r\n    // EQUIPMENT SLOTS\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Get all equipment slot data\r\n     * @returns Deep clone of all equipment slot data\r\n     */\r\n    getEquipmentSlots(): AllEquipmentSlotData {\r\n        return JSON.parse(JSON.stringify(this.data.equipmentSlots));\r\n    }\r\n\r\n    /**\r\n     * Get data for a specific equipment slot\r\n     * @param slotId - Equipment slot ID\r\n     * @returns Equipment slot data or null if not found\r\n     */\r\n    getEquipmentSlot(slotId: EquipmentSlotId): EquipmentSlotData | null {\r\n        const slot = this.data.equipmentSlots[slotId];\r\n        return slot ? JSON.parse(JSON.stringify(slot)) : null;\r\n    }\r\n\r\n    /**\r\n     * Update equipment slot data\r\n     * @param slotId - Equipment slot ID\r\n     * @param data - Partial equipment slot data to update\r\n     */\r\n    updateEquipmentSlot(slotId: EquipmentSlotId, data: Partial<EquipmentSlotData>): void {\r\n        if (!VALID_EQUIPMENT_SLOTS.includes(slotId)) {\r\n            console.error(`GearLabStore: Invalid slot ID ${slotId}`);\r\n            return;\r\n        }\r\n\r\n        if (!this.data.equipmentSlots[slotId]) {\r\n            this.data.equipmentSlots[slotId] = { attack: 0, mainStat: 0, damageAmp: 0 };\r\n        }\r\n\r\n        // Merge update with existing slot data\r\n        this.data.equipmentSlots[slotId] = {\r\n            ...this.data.equipmentSlots[slotId],\r\n            ...data\r\n        };\r\n\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Update all equipment slots at once\r\n     * @param slots - Complete equipment slot data\r\n     */\r\n    updateAllEquipmentSlots(slots: Partial<AllEquipmentSlotData>): void {\r\n        VALID_EQUIPMENT_SLOTS.forEach(slotId => {\r\n            if (slots[slotId]) {\r\n                if (!this.data.equipmentSlots[slotId]) {\r\n                    this.data.equipmentSlots[slotId] = { attack: 0, mainStat: 0, damageAmp: 0 };\r\n                }\r\n\r\n                this.data.equipmentSlots[slotId] = {\r\n                    ...this.data.equipmentSlots[slotId],\r\n                    ...slots[slotId]\r\n                };\r\n            }\r\n        });\r\n\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    // ========================================================================\r\n    // COMPARISON EQUIPMENT\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Get all comparison equipment data\r\n     * @returns Deep clone of all comparison equipment\r\n     */\r\n    getComparisonEquipment(): ComparisonEquipment {\r\n        return JSON.parse(JSON.stringify(this.data.comparisonEquipment));\r\n    }\r\n\r\n    /**\r\n     * Get comparison items for a specific slot\r\n     * @param slotId - Equipment slot ID\r\n     * @returns Array of comparison items for the slot\r\n     */\r\n    getComparisonItems(slotId: EquipmentSlotId): ComparisonItem[] {\r\n        if (!this.data.comparisonEquipment[slotId]) {\r\n            this.data.comparisonEquipment[slotId] = [];\r\n        }\r\n        return JSON.parse(JSON.stringify(this.data.comparisonEquipment[slotId]));\r\n    }\r\n\r\n    /**\r\n     * Get a specific comparison item by GUID\r\n     * @param slotId - Equipment slot ID\r\n     * @param guid - Item GUID\r\n     * @returns Item data or null if not found\r\n     */\r\n    getComparisonItem(slotId: EquipmentSlotId, guid: string): ComparisonItem | null {\r\n        const items = this.data.comparisonEquipment[slotId];\r\n        if (!items) return null;\r\n\r\n        const item = items.find(i => i.guid === guid);\r\n        return item ? JSON.parse(JSON.stringify(item)) : null;\r\n    }\r\n\r\n    /**\r\n     * Add a new comparison item to a slot\r\n     * @param slotId - Equipment slot ID\r\n     * @param item - Item data (guid will be generated)\r\n     * @returns The created item with generated guid\r\n     */\r\n    addComparisonItem(slotId: EquipmentSlotId, item: Omit<ComparisonItem, 'guid'>): ComparisonItem {\r\n        if (!this.data.comparisonEquipment[slotId]) {\r\n            this.data.comparisonEquipment[slotId] = [];\r\n        }\r\n\r\n        // Generate UUID v4 (parameter type excludes guid, so we always generate)\r\n        const guid = this.generateUUID();\r\n\r\n        const newItem: ComparisonItem = {\r\n            guid,\r\n            name: item.name,\r\n            attack: item.attack,\r\n            mainStat: item.mainStat,\r\n            statLines: item.statLines || []\r\n        };\r\n\r\n        this.data.comparisonEquipment[slotId].push(newItem);\r\n        this.saveDualWrite();\r\n\r\n        return JSON.parse(JSON.stringify(newItem));\r\n    }\r\n\r\n    /**\r\n     * Update an existing comparison item\r\n     * @param slotId - Equipment slot ID\r\n     * @param guid - Item GUID\r\n     * @param data - Partial item data to update\r\n     * @returns True if successful, false if item not found\r\n     */\r\n    updateComparisonItem(slotId: EquipmentSlotId, guid: string, data: Partial<ComparisonItem>): boolean {\r\n        const items = this.data.comparisonEquipment[slotId];\r\n        if (!items) return false;\r\n\r\n        const index = items.findIndex(i => i.guid === guid);\r\n        if (index === -1) return false;\r\n\r\n        // Merge update with existing item\r\n        items[index] = {\r\n            ...items[index],\r\n            ...data,\r\n            guid  // Ensure guid cannot be changed\r\n        };\r\n\r\n        this.saveDualWrite();\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Remove a comparison item from a slot\r\n     * @param slotId - Equipment slot ID\r\n     * @param guid - Item GUID\r\n     * @returns True if successful, false if item not found\r\n     */\r\n    removeComparisonItem(slotId: EquipmentSlotId, guid: string): boolean {\r\n        const items = this.data.comparisonEquipment[slotId];\r\n        if (!items) return false;\r\n\r\n        const index = items.findIndex(i => i.guid === guid);\r\n        if (index === -1) return false;\r\n\r\n        items.splice(index, 1);\r\n        this.saveDualWrite();\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Clear all comparison items from a slot\r\n     * @param slotId - Equipment slot ID\r\n     */\r\n    clearComparisonItems(slotId: EquipmentSlotId): void {\r\n        if (this.data.comparisonEquipment[slotId]) {\r\n            this.data.comparisonEquipment[slotId] = [];\r\n            this.saveDualWrite();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add a stat line to a comparison item\r\n     * @param slotId - Equipment slot ID\r\n     * @param guid - Item GUID\r\n     * @param statLine - Stat line data\r\n     * @returns True if successful, false if item not found\r\n     */\r\n    addComparisonItemStatLine(slotId: EquipmentSlotId, guid: string, statLine: ComparisonStatLine): boolean {\r\n        const items = this.data.comparisonEquipment[slotId];\r\n        if (!items) return false;\r\n\r\n        const item = items.find(i => i.guid === guid);\r\n        if (!item) return false;\r\n\r\n        item.statLines.push(statLine);\r\n        this.saveDualWrite();\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Remove a stat line from a comparison item by index\r\n     * @param slotId - Equipment slot ID\r\n     * @param guid - Item GUID\r\n     * @param statLineIndex - Index of stat line to remove\r\n     * @returns True if successful, false if item or stat line not found\r\n     */\r\n    removeComparisonItemStatLine(slotId: EquipmentSlotId, guid: string, statLineIndex: number): boolean {\r\n        const items = this.data.comparisonEquipment[slotId];\r\n        if (!items) return false;\r\n\r\n        const item = items.find(i => i.guid === guid);\r\n        if (!item) return false;\r\n\r\n        if (statLineIndex < 0 || statLineIndex >= item.statLines.length) return false;\r\n\r\n        item.statLines.splice(statLineIndex, 1);\r\n        this.saveDualWrite();\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Generate a UUID v4\r\n     * @returns UUID v4 string\r\n     */\r\n    private generateUUID(): string {\r\n        // UUID v4 implementation\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\r\n            const r = Math.random() * 16 | 0;\r\n            const v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n            return v.toString(16);\r\n        });\r\n    }\r\n\r\n    // ========================================================================\r\n    // PERSISTENCE\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Save to localStorage\r\n     */\r\n    private saveDualWrite(): void {\r\n        localStorage.setItem('gear-lab-data', JSON.stringify(this.data));\r\n    }\r\n\r\n    // ========================================================================\r\n    // TESTING/DEBUGGING HELPERS\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Reset store to defaults (for testing)\r\n     */\r\n    reset(): void {\r\n        this.data = JSON.parse(JSON.stringify(DEFAULT_GEAR_LAB_DATA));\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Check if store is initialized\r\n     */\r\n    isReady(): boolean {\r\n        return this.isInitialized;\r\n    }\r\n}\r\n\r\n// ========================================================================\r\n// SINGLETON EXPORT\r\n// ========================================================================\r\n\r\nexport const gearLabStore = new GearLabStore();\r\n"],
  "mappings": "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",
  "names": []
}
