{
  "version": 3,
  "sources": ["loadout.store.ts"],
  "sourcesContent": ["/**\n * Centralized store for loadout data\n * Handles loading, saving, and migrating loadout configuration\n *\n * DATA FLOW:\n * 1. User changes DOM input\n * 2. Event listener fires UI handler\n * 3. UI handler calls loadoutStore.updateX()\n * 4. Store updates memory + saves to localStorage (dual-write)\n */\n\nimport type {\n    LoadoutData,\n    MasteryTier,\n    MasteryType,\n    LegacyDamageCalculatorData,\n    BaseStats\n} from '@ts/types/loadout';\nimport { DEFAULT_LOADOUT_DATA } from '@ts/types/loadout';\nimport { CONTENT_TYPE, JOB_TIER, MASTERY_TYPE, DEFAULT_BASE_STATS, STAT, type ContentType, type JobTier, type MasteryTypeValue, type StatKey } from '@ts/types/constants';\nimport type { CompanionKey, CompanionPresetId, CompanionPreset, CompanionData, CompanionState } from '@ts/types/page/companions/companions.types';\nimport type { EquipmentSlotId, EquipmentSlotData, StatLine } from '@ts/types/page/equipment/equipment.types';\nimport { EventEmitter } from '@ts/utils/event-emitter';\n\nexport class LoadoutStore extends EventEmitter {\n    private data: LoadoutData;\n    private isInitialized: boolean = false;\n\n    // ========================================================================\n    // CONSTRUCTOR\n    // ========================================================================\n\n    constructor() {\n        super();\n        // Initialize with empty data - will be populated by initialize()\n        this.data = JSON.parse(JSON.stringify(DEFAULT_LOADOUT_DATA));\n    }\n\n    // ========================================================================\n    // PRIVATE MIGRATION MAP\n    // ========================================================================\n\n    /**\n     * Migration map: legacy hyphenated keys \u2192 uppercase StatKey enum values\n     * Used internally during data loading/migration\n     */\n    private static readonly STAT_KEY_MIGRATION: Record<string, string> = {\n        // Hyphenated \u2192 Uppercase StatKey\n        'crit-rate': 'CRIT_RATE',\n        'crit-damage': 'CRIT_DAMAGE',\n        'stat-damage': 'STAT_DAMAGE',\n        'damage-amp': 'DAMAGE_AMP',\n        'damage': 'DAMAGE',\n        'attack-speed': 'ATTACK_SPEED',\n        'def-pen': 'DEF_PEN',\n        'boss-damage': 'BOSS_DAMAGE',\n        'normal-damage': 'NORMAL_DAMAGE',\n        'skill-coeff': 'SKILL_COEFFICIENT',\n        'skill-mastery': 'MASTERY',\n        'skill-mastery-boss': 'BOSS_MASTERY',\n        'min-damage': 'MIN_DAMAGE',\n        'max-damage': 'MAX_DAMAGE',\n        'primary-main-stat': 'PRIMARY_MAIN_STAT',\n        'main-stat': 'PRIMARY_MAIN_STAT',\n        'secondary-main-stat': 'SECONDARY_MAIN_STAT',\n        'final-damage': 'FINAL_DAMAGE',\n        'main-stat-pct': 'MAIN_STAT_PCT',\n        'skill-level-1st': 'SKILL_LEVEL_1ST',\n        'skill-level-2nd': 'SKILL_LEVEL_2ND',\n        'skill-level-3rd': 'SKILL_LEVEL_3RD',\n        'skill-level-4th': 'SKILL_LEVEL_4TH',\n        'skill-level-all': 'SKILL_LEVEL_ALL',\n        'basic-attack-damage': 'BASIC_ATTACK_DAMAGE',\n        'skill-damage': 'SKILL_DAMAGE',\n        'final-attack': 'FINAL_ATTACK',\n        'defense': 'DEFENSE',\n        'attack': 'ATTACK',\n        'str': 'STR',\n        'dex': 'DEX',\n        'int': 'INT',\n        'luk': 'LUK',\n    };\n\n    /**\n     * Helper: Get uppercase StatKey from camelCase id\n     */\n    private static statKeyFromId(id: string): StatKey | string {\n        for (const [key, stat] of Object.entries(STAT)) {\n            if (stat.id === id) return key as StatKey;\n        }\n        return id;\n    }\n\n    /**\n     * Reverse mapping: camelCase id \u2192 uppercase StatKey\n     * Computed from STAT constant for normalizing all keys to uppercase\n     */\n    private static readonly CAMELCASE_TO_UPPERCASE: Record<string, string> =\n        Object.values(STAT).reduce((acc, stat) => {\n            acc[stat.id] = LoadoutStore.statKeyFromId(stat.id);\n            return acc;\n        }, {} as Record<string, string>);\n\n    // ========================================================================\n    // INITIALIZATION\n    // ========================================================================\n\n    /**\n     * Initialize store - loads from localStorage, handles migration\n     * Call this at the top of loadout-page init\n     *\n     * @returns Promise that resolves when initialization is complete\n     */\n    async initialize(): Promise<void> {\n        if (this.isInitialized) {\n            console.warn('LoadoutStore already initialized');\n            return;\n        }\n\n        // 1. Try loading from new 'loadout-data' key\n        const newData = localStorage.getItem('loadout-data');\n\n        if (newData) {\n            try {\n                this.data = JSON.parse(newData);   \n                this.emit('data:initialized', { data: this.data });             \n            } catch (e) {\n                console.error('LoadoutStore: Failed to parse loadout-data, falling back to migration', e);\n                this.migrateFromLegacy();\n            }\n        } else {\n            // 2. If new key doesn't exist, migrate from old keys\n            this.migrateFromLegacy();\n        }\n\n        // 3. Validate and fill in missing fields with defaults\n        this.validateAndFillDefaults();\n\n        this.isInitialized = true;\n    }\n\n    /**\n     * Migrate data from legacy localStorage keys to new format\n     */\n    private migrateFromLegacy(): void {\n        const legacyDataStr = localStorage.getItem('damageCalculatorData');\n        const selectedClass = localStorage.getItem('selectedClass');\n        const selectedJobTier = localStorage.getItem('selectedJobTier');\n\n        if (!legacyDataStr && !selectedClass && !selectedJobTier) {\n            return;\n        }\n\n        const legacy: Partial<LegacyDamageCalculatorData> = legacyDataStr\n            ? JSON.parse(legacyDataStr)\n            : {};\n\n        // Migrate baseStats\n        if (legacy.baseSetup) {\n            Object.entries(legacy.baseSetup).forEach(([key, value]) => {\n                if(key === 'character-level' && typeof value === 'string')\n                {\n                    this.data.character.level = parseFloat(value);\n                    return;\n                }\n\n                if (typeof value === 'number') {\n                    this.data.baseStats[key] = value;\n                } else if (typeof value === 'string') {\n                    const parsed = parseFloat(value);\n                    if (!isNaN(parsed)) {\n                        this.data.baseStats[key] = parsed;\n                    }\n                }\n            });\n        }\n\n        // Migrate weapons\n        if (legacy.weapons) {\n            Object.entries(legacy.weapons).forEach(([key, weapon]) => {\n                this.data.weapons[key] = {\n                    level: typeof weapon.level === 'number' ? weapon.level : parseInt(weapon.level) || 0,\n                    stars: typeof weapon.stars === 'number' ? weapon.stars : parseInt(weapon.stars) || 0,\n                    equipped: weapon.equipped || false\n                };\n            });\n        }\n\n        // Migrate mastery bonuses\n        if (legacy.masteryBonuses) {\n            const tiers: JobTier[] = [JOB_TIER.THIRD, JOB_TIER.FOURTH];\n            const types: MasteryTypeValue[] = [MASTERY_TYPE.ALL, MASTERY_TYPE.BOSS];\n\n            tiers.forEach(tier => {\n                types.forEach(type => {\n                    const tierData = legacy.masteryBonuses![tier];\n                    if (tierData && tierData[type]) {\n                        this.data.mastery[tier][type] = { ...tierData[type] };\n                    }\n                });\n            });\n        }\n\n        // Migrate target selection\n        if (legacy.contentType) {\n            this.data.target.contentType = legacy.contentType as ContentType;\n        }\n        if (legacy.subcategory) {\n            this.data.target.subcategory = legacy.subcategory;\n        }\n        if (legacy.selectedStage) {\n            this.data.target.selectedStage = legacy.selectedStage;\n        }\n\n        // Migrate character data from separate keys\n        if (selectedClass) {\n            this.data.character.class = selectedClass;\n        }\n        if (selectedJobTier) {\n            this.data.character.jobTier = selectedJobTier as JobTier;\n        }\n\n        // Migrate companions data\n        // First try from separate localStorage keys\n        let companions = localStorage.getItem('companions');\n        let presets = localStorage.getItem('presets');\n        const equippedPresetId = localStorage.getItem('equippedPresetId');\n        const showPresetDpsComparison = localStorage.getItem('showPresetDpsComparison');\n        const lockedMainCompanion = localStorage.getItem('lockedMainCompanion');\n\n        // If companions not found in separate key, check legacy damageCalculatorData\n        if (!companions && legacy && (legacy as any).companions) {\n            companions = JSON.stringify((legacy as any).companions);\n        }\n\n        if (companions) {\n            try {\n                const companionsData = JSON.parse(companions);\n                // Migrate each companion, removing 'equipped' field if present\n                const migratedCompanions: Partial<Record<CompanionKey, CompanionData>> = {};\n                Object.entries(companionsData).forEach(([key, value]: [string, any]) => {\n                    if (value && typeof value === 'object') {\n                        migratedCompanions[key as CompanionKey] = {\n                            unlocked: value.unlocked ?? false,\n                            level: value.level ?? 1\n                            // 'equipped' field is no longer needed\n                        };\n                    }\n                });\n                // Type assertion: migrated data is valid as Record<CompanionKey, CompanionData>\n                // since the validateAndFillDefaults() method will fill in missing keys\n                this.data.companions.companions = migratedCompanions as Record<CompanionKey, CompanionData>;\n            } catch (e) {\n                console.error('Failed to parse companions data', e);\n            }\n        }\n\n        if (presets) {\n            try {\n                this.data.companions.presets = JSON.parse(presets);\n            } catch (e) {\n                console.error('Failed to parse presets data', e);\n            }\n        }\n\n        if (equippedPresetId) {\n            this.data.companions.equippedPresetId = equippedPresetId as CompanionPresetId;\n        }\n\n        if (showPresetDpsComparison) {\n            this.data.companions.showPresetDpsComparison = showPresetDpsComparison === 'true';\n        }\n\n        if (lockedMainCompanion) {\n            try {\n                this.data.companions.lockedMainCompanion = JSON.parse(lockedMainCompanion);\n            } catch (e) {\n                console.error('Failed to parse lockedMainCompanion data', e);\n            }\n        }\n\n        // Migrate equipment data from equipmentSlots and equipped.X keys\n        // equipmentSlots is an array of slot names (e.g., [\"head\", \"cape\", \"chest\"])\n        // Each slot name is used to get equipped.{slotName} which contains EquipmentSlotData\n        const equipmentSlotsData = localStorage.getItem('equipmentSlots');\n        let equipmentSlotIds = [];\n        if (equipmentSlotsData) {\n            try {\n                // Parse equipmentSlots as an object with slot names as keys\n                const slotNamesObj: Record<string, unknown> = JSON.parse(equipmentSlotsData);\n\n                Object.keys(slotNamesObj).forEach((slotName) => {\n                    equipmentSlotIds.push(slotName);\n\n                    // Skip if already migrated\n                    if (this.data.equipment[slotName as EquipmentSlotId]) return;\n\n                    const equippedKey = `equipped.${slotName}`;\n                    const equippedData = localStorage.getItem(equippedKey);\n\n                    if (equippedData) {\n                        try {\n                            // Parse as EquipmentSlotData and add to equipment object\n                            const slotData: EquipmentSlotData = JSON.parse(equippedData);\n                            this.data.equipment[slotName as EquipmentSlotId] = slotData;\n                        } catch (e) {\n                            console.error(`Failed to parse ${equippedKey} data`, e);\n                        }\n                    }\n                });\n            } catch (e) {\n                console.error('Failed to parse equipmentSlots data', e);\n            }\n        }\n\n        // Note: migrateStatKeys() will be called in validateAndFillDefaults() after this method\n        this.saveDualWrite();\n\n        // Clean up old localStorage keys that have been migrated to loadout-data\n        const keysToDelete = [\n            'selectedClass',\n            'selectedJobTier',\n            'lockedMainCompanion',\n            'showPresetDpsComparison',\n            'presets',\n            'companions',\n            'damageCalculatorData', // Old legacy format\n            'equipmentSlots', // Old equipment slots format\n            ...equipmentSlotIds.map(slotId => `equipped.${slotId}`) // Equipment keys\n        ];\n\n        keysToDelete.forEach(key => {\n            localStorage.removeItem(key);\n        });\n    }\n\n    /**\n     * Migrate stat keys from legacy hyphenated/camelCase format to uppercase StatKey\n     * Called during initialization - completely transparent to consumers\n     */\n    private migrateStatKeys(): void {\n        const migratedStats: Record<string, number> = {};\n        let hasMigrations = false;\n\n        // Check each key in baseStats\n        Object.entries(this.data.baseStats).forEach(([key, value]) => {\n            const migratedKey = LoadoutStore.STAT_KEY_MIGRATION[key];\n            if (migratedKey) {\n                // Legacy hyphenated key found - migrate to uppercase StatKey\n                migratedStats[migratedKey] = value;\n                hasMigrations = true;\n            } else {\n                // Already in final format or unmapped - keep as-is\n                migratedStats[key] = value;\n            }\n        });\n\n        if (hasMigrations) {\n            this.data.baseStats = migratedStats as BaseStats;\n        }\n    }\n\n    /**\n     * Validate data structure and fill missing fields with defaults\n     */\n    private validateAndFillDefaults(): void {\n        // Migrate legacy stat keys to uppercase StatKey format (transparent to consumers)\n        this.migrateStatKeys();\n\n        const defaults = DEFAULT_LOADOUT_DATA;\n\n        // Ensure baseStats exists and hydrate ALL fields with defaults\n        // BaseStats uses uppercase StatKey enum keys (ATTACK, DEFENSE, etc.)\n        if (!this.data.baseStats) {\n            this.data.baseStats = {} as BaseStats;\n        }\n\n        const cleanedStats: Record<string, number> = {};\n\n        // For each STAT key (uppercase), get the value or default\n        (Object.keys(STAT) as StatKey[]).forEach(statKey => {\n            const statId = STAT[statKey].id; // camelCase version (e.g., 'attack')\n\n            // Check for value in uppercase key first\n            let value = this.data.baseStats[statKey];\n\n            // If not found, check camelCase id for backward compatibility with buggy migration\n            if (value === undefined) {\n                value = this.data.baseStats[statId as StatKey];\n                // If found in camelCase, delete the old key to ensure clean state\n                if (value !== undefined) {\n                    delete this.data.baseStats[statId as StatKey];\n                }\n            }\n\n            // Use value if found, otherwise use default\n            cleanedStats[statKey] = value ?? DEFAULT_BASE_STATS[statId];\n        });\n\n        this.data.baseStats = cleanedStats as BaseStats;\n\n        // Ensure character fields exist\n        if (!this.data.character) {\n            this.data.character = { ...defaults.character };\n        }\n        if (typeof this.data.character.level !== 'number') {\n            this.data.character.level = defaults.character.level;\n        }\n        if (this.data.character.class === undefined) {\n            this.data.character.class = defaults.character.class;\n        }\n        if (!this.data.character.jobTier || ![JOB_TIER.THIRD, JOB_TIER.FOURTH].includes(this.data.character.jobTier as JobTier)) {\n            this.data.character.jobTier = defaults.character.jobTier;\n        }\n\n        // Ensure weapons exists\n        if (!this.data.weapons) {\n            this.data.weapons = {};\n        }\n\n        // Ensure mastery structure exists\n        if (!this.data.mastery) {\n            this.data.mastery = { ...defaults.mastery };\n        }\n        ([JOB_TIER.THIRD, JOB_TIER.FOURTH] as JobTier[]).forEach(tier => {\n            if (!this.data.mastery[tier]) {\n                this.data.mastery[tier] = { [MASTERY_TYPE.ALL]: {}, [MASTERY_TYPE.BOSS]: {} };\n            }\n            ([MASTERY_TYPE.ALL, MASTERY_TYPE.BOSS] as MasteryTypeValue[]).forEach(type => {\n                if (!this.data.mastery[tier][type]) {\n                    this.data.mastery[tier][type] = {};\n                }\n            });\n        });\n\n        // Ensure target exists\n        if (!this.data.target) {\n            this.data.target = { ...defaults.target };\n        }\n        if (!this.data.target.contentType) {\n            this.data.target.contentType = CONTENT_TYPE.NONE;\n        }\n\n        // Ensure weaponAttackBonus exists\n        if (!this.data.weaponAttackBonus) {\n            this.data.weaponAttackBonus = { ...defaults.weaponAttackBonus };\n        }\n        if (typeof this.data.weaponAttackBonus.totalAttack !== 'number') {\n            this.data.weaponAttackBonus.totalAttack = defaults.weaponAttackBonus.totalAttack;\n        }\n        if (typeof this.data.weaponAttackBonus.equippedAttack !== 'number') {\n            this.data.weaponAttackBonus.equippedAttack = defaults.weaponAttackBonus.equippedAttack;\n        }\n\n        // Ensure companions exists\n        if (!this.data.companions) {\n            this.data.companions = { ...defaults.companions };\n        }\n\n        // Ensure companions.companions exists\n        if (!this.data.companions.companions) {\n            this.data.companions.companions = {} as Record<CompanionKey, CompanionData>;\n        }\n\n        // Ensure companions.presets exists and has all presets\n        if (!this.data.companions.presets) {\n            this.data.companions.presets = { ...defaults.companions.presets };\n        }\n\n        // Validate each preset has correct structure\n        const presetIds: CompanionPresetId[] = [\n            'preset1', 'preset2', 'preset3', 'preset4', 'preset5',\n            'preset6', 'preset7', 'preset8', 'preset9', 'preset10',\n            'preset11', 'preset12', 'preset13', 'preset14', 'preset15',\n            'preset16', 'preset17', 'preset18', 'preset19', 'preset20',\n            'optimal-boss', 'optimal-normal'\n        ];\n        presetIds.forEach(presetId => {\n            const preset = this.data.companions.presets[presetId];\n            if (!preset) {\n                this.data.companions.presets[presetId] = { ...defaults.companions.presets[presetId] };\n            } else {\n                // Ensure preset has main and subs\n                if (!preset.main) {\n                    preset.main = null;\n                }\n                if (!preset.subs || preset.subs.length !== 6) {\n                    preset.subs = [null, null, null, null, null, null];\n                }\n\n                // IMPORTANT: Always reset optimal presets to empty\n                // They are calculated dynamically on every render, not stored\n                if (presetId === 'optimal-boss' || presetId === 'optimal-normal') {\n                    this.data.companions.presets[presetId] = {\n                        main: null,\n                        subs: [null, null, null, null, null, null]\n                    };\n                }\n            }\n        });\n\n        // Ensure companions.equippedPresetId is valid\n        if (!this.data.companions.equippedPresetId || !presetIds.includes(this.data.companions.equippedPresetId)) {\n            this.data.companions.equippedPresetId = defaults.companions.equippedPresetId;\n        }\n\n        // Ensure companions.showPresetDpsComparison is boolean\n        if (typeof this.data.companions.showPresetDpsComparison !== 'boolean') {\n            this.data.companions.showPresetDpsComparison = defaults.companions.showPresetDpsComparison;\n        }\n\n        // Ensure companions.lockedMainCompanion exists\n        if (!this.data.companions.lockedMainCompanion) {\n            this.data.companions.lockedMainCompanion = { ...defaults.companions.lockedMainCompanion };\n        }\n\n        // Ensure equipment exists\n        if (!this.data.equipment) {\n            this.data.equipment = { ...defaults.equipment };\n        }\n\n        // Ensure each equipment slot exists\n        const equipmentSlots: EquipmentSlotId[] = [\n            'head', 'cape', 'chest', 'shoulders', 'legs', 'belt',\n            'gloves', 'boots', 'ring', 'neck', 'eye-accessory'\n        ];\n\n        // Recovery migration: if all equipment slots are null and old equipmentSlots exists in localStorage,\n        // migrate the old data to recover it\n        const allSlotsNull = equipmentSlots.every(slotId => this.data.equipment[slotId] === null);\n        if (allSlotsNull) {\n            const equipmentSlotsData = localStorage.getItem('equipmentSlots');\n            if (equipmentSlotsData) {\n                try {\n                    const legacySlots: Record<string, { attack: number; mainStat: number; damageAmp: number }> = JSON.parse(equipmentSlotsData);\n                    let migratedCount = 0;\n\n                    equipmentSlots.forEach(slotId => {\n                        const legacyData = legacySlots[slotId];\n                        if (legacyData) {\n                            // Convert legacy format to new EquipmentSlotData format\n                            const statLines: StatLine[] = [];\n                            if (legacyData.damageAmp > 0) {\n                                statLines.push({ type: STAT.DAMAGE_AMP.id, value: legacyData.damageAmp });\n                            }\n\n                            this.data.equipment[slotId] = {\n                                name: '',\n                                attack: legacyData.attack,\n                                mainStat: legacyData.mainStat,\n                                statLines\n                            };\n                            migratedCount++;\n                        }\n                    });\n\n                    if (migratedCount > 0) {\n                        // Clean up the old key after successful recovery\n                        localStorage.removeItem('equipmentSlots');\n                        this.saveDualWrite();\n                    }\n                } catch (e) {\n                    console.error('Failed to recover equipmentSlots data', e);\n                }\n            }\n        }\n\n        equipmentSlots.forEach(slotId => {\n            if (this.data.equipment[slotId] === undefined) {\n                this.data.equipment[slotId] = null;\n            }\n        });\n    }\n\n    // ========================================================================\n    // GETTERS - Return pre-hydrated data with safe defaults\n    // ========================================================================\n\n    /**\n     * Get all base stats as key-value object\n     * @returns All base stats with type safety\n     */\n    getBaseStats(): BaseStats {\n        return { ...this.data.baseStats };\n    }\n\n    /**\n     * Get a single base stat value\n     * @param key - Stat key (e.g., \"attack\", \"crit-rate\")\n     * @returns Stat value (0 if not set)\n     */\n    getBaseStat(key: string): number {\n        return this.data.baseStats[key] ?? 0;\n    }\n\n    /**\n     * Get all weapons data\n     * @returns Weapons object indexed by rarity-tier key\n     */\n    getWeapons(): LoadoutData['weapons'] {\n        return { ...this.data.weapons };\n    }\n\n    /**\n     * Get single weapon data\n     * @param key - Weapon key (e.g., \"legendary-t4\")\n     * @returns Weapon data or null if not found\n     */\n    getWeapon(key: string): LoadoutData['weapons'][string] | null {\n        return this.data.weapons[key] ? { ...this.data.weapons[key] } : null;\n    }\n\n    /**\n     * Get mastery bonuses\n     * @returns Complete mastery bonus object\n     */\n    getMastery(): LoadoutData['mastery'] {\n        return JSON.parse(JSON.stringify(this.data.mastery));\n    }\n\n    /**\n     * Get specific mastery checkbox state\n     * @param tier - Mastery tier ('3rd' or '4th')\n     * @param type - Mastery type ('all' or 'boss')\n     * @param level - Mastery level (e.g., '64', '124')\n     * @returns Checkbox state (false if not set)\n     */\n    getMasteryCheckbox(tier: MasteryTier, type: MasteryType, level: string): boolean {\n        return this.data.mastery[tier][type][level] ?? false;\n    }\n\n    /**\n     * Get target selection\n     * @returns Target selection object\n     */\n    getTarget(): LoadoutData['target'] {\n        return { ...this.data.target };\n    }\n\n    /**\n     * Get character metadata\n     * @returns Character metadata object\n     */\n    getCharacter(): LoadoutData['character'] {\n        return { ...this.data.character };\n    }\n\n    /**\n     * Get selected class\n     * @returns Selected class name or null\n     */\n    getSelectedClass(): string | null {\n        return this.data.character.class;\n    }\n\n    /**\n     * Get selected job tier\n     * @returns Job tier ('3rd' or '4th')\n     */\n    getSelectedJobTier(): MasteryTier {\n        return this.data.character.jobTier;\n    }\n\n    /**\n     * Get character level\n     * @returns Character level\n     */\n    getCharacterLevel(): number {\n        return this.data.character.level;\n    }\n\n    /**\n     * Get weapon attack bonus\n     * @returns Weapon attack bonus object with totalAttack and equippedAttack\n     */\n    getWeaponAttackBonus(): LoadoutData['weaponAttackBonus'] {\n        return { ...this.data.weaponAttackBonus };\n    }\n\n    /**\n     * Get entire loadout data (for export/debugging)\n     * @returns Deep clone of loadout data\n     */\n    getAllData(): LoadoutData {\n        return JSON.parse(JSON.stringify(this.data));\n    }\n\n    // ========================================================================\n    // COMPANION GETTERS\n    // ========================================================================\n\n    /**\n     * Get all companion state\n     * @returns Complete companion state\n     */\n    getCompanions(): CompanionState {\n        return { ...this.data.companions };\n    }\n\n    /**\n     * Get a single companion's data\n     * @param companionKey - Companion key (e.g., 'Hero-Legendary')\n     * @returns Companion data (returns default locked state if not found)\n     */\n    getCompanion(companionKey: CompanionKey): CompanionData {\n        if (!this.data.companions.companions[companionKey]) {\n            // Return default locked state for uninitialized companions\n            return { unlocked: false, level: 1 };\n        }\n        return { ...this.data.companions.companions[companionKey] };\n    }\n\n    /**\n     * Get all presets\n     * @returns All presets\n     */\n    getPresets(): Record<CompanionPresetId, CompanionPreset> {\n        return JSON.parse(JSON.stringify(this.data.companions.presets));\n    }\n\n    /**\n     * Get a single preset\n     * @param presetId - Preset ID\n     * @returns Preset data\n     */\n    getPreset(presetId: CompanionPresetId): CompanionPreset {\n        return JSON.parse(JSON.stringify(this.data.companions.presets[presetId]));\n    }\n\n    /**\n     * Get equipped preset ID\n     * @returns Currently equipped preset ID\n     */\n    getEquippedPresetId(): CompanionPresetId {\n        return this.data.companions.equippedPresetId;\n    }\n\n    /**\n     * Get show preset DPS comparison setting\n     * @returns Whether to show DPS comparison\n     */\n    getShowPresetDpsComparison(): boolean {\n        return this.data.companions.showPresetDpsComparison;\n    }\n\n    /**\n     * Get locked main companion for optimal presets\n     * @param optimalType - 'optimal-boss' or 'optimal-normal'\n     * @returns Locked companion key or null\n     */\n    getLockedMainCompanion(optimalType: 'optimal-boss' | 'optimal-normal'): CompanionKey | null {\n        return this.data.companions.lockedMainCompanion[optimalType];\n    }\n\n    // ========================================================================\n    // SETTERS - Partial updates with immediate save\n    // ========================================================================\n\n    /**\n     * Update multiple base stats at once\n     * @param updates - Object mapping stat keys (hyphenated, camelCase, or uppercase) to values\n     */\n    updateBaseStats(updates: Record<string, number>): void {\n        const normalizedUpdates: Record<string, number> = {};\n        Object.entries(updates).forEach(([key, value]) => {\n            let normalizedKey = key;\n\n            // First, migrate hyphenated to camelCase\n            const hyphenatedMigrated = LoadoutStore.STAT_KEY_MIGRATION[key];\n            if (hyphenatedMigrated) {\n                normalizedKey = hyphenatedMigrated;\n            }\n\n            // Then, convert camelCase to uppercase\n            const uppercased = LoadoutStore.CAMELCASE_TO_UPPERCASE[normalizedKey];\n            if (uppercased) {\n                normalizedKey = uppercased;\n            }\n\n            normalizedUpdates[normalizedKey] = value;\n        });\n        Object.assign(this.data.baseStats, normalizedUpdates);\n        this.saveDualWrite();\n\n        // Emit stat changed event\n        this.emit('stat:changed', { updates: normalizedUpdates });\n    }\n\n    /**\n     * Update single base stat\n     * @param key - Stat key (accepts hyphenated, camelCase, or uppercase)\n     * @param value - New value\n     */\n    updateBaseStat(key: StatKey | string, value: number): void {\n        // Normalize key to uppercase StatKey format\n        let normalizedKey = key;\n\n        // First, migrate hyphenated to camelCase\n        const hyphenatedMigrated = LoadoutStore.STAT_KEY_MIGRATION[key];\n        if (hyphenatedMigrated) {\n            normalizedKey = hyphenatedMigrated;\n        }\n\n        // Then, convert camelCase to uppercase\n        const uppercased = LoadoutStore.CAMELCASE_TO_UPPERCASE[normalizedKey];\n        if (uppercased) {\n            normalizedKey = uppercased;\n        }\n\n        this.data.baseStats[normalizedKey] = value;\n        this.saveDualWrite();\n\n        // Emit stat changed event\n        this.emit('stat:changed', { key: normalizedKey, value });\n\n        // Emit skill coefficient trigger events for skill level changes\n        if (normalizedKey === 'SKILL_LEVEL_3RD' ||\n            normalizedKey === 'SKILL_LEVEL_4TH' ||\n            normalizedKey === 'SKILL_LEVEL_ALL') {\n            this.emit('skill:level:changed', {\n                statKey: normalizedKey,\n                value\n            });\n        }\n    }\n\n    /**\n     * Update weapon data\n     * @param key - Weapon key (e.g., \"legendary-t4\")\n     * @param data - Partial weapon data to update\n     */\n    updateWeapon(key: string, data: Partial<LoadoutData['weapons'][string]>): void {\n        if (!this.data.weapons[key]) {\n            this.data.weapons[key] = { level: 0, stars: 0, equipped: false };\n        }\n        this.data.weapons[key] = { ...this.data.weapons[key], ...data };\n        this.saveDualWrite();\n    }\n\n    /**\n     * Update mastery checkbox state\n     * @param tier - Mastery tier ('3rd' or '4th')\n     * @param type - Mastery type ('all' or 'boss')\n     * @param level - Mastery level (e.g., '64', '124')\n     * @param checked - Checkbox state\n     */\n    updateMasteryCheckbox(\n        tier: MasteryTier,\n        type: MasteryType,\n        level: string,\n        checked: boolean\n    ): void {\n        this.data.mastery[tier][type][level] = checked;\n        this.saveDualWrite();\n    }\n\n    /**\n     * Update target selection\n     * @param data - Partial target data\n     */\n    updateTarget(data: Partial<LoadoutData['target']>): void {\n        Object.assign(this.data.target, data);\n        this.saveDualWrite();\n    }\n\n    /**\n     * Update equipment data for a specific slot\n     * @param slotId - Equipment slot ID\n     * @param data - Equipment slot data\n     */\n    updateEquipment(slotId: EquipmentSlotId, data: EquipmentSlotData): void {\n        this.data.equipment[slotId] = data;\n        this.emit(`equipment-updated`, { slotId, data});\n        this.saveDualWrite();\n    }\n\n    /**\n     * Get all equipment data\n     */\n    getEquipmentData(): LoadoutData['equipment'] {\n        return this.data.equipment;\n    }\n\n    /**\n     * Set selected class\n     * @param className - Class name or null\n     */\n    setSelectedClass(className: string | null): void {\n        this.data.character.class = className;\n        this.saveDualWrite();\n    }\n\n    /**\n     * Set selected job tier\n     * @param jobTier - Job tier ('3rd' or '4th')\n     */\n    setSelectedJobTier(jobTier: MasteryTier): void {\n        const oldTier = this.data.character.jobTier;\n        this.data.character.jobTier = jobTier;\n        this.saveDualWrite();\n\n        // Emit job tier changed event if it actually changed\n        if (oldTier !== jobTier) {\n            this.emit('character:jobtier:changed', { oldTier, newTier: jobTier });\n        }\n    }\n\n    /**\n     * Set character level\n     * @param level - Character level\n     */\n    setCharacterLevel(level: number): void {\n        this.data.character.level = level;\n        this.saveDualWrite();\n\n        // Emit character level changed event\n        this.emit('character:level:changed', { level });\n    }\n\n    /**\n     * Update weapon attack bonus\n     * @param data - Partial weapon attack bonus data\n     */\n    updateWeaponAttackBonus(data: Partial<LoadoutData['weaponAttackBonus']>): void {\n        Object.assign(this.data.weaponAttackBonus, data);\n        this.saveDualWrite();\n    }\n\n    // ========================================================================\n    // COMPANION SETTERS\n    // ========================================================================\n\n    /**\n     * Update companion data\n     * @param companionKey - Companion key\n     * @param data - Partial companion data to update\n     */\n    updateCompanion(companionKey: CompanionKey, data: Partial<CompanionData>): void {\n        if (!this.data.companions.companions[companionKey]) {\n            this.data.companions.companions[companionKey] = { unlocked: false, level: 1 };\n        }\n        this.data.companions.companions[companionKey] = {\n            ...this.data.companions.companions[companionKey],\n            ...data\n        };\n        this.saveDualWrite();\n    }\n\n    /**\n     * Set a preset slot\n     * @param presetId - Preset ID\n     * @param slotType - 'main' or 'sub'\n     * @param slotIndex - Slot index (0 for main, 0-5 for subs)\n     * @param companionKey - Companion key or null to clear\n     */\n    setPresetSlot(\n        presetId: CompanionPresetId,\n        slotType: 'main' | 'sub',\n        slotIndex: number,\n        companionKey: CompanionKey | null\n    ): void {\n        // Optimal presets are calculated dynamically, never saved\n        if (presetId === 'optimal-boss' || presetId === 'optimal-normal') {\n            console.warn(`[LoadoutStore] Cannot modify optimal preset ${presetId} - it is calculated dynamically`);\n            return;\n        }\n\n        const preset = this.data.companions.presets[presetId];\n        if (!preset) return;\n\n        if (slotType === 'main') {\n            preset.main = companionKey;\n        } else {\n            preset.subs[slotIndex] = companionKey;\n        }\n        this.saveDualWrite();\n    }\n\n    /**\n     * Clear a preset slot\n     * @param presetId - Preset ID\n     * @param slotType - 'main' or 'sub'\n     * @param slotIndex - Slot index (0 for main, 0-5 for subs)\n     */\n    clearPresetSlot(\n        presetId: CompanionPresetId,\n        slotType: 'main' | 'sub',\n        slotIndex: number\n    ): void {\n        // Optimal presets are calculated dynamically, never saved\n        if (presetId === 'optimal-boss' || presetId === 'optimal-normal') {\n            console.warn(`[LoadoutStore] Cannot clear optimal preset ${presetId} - it is calculated dynamically`);\n            return;\n        }\n        this.setPresetSlot(presetId, slotType, slotIndex, null);\n    }\n\n    /**\n     * Set equipped preset ID\n     * @param presetId - Preset ID to equip\n     */\n    setEquippedPresetId(presetId: CompanionPresetId): void {\n        this.data.companions.equippedPresetId = presetId;\n        this.saveDualWrite();\n    }\n\n    /**\n     * Set show preset DPS comparison\n     * @param show - Whether to show DPS comparison\n     */\n    setShowPresetDpsComparison(show: boolean): void {\n        this.data.companions.showPresetDpsComparison = show;\n        this.saveDualWrite();\n    }\n\n    /**\n     * Set locked main companion for optimal presets\n     * @param optimalType - 'optimal-boss' or 'optimal-normal'\n     * @param companionKey - Companion key or null to clear\n     */\n    setLockedMainCompanion(\n        optimalType: 'optimal-boss' | 'optimal-normal',\n        companionKey: CompanionKey | null\n    ): void {\n        this.data.companions.lockedMainCompanion[optimalType] = companionKey;\n        this.saveDualWrite();\n    }\n\n    // ========================================================================\n    // PERSISTENCE\n    // ========================================================================\n\n    /**\n     * Save to localStorage\n     * Note: Only writes to 'loadout-data' key. Legacy dual-write has been removed.\n     */\n    private saveDualWrite(): void {\n        // Write to new 'loadout-data' key only\n        localStorage.setItem('loadout-data', JSON.stringify(this.data));\n    }\n\n    /**\n     * Convert new LoadoutData to legacy damageCalculatorData format\n     * Used for dual-write backward compatibility\n     */\n    private convertToLegacyFormat(): LegacyDamageCalculatorData {\n        // Reverse map: uppercase \u2192 hyphenated for legacy export\n        const reverseMigration: Record<string, string> = {};\n        Object.entries(LoadoutStore.STAT_KEY_MIGRATION).forEach(([hyphenated, upper]) => {\n            reverseMigration[upper] = hyphenated;\n        });\n\n        // Convert baseStats from uppercase to hyphenated\n        const baseSetup: Record<string, number> = {};\n        Object.entries(this.data.baseStats).forEach(([key, value]) => {\n            const legacyKey = reverseMigration[key] ?? key;\n            baseSetup[legacyKey] = value;\n        });\n\n        const legacy: LegacyDamageCalculatorData = {\n            baseSetup,\n            weapons: {},\n            masteryBonuses: {\n                [JOB_TIER.THIRD]: {\n                    [MASTERY_TYPE.ALL]: { ...this.data.mastery[JOB_TIER.THIRD][MASTERY_TYPE.ALL] },\n                    [MASTERY_TYPE.BOSS]: { ...this.data.mastery[JOB_TIER.THIRD][MASTERY_TYPE.BOSS] }\n                },\n                [JOB_TIER.FOURTH]: {\n                    [MASTERY_TYPE.ALL]: { ...this.data.mastery[JOB_TIER.FOURTH][MASTERY_TYPE.ALL] },\n                    [MASTERY_TYPE.BOSS]: { ...this.data.mastery[JOB_TIER.FOURTH][MASTERY_TYPE.BOSS] }\n                }\n            },\n            contentType: this.data.target.contentType === CONTENT_TYPE.NONE ? undefined : this.data.target.contentType,\n            subcategory: this.data.target.subcategory ?? undefined,\n            selectedStage: this.data.target.selectedStage ?? undefined\n        };\n\n        // Convert weapons to legacy format\n        Object.entries(this.data.weapons).forEach(([key, weapon]) => {\n            legacy.weapons![key] = {\n                level: weapon.level,\n                stars: weapon.stars,\n                equipped: weapon.equipped\n            };\n        });\n\n        return legacy;\n    }\n\n    // ========================================================================\n    // TESTING/DEBUGGING HELPERS\n    // ========================================================================\n\n    /**\n     * Reset store to defaults (for testing)\n     */\n    reset(): void {\n        this.data = JSON.parse(JSON.stringify(DEFAULT_LOADOUT_DATA));\n        this.saveDualWrite();\n    }\n\n    /**\n     * Check if store is initialized\n     */\n    isReady(): boolean {\n        return this.isInitialized;\n    }\n}\n\n// ========================================================================\n// SINGLETON EXPORT\n// ========================================================================\n\nexport const loadoutStore = new LoadoutStore();\n"],
  "mappings": "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",
  "names": []
}
