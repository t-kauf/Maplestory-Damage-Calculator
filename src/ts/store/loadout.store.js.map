{
  "version": 3,
  "sources": ["loadout.store.ts"],
  "sourcesContent": ["/**\r\n * Centralized store for loadout data\r\n * Handles loading, saving, and migrating loadout configuration\r\n *\r\n * DATA FLOW:\r\n * 1. User changes DOM input\r\n * 2. Event listener fires UI handler\r\n * 3. UI handler calls loadoutStore.updateX()\r\n * 4. Store updates memory + saves to localStorage (dual-write)\r\n */\r\n\r\nimport type {\r\n    LoadoutData,\r\n    MasteryTier,\r\n    MasteryType,\r\n    LegacyDamageCalculatorData,\r\n    BaseStats\r\n} from '@ts/types/loadout';\r\nimport { DEFAULT_LOADOUT_DATA } from '@ts/types/loadout';\r\nimport { CONTENT_TYPE, JOB_TIER, MASTERY_TYPE, DEFAULT_BASE_STATS, STAT, type ContentType, type JobTier, type MasteryTypeValue, type StatKey } from '@ts/types/constants';\r\nimport type { CompanionKey, CompanionPresetId, CompanionPreset, CompanionData, CompanionState } from '@ts/types/page/companions/companions.types';\r\nimport type { EquipmentSlotId, EquipmentSlotData, StatLine } from '@ts/types/page/equipment/equipment.types';\r\n\r\nexport class LoadoutStore {\r\n    private data: LoadoutData;\r\n    private isInitialized: boolean = false;\r\n\r\n    // ========================================================================\r\n    // CONSTRUCTOR\r\n    // ========================================================================\r\n\r\n    constructor() {\r\n        // Initialize with empty data - will be populated by initialize()\r\n        this.data = JSON.parse(JSON.stringify(DEFAULT_LOADOUT_DATA));\r\n    }\r\n\r\n    // ========================================================================\r\n    // PRIVATE MIGRATION MAP\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Migration map: legacy hyphenated keys \u2192 uppercase StatKey enum values\r\n     * Used internally during data loading/migration\r\n     */\r\n    private static readonly STAT_KEY_MIGRATION: Record<string, string> = {\r\n        // Hyphenated \u2192 Uppercase StatKey\r\n        'crit-rate': 'CRIT_RATE',\r\n        'crit-damage': 'CRIT_DAMAGE',\r\n        'stat-damage': 'STAT_DAMAGE',\r\n        'damage-amp': 'DAMAGE_AMP',\r\n        'damage': 'DAMAGE',\r\n        'attack-speed': 'ATTACK_SPEED',\r\n        'def-pen': 'DEF_PEN',\r\n        'boss-damage': 'BOSS_DAMAGE',\r\n        'normal-damage': 'NORMAL_DAMAGE',\r\n        'skill-coeff': 'SKILL_COEFFICIENT',\r\n        'skill-mastery': 'MASTERY',\r\n        'skill-mastery-boss': 'BOSS_MASTERY',\r\n        'min-damage': 'MIN_DAMAGE',\r\n        'max-damage': 'MAX_DAMAGE',\r\n        'primary-main-stat': 'PRIMARY_MAIN_STAT',\r\n        'secondary-main-stat': 'SECONDARY_MAIN_STAT',\r\n        'final-damage': 'FINAL_DAMAGE',\r\n        'main-stat-pct': 'MAIN_STAT_PCT',\r\n        'skill-level-1st': 'SKILL_LEVEL_1ST',\r\n        'skill-level-2nd': 'SKILL_LEVEL_2ND',\r\n        'skill-level-3rd': 'SKILL_LEVEL_3RD',\r\n        'skill-level-4th': 'SKILL_LEVEL_4TH',\r\n        'basic-attack-damage': 'BASIC_ATTACK_DAMAGE',\r\n        'skill-damage': 'SKILL_DAMAGE',\r\n        'final-attack': 'FINAL_ATTACK',\r\n        'defense': 'DEFENSE',\r\n        'attack': 'ATTACK',\r\n        'str': 'STR',\r\n        'dex': 'DEX',\r\n        'int': 'INT',\r\n        'luk': 'LUK',\r\n    };\r\n\r\n    /**\r\n     * Helper: Get uppercase StatKey from camelCase id\r\n     */\r\n    private static statKeyFromId(id: string): StatKey | string {\r\n        for (const [key, stat] of Object.entries(STAT)) {\r\n            if (stat.id === id) return key as StatKey;\r\n        }\r\n        return id;\r\n    }\r\n\r\n    /**\r\n     * Reverse mapping: camelCase id \u2192 uppercase StatKey\r\n     * Computed from STAT constant for normalizing all keys to uppercase\r\n     */\r\n    private static readonly CAMELCASE_TO_UPPERCASE: Record<string, string> =\r\n        Object.values(STAT).reduce((acc, stat) => {\r\n            acc[stat.id] = LoadoutStore.statKeyFromId(stat.id);\r\n            return acc;\r\n        }, {} as Record<string, string>);\r\n\r\n    // ========================================================================\r\n    // INITIALIZATION\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Initialize store - loads from localStorage, handles migration\r\n     * Call this at the top of loadout-page init\r\n     *\r\n     * @returns Promise that resolves when initialization is complete\r\n     */\r\n    async initialize(): Promise<void> {\r\n        if (this.isInitialized) {\r\n            console.warn('LoadoutStore already initialized');\r\n            return;\r\n        }\r\n\r\n        // 1. Try loading from new 'loadout-data' key\r\n        const newData = localStorage.getItem('loadout-data');\r\n\r\n        if (newData) {\r\n            try {\r\n                this.data = JSON.parse(newData);\r\n                console.log('LoadoutStore: Loaded from new format (loadout-data)');\r\n            } catch (e) {\r\n                console.error('LoadoutStore: Failed to parse loadout-data, falling back to migration', e);\r\n                this.migrateFromLegacy();\r\n            }\r\n        } else {\r\n            // 2. If new key doesn't exist, migrate from old keys\r\n            this.migrateFromLegacy();\r\n        }\r\n\r\n        // 3. Validate and fill in missing fields with defaults\r\n        this.validateAndFillDefaults();\r\n\r\n        this.isInitialized = true;\r\n        console.log('LoadoutStore: Initialization complete', this.data);\r\n    }\r\n\r\n    /**\r\n     * Migrate data from legacy localStorage keys to new format\r\n     */\r\n    private migrateFromLegacy(): void {\r\n        console.log('LoadoutStore: Migrating from legacy format...');\r\n\r\n        const legacyDataStr = localStorage.getItem('damageCalculatorData');\r\n        const selectedClass = localStorage.getItem('selectedClass');\r\n        const selectedJobTier = localStorage.getItem('selectedJobTier');\r\n\r\n        if (!legacyDataStr && !selectedClass && !selectedJobTier) {\r\n            console.log('LoadoutStore: No legacy data found, using defaults');\r\n            return;\r\n        }\r\n\r\n        const legacy: Partial<LegacyDamageCalculatorData> = legacyDataStr\r\n            ? JSON.parse(legacyDataStr)\r\n            : {};\r\n\r\n        // Migrate baseStats\r\n        if (legacy.baseSetup) {\r\n            Object.entries(legacy.baseSetup).forEach(([key, value]) => {\r\n                if(key === 'character-level' && typeof value === 'string')\r\n                {\r\n                    this.data.character.level = parseFloat(value);\r\n                    return;\r\n                }\r\n\r\n                if (typeof value === 'number') {\r\n                    this.data.baseStats[key] = value;\r\n                } else if (typeof value === 'string') {\r\n                    const parsed = parseFloat(value);\r\n                    if (!isNaN(parsed)) {\r\n                        this.data.baseStats[key] = parsed;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        // Migrate weapons\r\n        if (legacy.weapons) {\r\n            Object.entries(legacy.weapons).forEach(([key, weapon]) => {\r\n                this.data.weapons[key] = {\r\n                    level: typeof weapon.level === 'number' ? weapon.level : parseInt(weapon.level) || 0,\r\n                    stars: typeof weapon.stars === 'number' ? weapon.stars : parseInt(weapon.stars) || 0,\r\n                    equipped: weapon.equipped || false\r\n                };\r\n            });\r\n        }\r\n\r\n        // Migrate mastery bonuses\r\n        if (legacy.masteryBonuses) {\r\n            const tiers: JobTier[] = [JOB_TIER.THIRD, JOB_TIER.FOURTH];\r\n            const types: MasteryTypeValue[] = [MASTERY_TYPE.ALL, MASTERY_TYPE.BOSS];\r\n\r\n            tiers.forEach(tier => {\r\n                types.forEach(type => {\r\n                    const tierData = legacy.masteryBonuses![tier];\r\n                    if (tierData && tierData[type]) {\r\n                        this.data.mastery[tier][type] = { ...tierData[type] };\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        // Migrate target selection\r\n        if (legacy.contentType) {\r\n            this.data.target.contentType = legacy.contentType as ContentType;\r\n        }\r\n        if (legacy.subcategory) {\r\n            this.data.target.subcategory = legacy.subcategory;\r\n        }\r\n        if (legacy.selectedStage) {\r\n            this.data.target.selectedStage = legacy.selectedStage;\r\n        }\r\n\r\n        // Migrate character data from separate keys\r\n        if (selectedClass) {\r\n            this.data.character.class = selectedClass;\r\n        }\r\n        if (selectedJobTier) {\r\n            this.data.character.jobTier = selectedJobTier as JobTier;\r\n        }\r\n\r\n        // Migrate companions data\r\n        // First try from separate localStorage keys\r\n        let companions = localStorage.getItem('companions');\r\n        let presets = localStorage.getItem('presets');\r\n        const equippedPresetId = localStorage.getItem('equippedPresetId');\r\n        const showPresetDpsComparison = localStorage.getItem('showPresetDpsComparison');\r\n        const lockedMainCompanion = localStorage.getItem('lockedMainCompanion');\r\n\r\n        // If companions not found in separate key, check legacy damageCalculatorData\r\n        if (!companions && legacy && (legacy as any).companions) {\r\n            companions = JSON.stringify((legacy as any).companions);\r\n        }\r\n\r\n        if (companions) {\r\n            try {\r\n                const companionsData = JSON.parse(companions);\r\n                // Migrate each companion, removing 'equipped' field if present\r\n                const migratedCompanions: Partial<Record<CompanionKey, CompanionData>> = {};\r\n                Object.entries(companionsData).forEach(([key, value]: [string, any]) => {\r\n                    if (value && typeof value === 'object') {\r\n                        migratedCompanions[key as CompanionKey] = {\r\n                            unlocked: value.unlocked ?? false,\r\n                            level: value.level ?? 1\r\n                            // 'equipped' field is no longer needed\r\n                        };\r\n                    }\r\n                });\r\n                // Type assertion: migrated data is valid as Record<CompanionKey, CompanionData>\r\n                // since the validateAndFillDefaults() method will fill in missing keys\r\n                this.data.companions.companions = migratedCompanions as Record<CompanionKey, CompanionData>;\r\n            } catch (e) {\r\n                console.error('Failed to parse companions data', e);\r\n            }\r\n        }\r\n\r\n        if (presets) {\r\n            try {\r\n                this.data.companions.presets = JSON.parse(presets);\r\n            } catch (e) {\r\n                console.error('Failed to parse presets data', e);\r\n            }\r\n        }\r\n\r\n        if (equippedPresetId) {\r\n            this.data.companions.equippedPresetId = equippedPresetId as CompanionPresetId;\r\n        }\r\n\r\n        if (showPresetDpsComparison) {\r\n            this.data.companions.showPresetDpsComparison = showPresetDpsComparison === 'true';\r\n        }\r\n\r\n        if (lockedMainCompanion) {\r\n            try {\r\n                this.data.companions.lockedMainCompanion = JSON.parse(lockedMainCompanion);\r\n            } catch (e) {\r\n                console.error('Failed to parse lockedMainCompanion data', e);\r\n            }\r\n        }\r\n\r\n        // Migrate equipment data from equipmentSlots and equipped.X keys\r\n        // equipmentSlots is an array of slot names (e.g., [\"head\", \"cape\", \"chest\"])\r\n        // Each slot name is used to get equipped.{slotName} which contains EquipmentSlotData\r\n        const equipmentSlotsData = localStorage.getItem('equipmentSlots');\r\n        let equipmentSlotIds = [];\r\n        if (equipmentSlotsData) {\r\n            try {\r\n                // Parse equipmentSlots as an object with slot names as keys\r\n                const slotNamesObj: Record<string, unknown> = JSON.parse(equipmentSlotsData);\r\n\r\n                Object.keys(slotNamesObj).forEach((slotName) => {\r\n                    equipmentSlotIds.push(slotName);\r\n\r\n                    // Skip if already migrated\r\n                    if (this.data.equipment[slotName as EquipmentSlotId]) return;\r\n\r\n                    const equippedKey = `equipped.${slotName}`;\r\n                    const equippedData = localStorage.getItem(equippedKey);\r\n\r\n                    if (equippedData) {\r\n                        try {\r\n                            // Parse as EquipmentSlotData and add to equipment object\r\n                            const slotData: EquipmentSlotData = JSON.parse(equippedData);\r\n                            this.data.equipment[slotName as EquipmentSlotId] = slotData;\r\n                            console.log(`LoadoutStore: Migrated ${equippedKey} to loadout-data.equipment.${slotName}`);\r\n                        } catch (e) {\r\n                            console.error(`Failed to parse ${equippedKey} data`, e);\r\n                        }\r\n                    }\r\n                });\r\n                console.log('LoadoutStore: Migrated equipment data from equipmentSlots');\r\n            } catch (e) {\r\n                console.error('Failed to parse equipmentSlots data', e);\r\n            }\r\n        }\r\n\r\n        // Note: migrateStatKeys() will be called in validateAndFillDefaults() after this method\r\n        console.log('LoadoutStore: Migration complete, saving to new format...');\r\n        this.saveDualWrite();\r\n\r\n        // Clean up old localStorage keys that have been migrated to loadout-data\r\n        console.log('LoadoutStore: Cleaning up old localStorage keys...');\r\n        const keysToDelete = [\r\n            'selectedClass',\r\n            'selectedJobTier',\r\n            'lockedMainCompanion',\r\n            'showPresetDpsComparison',\r\n            'presets',\r\n            'companions',\r\n            'damageCalculatorData', // Old legacy format\r\n            'equipmentSlots', // Old equipment slots format\r\n            ...equipmentSlotIds.map(slotId => `equipped.${slotId}`) // Equipment keys\r\n        ];\r\n\r\n        keysToDelete.forEach(key => {\r\n            localStorage.removeItem(key);\r\n        });\r\n        console.log(`LoadoutStore: Deleted ${keysToDelete.length} old localStorage keys`);\r\n    }\r\n\r\n    /**\r\n     * Migrate stat keys from legacy hyphenated/camelCase format to uppercase StatKey\r\n     * Called during initialization - completely transparent to consumers\r\n     */\r\n    private migrateStatKeys(): void {\r\n        const migratedStats: Record<string, number> = {};\r\n        let hasMigrations = false;\r\n\r\n        // Check each key in baseStats\r\n        Object.entries(this.data.baseStats).forEach(([key, value]) => {\r\n            const migratedKey = LoadoutStore.STAT_KEY_MIGRATION[key];\r\n            if (migratedKey) {\r\n                // Legacy hyphenated key found - migrate to uppercase StatKey\r\n                migratedStats[migratedKey] = value;\r\n                hasMigrations = true;\r\n            } else {\r\n                // Already in final format or unmapped - keep as-is\r\n                migratedStats[key] = value;\r\n            }\r\n        });\r\n\r\n        if (hasMigrations) {\r\n            this.data.baseStats = migratedStats as BaseStats;\r\n            console.log('LoadoutStore: Migrated stat keys to uppercase StatKey format');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Validate data structure and fill missing fields with defaults\r\n     */\r\n    private validateAndFillDefaults(): void {\r\n        // Migrate legacy stat keys to uppercase StatKey format (transparent to consumers)\r\n        this.migrateStatKeys();\r\n\r\n        const defaults = DEFAULT_LOADOUT_DATA;\r\n\r\n        // Ensure baseStats exists and hydrate ALL fields with defaults\r\n        // BaseStats uses uppercase StatKey enum keys (ATTACK, DEFENSE, etc.)\r\n        if (!this.data.baseStats) {\r\n            this.data.baseStats = {} as BaseStats;\r\n        }\r\n\r\n        const cleanedStats: Record<string, number> = {};\r\n\r\n        // For each STAT key (uppercase), get the value or default\r\n        (Object.keys(STAT) as StatKey[]).forEach(statKey => {\r\n            const statId = STAT[statKey].id; // camelCase version (e.g., 'attack')\r\n\r\n            // Check for value in uppercase key first\r\n            let value = this.data.baseStats[statKey];\r\n\r\n            // If not found, check camelCase id for backward compatibility with buggy migration\r\n            if (value === undefined) {\r\n                value = this.data.baseStats[statId as StatKey];\r\n                // If found in camelCase, delete the old key to ensure clean state\r\n                if (value !== undefined) {\r\n                    delete this.data.baseStats[statId as StatKey];\r\n                }\r\n            }\r\n\r\n            // Use value if found, otherwise use default\r\n            cleanedStats[statKey] = value ?? DEFAULT_BASE_STATS[statId];\r\n        });\r\n\r\n        this.data.baseStats = cleanedStats as BaseStats;\r\n\r\n        // Ensure character fields exist\r\n        if (!this.data.character) {\r\n            this.data.character = { ...defaults.character };\r\n        }\r\n        if (typeof this.data.character.level !== 'number') {\r\n            this.data.character.level = defaults.character.level;\r\n        }\r\n        if (this.data.character.class === undefined) {\r\n            this.data.character.class = defaults.character.class;\r\n        }\r\n        if (!this.data.character.jobTier || ![JOB_TIER.THIRD, JOB_TIER.FOURTH].includes(this.data.character.jobTier as JobTier)) {\r\n            this.data.character.jobTier = defaults.character.jobTier;\r\n        }\r\n\r\n        // Ensure weapons exists\r\n        if (!this.data.weapons) {\r\n            this.data.weapons = {};\r\n        }\r\n\r\n        // Ensure mastery structure exists\r\n        if (!this.data.mastery) {\r\n            this.data.mastery = { ...defaults.mastery };\r\n        }\r\n        ([JOB_TIER.THIRD, JOB_TIER.FOURTH] as JobTier[]).forEach(tier => {\r\n            if (!this.data.mastery[tier]) {\r\n                this.data.mastery[tier] = { [MASTERY_TYPE.ALL]: {}, [MASTERY_TYPE.BOSS]: {} };\r\n            }\r\n            ([MASTERY_TYPE.ALL, MASTERY_TYPE.BOSS] as MasteryTypeValue[]).forEach(type => {\r\n                if (!this.data.mastery[tier][type]) {\r\n                    this.data.mastery[tier][type] = {};\r\n                }\r\n            });\r\n        });\r\n\r\n        // Ensure target exists\r\n        if (!this.data.target) {\r\n            this.data.target = { ...defaults.target };\r\n        }\r\n        if (!this.data.target.contentType) {\r\n            this.data.target.contentType = CONTENT_TYPE.NONE;\r\n        }\r\n\r\n        // Ensure weaponAttackBonus exists\r\n        if (!this.data.weaponAttackBonus) {\r\n            this.data.weaponAttackBonus = { ...defaults.weaponAttackBonus };\r\n        }\r\n        if (typeof this.data.weaponAttackBonus.totalAttack !== 'number') {\r\n            this.data.weaponAttackBonus.totalAttack = defaults.weaponAttackBonus.totalAttack;\r\n        }\r\n        if (typeof this.data.weaponAttackBonus.equippedAttack !== 'number') {\r\n            this.data.weaponAttackBonus.equippedAttack = defaults.weaponAttackBonus.equippedAttack;\r\n        }\r\n\r\n        // Ensure companions exists\r\n        if (!this.data.companions) {\r\n            this.data.companions = { ...defaults.companions };\r\n        }\r\n\r\n        // Ensure companions.companions exists\r\n        if (!this.data.companions.companions) {\r\n            this.data.companions.companions = {} as Record<CompanionKey, CompanionData>;\r\n        }\r\n\r\n        // Ensure companions.presets exists and has all presets\r\n        if (!this.data.companions.presets) {\r\n            this.data.companions.presets = { ...defaults.companions.presets };\r\n        }\r\n\r\n        // Validate each preset has correct structure\r\n        const presetIds: CompanionPresetId[] = [\r\n            'preset1', 'preset2', 'preset3', 'preset4', 'preset5',\r\n            'optimal-boss', 'optimal-normal'\r\n        ];\r\n        presetIds.forEach(presetId => {\r\n            const preset = this.data.companions.presets[presetId];\r\n            if (!preset) {\r\n                this.data.companions.presets[presetId] = { ...defaults.companions.presets[presetId] };\r\n            } else {\r\n                // Ensure preset has main and subs\r\n                if (!preset.main) {\r\n                    preset.main = null;\r\n                }\r\n                if (!preset.subs || preset.subs.length !== 6) {\r\n                    preset.subs = [null, null, null, null, null, null];\r\n                }\r\n            }\r\n        });\r\n\r\n        // Ensure companions.equippedPresetId is valid\r\n        if (!this.data.companions.equippedPresetId || !presetIds.includes(this.data.companions.equippedPresetId)) {\r\n            this.data.companions.equippedPresetId = defaults.companions.equippedPresetId;\r\n        }\r\n\r\n        // Ensure companions.showPresetDpsComparison is boolean\r\n        if (typeof this.data.companions.showPresetDpsComparison !== 'boolean') {\r\n            this.data.companions.showPresetDpsComparison = defaults.companions.showPresetDpsComparison;\r\n        }\r\n\r\n        // Ensure companions.lockedMainCompanion exists\r\n        if (!this.data.companions.lockedMainCompanion) {\r\n            this.data.companions.lockedMainCompanion = { ...defaults.companions.lockedMainCompanion };\r\n        }\r\n\r\n        // Ensure equipment exists\r\n        if (!this.data.equipment) {\r\n            this.data.equipment = { ...defaults.equipment };\r\n        }\r\n\r\n        // Ensure each equipment slot exists\r\n        const equipmentSlots: EquipmentSlotId[] = [\r\n            'head', 'cape', 'chest', 'shoulders', 'legs', 'belt',\r\n            'gloves', 'boots', 'ring', 'neck', 'eye-accessory'\r\n        ];\r\n\r\n        // Recovery migration: if all equipment slots are null and old equipmentSlots exists in localStorage,\r\n        // migrate the old data to recover it\r\n        const allSlotsNull = equipmentSlots.every(slotId => this.data.equipment[slotId] === null);\r\n        if (allSlotsNull) {\r\n            const equipmentSlotsData = localStorage.getItem('equipmentSlots');\r\n            if (equipmentSlotsData) {\r\n                try {\r\n                    const legacySlots: Record<string, { attack: number; mainStat: number; damageAmp: number }> = JSON.parse(equipmentSlotsData);\r\n                    let migratedCount = 0;\r\n\r\n                    equipmentSlots.forEach(slotId => {\r\n                        const legacyData = legacySlots[slotId];\r\n                        if (legacyData) {\r\n                            // Convert legacy format to new EquipmentSlotData format\r\n                            const statLines: StatLine[] = [];\r\n                            if (legacyData.damageAmp > 0) {\r\n                                statLines.push({ type: 'damage-amp', value: legacyData.damageAmp });\r\n                            }\r\n\r\n                            this.data.equipment[slotId] = {\r\n                                name: '',\r\n                                attack: legacyData.attack,\r\n                                mainStat: legacyData.mainStat,\r\n                                statLines\r\n                            };\r\n                            migratedCount++;\r\n                        }\r\n                    });\r\n\r\n                    if (migratedCount > 0) {\r\n                        console.log(`LoadoutStore: Recovered ${migratedCount} equipment slots from legacy equipmentSlots data`);\r\n                        // Clean up the old key after successful recovery\r\n                        localStorage.removeItem('equipmentSlots');\r\n                        this.saveDualWrite();\r\n                    }\r\n                } catch (e) {\r\n                    console.error('Failed to recover equipmentSlots data', e);\r\n                }\r\n            }\r\n        }\r\n\r\n        equipmentSlots.forEach(slotId => {\r\n            if (this.data.equipment[slotId] === undefined) {\r\n                this.data.equipment[slotId] = null;\r\n            }\r\n        });\r\n    }\r\n\r\n    // ========================================================================\r\n    // GETTERS - Return pre-hydrated data with safe defaults\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Get all base stats as key-value object\r\n     * @returns All base stats with type safety\r\n     */\r\n    getBaseStats(): BaseStats {\r\n        return { ...this.data.baseStats };\r\n    }\r\n\r\n    /**\r\n     * Get a single base stat value\r\n     * @param key - Stat key (e.g., \"attack\", \"crit-rate\")\r\n     * @returns Stat value (0 if not set)\r\n     */\r\n    getBaseStat(key: string): number {\r\n        return this.data.baseStats[key] ?? 0;\r\n    }\r\n\r\n    /**\r\n     * Get all weapons data\r\n     * @returns Weapons object indexed by rarity-tier key\r\n     */\r\n    getWeapons(): LoadoutData['weapons'] {\r\n        return { ...this.data.weapons };\r\n    }\r\n\r\n    /**\r\n     * Get single weapon data\r\n     * @param key - Weapon key (e.g., \"legendary-t4\")\r\n     * @returns Weapon data or null if not found\r\n     */\r\n    getWeapon(key: string): LoadoutData['weapons'][string] | null {\r\n        return this.data.weapons[key] ? { ...this.data.weapons[key] } : null;\r\n    }\r\n\r\n    /**\r\n     * Get mastery bonuses\r\n     * @returns Complete mastery bonus object\r\n     */\r\n    getMastery(): LoadoutData['mastery'] {\r\n        return JSON.parse(JSON.stringify(this.data.mastery));\r\n    }\r\n\r\n    /**\r\n     * Get specific mastery checkbox state\r\n     * @param tier - Mastery tier ('3rd' or '4th')\r\n     * @param type - Mastery type ('all' or 'boss')\r\n     * @param level - Mastery level (e.g., '64', '124')\r\n     * @returns Checkbox state (false if not set)\r\n     */\r\n    getMasteryCheckbox(tier: MasteryTier, type: MasteryType, level: string): boolean {\r\n        return this.data.mastery[tier][type][level] ?? false;\r\n    }\r\n\r\n    /**\r\n     * Get target selection\r\n     * @returns Target selection object\r\n     */\r\n    getTarget(): LoadoutData['target'] {\r\n        return { ...this.data.target };\r\n    }\r\n\r\n    /**\r\n     * Get character metadata\r\n     * @returns Character metadata object\r\n     */\r\n    getCharacter(): LoadoutData['character'] {\r\n        return { ...this.data.character };\r\n    }\r\n\r\n    /**\r\n     * Get selected class\r\n     * @returns Selected class name or null\r\n     */\r\n    getSelectedClass(): string | null {\r\n        return this.data.character.class;\r\n    }\r\n\r\n    /**\r\n     * Get selected job tier\r\n     * @returns Job tier ('3rd' or '4th')\r\n     */\r\n    getSelectedJobTier(): MasteryTier {\r\n        return this.data.character.jobTier;\r\n    }\r\n\r\n    /**\r\n     * Get character level\r\n     * @returns Character level\r\n     */\r\n    getCharacterLevel(): number {\r\n        return this.data.character.level;\r\n    }\r\n\r\n    /**\r\n     * Get weapon attack bonus\r\n     * @returns Weapon attack bonus object with totalAttack and equippedAttack\r\n     */\r\n    getWeaponAttackBonus(): LoadoutData['weaponAttackBonus'] {\r\n        return { ...this.data.weaponAttackBonus };\r\n    }\r\n\r\n    /**\r\n     * Get entire loadout data (for export/debugging)\r\n     * @returns Deep clone of loadout data\r\n     */\r\n    getAllData(): LoadoutData {\r\n        return JSON.parse(JSON.stringify(this.data));\r\n    }\r\n\r\n    // ========================================================================\r\n    // COMPANION GETTERS\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Get all companion state\r\n     * @returns Complete companion state\r\n     */\r\n    getCompanions(): CompanionState {\r\n        return { ...this.data.companions };\r\n    }\r\n\r\n    /**\r\n     * Get a single companion's data\r\n     * @param companionKey - Companion key (e.g., 'Hero-Legendary')\r\n     * @returns Companion data (returns default locked state if not found)\r\n     */\r\n    getCompanion(companionKey: CompanionKey): CompanionData {\r\n        if (!this.data.companions.companions[companionKey]) {\r\n            // Return default locked state for uninitialized companions\r\n            return { unlocked: false, level: 1 };\r\n        }\r\n        return { ...this.data.companions.companions[companionKey] };\r\n    }\r\n\r\n    /**\r\n     * Get all presets\r\n     * @returns All presets\r\n     */\r\n    getPresets(): Record<CompanionPresetId, CompanionPreset> {\r\n        return JSON.parse(JSON.stringify(this.data.companions.presets));\r\n    }\r\n\r\n    /**\r\n     * Get a single preset\r\n     * @param presetId - Preset ID\r\n     * @returns Preset data\r\n     */\r\n    getPreset(presetId: CompanionPresetId): CompanionPreset {\r\n        return JSON.parse(JSON.stringify(this.data.companions.presets[presetId]));\r\n    }\r\n\r\n    /**\r\n     * Get equipped preset ID\r\n     * @returns Currently equipped preset ID\r\n     */\r\n    getEquippedPresetId(): CompanionPresetId {\r\n        return this.data.companions.equippedPresetId;\r\n    }\r\n\r\n    /**\r\n     * Get show preset DPS comparison setting\r\n     * @returns Whether to show DPS comparison\r\n     */\r\n    getShowPresetDpsComparison(): boolean {\r\n        return this.data.companions.showPresetDpsComparison;\r\n    }\r\n\r\n    /**\r\n     * Get locked main companion for optimal presets\r\n     * @param optimalType - 'optimal-boss' or 'optimal-normal'\r\n     * @returns Locked companion key or null\r\n     */\r\n    getLockedMainCompanion(optimalType: 'optimal-boss' | 'optimal-normal'): CompanionKey | null {\r\n        return this.data.companions.lockedMainCompanion[optimalType];\r\n    }\r\n\r\n    // ========================================================================\r\n    // SETTERS - Partial updates with immediate save\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Update multiple base stats at once\r\n     * @param updates - Object mapping stat keys (hyphenated, camelCase, or uppercase) to values\r\n     */\r\n    updateBaseStats(updates: Record<string, number>): void {\r\n        const normalizedUpdates: Record<string, number> = {};\r\n        Object.entries(updates).forEach(([key, value]) => {\r\n            let normalizedKey = key;\r\n\r\n            // First, migrate hyphenated to camelCase\r\n            const hyphenatedMigrated = LoadoutStore.STAT_KEY_MIGRATION[key];\r\n            if (hyphenatedMigrated) {\r\n                normalizedKey = hyphenatedMigrated;\r\n            }\r\n\r\n            // Then, convert camelCase to uppercase\r\n            const uppercased = LoadoutStore.CAMELCASE_TO_UPPERCASE[normalizedKey];\r\n            if (uppercased) {\r\n                normalizedKey = uppercased;\r\n            }\r\n\r\n            normalizedUpdates[normalizedKey] = value;\r\n        });\r\n        Object.assign(this.data.baseStats, normalizedUpdates);\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Update single base stat\r\n     * @param key - Stat key (accepts hyphenated, camelCase, or uppercase)\r\n     * @param value - New value\r\n     */\r\n    updateBaseStat(key: StatKey | string, value: number): void {\r\n        // Normalize key to uppercase StatKey format\r\n        let normalizedKey = key;\r\n\r\n        // First, migrate hyphenated to camelCase\r\n        const hyphenatedMigrated = LoadoutStore.STAT_KEY_MIGRATION[key];\r\n        if (hyphenatedMigrated) {\r\n            normalizedKey = hyphenatedMigrated;\r\n        }\r\n\r\n        // Then, convert camelCase to uppercase\r\n        const uppercased = LoadoutStore.CAMELCASE_TO_UPPERCASE[normalizedKey];\r\n        if (uppercased) {\r\n            normalizedKey = uppercased;\r\n        }\r\n\r\n        this.data.baseStats[normalizedKey] = value;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Update weapon data\r\n     * @param key - Weapon key (e.g., \"legendary-t4\")\r\n     * @param data - Partial weapon data to update\r\n     */\r\n    updateWeapon(key: string, data: Partial<LoadoutData['weapons'][string]>): void {\r\n        if (!this.data.weapons[key]) {\r\n            this.data.weapons[key] = { level: 0, stars: 0, equipped: false };\r\n        }\r\n        this.data.weapons[key] = { ...this.data.weapons[key], ...data };\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Update mastery checkbox state\r\n     * @param tier - Mastery tier ('3rd' or '4th')\r\n     * @param type - Mastery type ('all' or 'boss')\r\n     * @param level - Mastery level (e.g., '64', '124')\r\n     * @param checked - Checkbox state\r\n     */\r\n    updateMasteryCheckbox(\r\n        tier: MasteryTier,\r\n        type: MasteryType,\r\n        level: string,\r\n        checked: boolean\r\n    ): void {\r\n        this.data.mastery[tier][type][level] = checked;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Update target selection\r\n     * @param data - Partial target data\r\n     */\r\n    updateTarget(data: Partial<LoadoutData['target']>): void {\r\n        Object.assign(this.data.target, data);\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Update character metadata\r\n     * @param data - Partial character data\r\n     */\r\n    updateCharacter(data: Partial<LoadoutData['character']>): void {\r\n        Object.assign(this.data.character, data);\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Update equipment data for a specific slot\r\n     * @param slotId - Equipment slot ID\r\n     * @param data - Equipment slot data\r\n     */\r\n    updateEquipment(slotId: EquipmentSlotId, data: EquipmentSlotData): void {\r\n        this.data.equipment[slotId] = data;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Get all equipment data\r\n     */\r\n    getEquipmentData(): LoadoutData['equipment'] {\r\n        return this.data.equipment;\r\n    }\r\n\r\n    /**\r\n     * Set selected class\r\n     * @param className - Class name or null\r\n     */\r\n    setSelectedClass(className: string | null): void {\r\n        this.data.character.class = className;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Set selected job tier\r\n     * @param jobTier - Job tier ('3rd' or '4th')\r\n     */\r\n    setSelectedJobTier(jobTier: MasteryTier): void {\r\n        this.data.character.jobTier = jobTier;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Set character level\r\n     * @param level - Character level\r\n     */\r\n    setCharacterLevel(level: number): void {\r\n        this.data.character.level = level;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Update weapon attack bonus\r\n     * @param data - Partial weapon attack bonus data\r\n     */\r\n    updateWeaponAttackBonus(data: Partial<LoadoutData['weaponAttackBonus']>): void {\r\n        Object.assign(this.data.weaponAttackBonus, data);\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    // ========================================================================\r\n    // COMPANION SETTERS\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Update companion data\r\n     * @param companionKey - Companion key\r\n     * @param data - Partial companion data to update\r\n     */\r\n    updateCompanion(companionKey: CompanionKey, data: Partial<CompanionData>): void {\r\n        if (!this.data.companions.companions[companionKey]) {\r\n            this.data.companions.companions[companionKey] = { unlocked: false, level: 1 };\r\n        }\r\n        this.data.companions.companions[companionKey] = {\r\n            ...this.data.companions.companions[companionKey],\r\n            ...data\r\n        };\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Set a preset slot\r\n     * @param presetId - Preset ID\r\n     * @param slotType - 'main' or 'sub'\r\n     * @param slotIndex - Slot index (0 for main, 0-5 for subs)\r\n     * @param companionKey - Companion key or null to clear\r\n     */\r\n    setPresetSlot(\r\n        presetId: CompanionPresetId,\r\n        slotType: 'main' | 'sub',\r\n        slotIndex: number,\r\n        companionKey: CompanionKey | null\r\n    ): void {\r\n        const preset = this.data.companions.presets[presetId];\r\n        if (!preset) return;\r\n\r\n        if (slotType === 'main') {\r\n            preset.main = companionKey;\r\n        } else {\r\n            preset.subs[slotIndex] = companionKey;\r\n        }\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Clear a preset slot\r\n     * @param presetId - Preset ID\r\n     * @param slotType - 'main' or 'sub'\r\n     * @param slotIndex - Slot index (0 for main, 0-5 for subs)\r\n     */\r\n    clearPresetSlot(\r\n        presetId: CompanionPresetId,\r\n        slotType: 'main' | 'sub',\r\n        slotIndex: number\r\n    ): void {\r\n        this.setPresetSlot(presetId, slotType, slotIndex, null);\r\n    }\r\n\r\n    /**\r\n     * Set equipped preset ID\r\n     * @param presetId - Preset ID to equip\r\n     */\r\n    setEquippedPresetId(presetId: CompanionPresetId): void {\r\n        this.data.companions.equippedPresetId = presetId;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Set show preset DPS comparison\r\n     * @param show - Whether to show DPS comparison\r\n     */\r\n    setShowPresetDpsComparison(show: boolean): void {\r\n        this.data.companions.showPresetDpsComparison = show;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Set locked main companion for optimal presets\r\n     * @param optimalType - 'optimal-boss' or 'optimal-normal'\r\n     * @param companionKey - Companion key or null to clear\r\n     */\r\n    setLockedMainCompanion(\r\n        optimalType: 'optimal-boss' | 'optimal-normal',\r\n        companionKey: CompanionKey | null\r\n    ): void {\r\n        this.data.companions.lockedMainCompanion[optimalType] = companionKey;\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    // ========================================================================\r\n    // PERSISTENCE\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Save to localStorage\r\n     * Note: Only writes to 'loadout-data' key. Legacy dual-write has been removed.\r\n     */\r\n    private saveDualWrite(): void {\r\n        // Write to new 'loadout-data' key only\r\n        localStorage.setItem('loadout-data', JSON.stringify(this.data));\r\n    }\r\n\r\n    /**\r\n     * Convert new LoadoutData to legacy damageCalculatorData format\r\n     * Used for dual-write backward compatibility\r\n     */\r\n    private convertToLegacyFormat(): LegacyDamageCalculatorData {\r\n        // Reverse map: uppercase \u2192 hyphenated for legacy export\r\n        const reverseMigration: Record<string, string> = {};\r\n        Object.entries(LoadoutStore.STAT_KEY_MIGRATION).forEach(([hyphenated, upper]) => {\r\n            reverseMigration[upper] = hyphenated;\r\n        });\r\n\r\n        // Convert baseStats from uppercase to hyphenated\r\n        const baseSetup: Record<string, number> = {};\r\n        Object.entries(this.data.baseStats).forEach(([key, value]) => {\r\n            const legacyKey = reverseMigration[key] ?? key;\r\n            baseSetup[legacyKey] = value;\r\n        });\r\n\r\n        const legacy: LegacyDamageCalculatorData = {\r\n            baseSetup,\r\n            weapons: {},\r\n            masteryBonuses: {\r\n                [JOB_TIER.THIRD]: {\r\n                    [MASTERY_TYPE.ALL]: { ...this.data.mastery[JOB_TIER.THIRD][MASTERY_TYPE.ALL] },\r\n                    [MASTERY_TYPE.BOSS]: { ...this.data.mastery[JOB_TIER.THIRD][MASTERY_TYPE.BOSS] }\r\n                },\r\n                [JOB_TIER.FOURTH]: {\r\n                    [MASTERY_TYPE.ALL]: { ...this.data.mastery[JOB_TIER.FOURTH][MASTERY_TYPE.ALL] },\r\n                    [MASTERY_TYPE.BOSS]: { ...this.data.mastery[JOB_TIER.FOURTH][MASTERY_TYPE.BOSS] }\r\n                }\r\n            },\r\n            contentType: this.data.target.contentType === CONTENT_TYPE.NONE ? undefined : this.data.target.contentType,\r\n            subcategory: this.data.target.subcategory ?? undefined,\r\n            selectedStage: this.data.target.selectedStage ?? undefined\r\n        };\r\n\r\n        // Convert weapons to legacy format\r\n        Object.entries(this.data.weapons).forEach(([key, weapon]) => {\r\n            legacy.weapons![key] = {\r\n                level: weapon.level,\r\n                stars: weapon.stars,\r\n                equipped: weapon.equipped\r\n            };\r\n        });\r\n\r\n        return legacy;\r\n    }\r\n\r\n    // ========================================================================\r\n    // TESTING/DEBUGGING HELPERS\r\n    // ========================================================================\r\n\r\n    /**\r\n     * Reset store to defaults (for testing)\r\n     */\r\n    reset(): void {\r\n        this.data = JSON.parse(JSON.stringify(DEFAULT_LOADOUT_DATA));\r\n        this.saveDualWrite();\r\n    }\r\n\r\n    /**\r\n     * Check if store is initialized\r\n     */\r\n    isReady(): boolean {\r\n        return this.isInitialized;\r\n    }\r\n}\r\n\r\n// ========================================================================\r\n// SINGLETON EXPORT\r\n// ========================================================================\r\n\r\nexport const loadoutStore = new LoadoutStore();\r\n"],
  "mappings": "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",
  "names": []
}
